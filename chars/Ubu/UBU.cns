;=====================================
;UBU VAGRANTE (3.5)
;=====================================

;Ubu carta d'identita'
[Data]
life = 1000             
attack = 100            
defence = 100           
fall.defence_up = 50    
liedown.time = 60       
airjuggle = 15         
sparkno = 1             
guard.sparkno = 40      
KO.echo = 0             
volume = -5
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1           
yscale = 1           
ground.back = 15     
ground.front = 22  
air.back = 12        
air.front = 12       
height = 60          
attack.dist = 160   
proj.attack.dist = 90
proj.doscale = 0      
head.pos = -5, -90   
mid.pos = -5, -60    
shadowoffset = 0     
draw.offset = 0,0   

[Velocity]
walk.fwd  = 2.1           
walk.back = -1.9          
run.fwd  = 5.5, 0         
run.back = -7.33,-2.8     
jump.neu = 0,-9.65           
jump.back = -3.21, -10.4     
jump.fwd = 3.21,-10.4       
runjump.fwd = 4.1,-9.7      
airjump.neu = 0,-9.7      
airjump.back = -2.55,-9.7
airjump.fwd = 2.5,-9.7    

[Movement]
airjump.num = 0       
airjump.height = 35   
yaccel = .50        
stand.friction = .85  
crouch.friction = .82 

;==================================================================================
;Corsa
[Statedef 100]
type    = S
movetype = I
physics = N
anim = 100

[State 100,0]
type = VelSet
trigger1 = AnimElem = 3
x = Const(velocity.run.fwd.x)

[State 100, SE]
type = PlaySnd
trigger1 = Timemod = 23,0;  time = 0
value = 100,0
channel = 20


[State 100, SE]
type = StopSnd
trigger1 = AnimElem = 5, >= 0
trigger1 = command != "holdfwd"
channel = 20;

[State 100, CG]
type = ChangeState
triggerall = var(7) != 1
trigger1 = Command != "holdfwd" && Time >= 10
value = 101
ctrl = 1

[State 100, CG]
type = ChangeState
trigger1 = Command = "holdupfwd" && Time >= 10
value = 40

[State 100, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;------------------------ 
[Statedef 101]
type = S
movetype = I
physics = S
anim = 101
velset = 0, 0

[State 101, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
;salto all'indietro
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

[State 105, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 105, STS]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
physics = N

[State 105, Velset]
type = VelSet
trigger1 = AnimElem = 3
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 105, VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .43

[State 105, CG]
type = ChangeState
trigger1 = AnimElem = 3, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 106

;---------------------------
;salto all'indietro (atterraggio)
[Statedef 106]
type = S
movetype = I
physics = S
anim = 106
velset = 0, 0

[State 105, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 106, Posset]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, Makedust]
type = MakeDust
trigger1 = Time >= 0
pos = -30, 0

[State 106, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Salti saltini Saltoni!
;=================================================================
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40, VS]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 40, VS]
type = VarSet
trigger1 = command = "holdfwd"
trigger1 = var(8) != 2
var(8) = 1

[State 40, VS]
type = VarSet
trigger1 = command = "holdback"
trigger1 = var(8) != -2
var(8) = -1

[State 40, VS]
type = VarSet
triggerall = Time = 0
triggerall = command = "holdfwd"
trigger1 = command = "longjump"
trigger2 = prevstateno = 100
var(8) = 2

[State 40, VS]
type = VarSet
trigger1 = Time = 0
trigger1 = command = "holdback"
trigger1 = command = "longjump"
var(8) = -2

[State 40, VS]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(8) != 0 && var(8) != 1 && var(8) != -1
trigger1 = command = "holdup"
trigger2 = command != "holdup"
value = 2041

[State 40, VS]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(var(8)=0, const(velocity.jump.neu.x), ifelse(var(8)>0, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;Saltoni
[Statedef 2041]
type    = A
physics = A
velset = 0, -8
ctrl = 1

[State 2041, VelSet]
type = VelSet
trigger1 = Time = 0
trigger1 = command = "holdup"
y = -10.11 

[State 2041, Velset]         ;salto con simpatia
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 1
x = 3.4                 


[State 2041, Velset]         ;avanti mazinga!
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 2
x = 4.84   

[State 2041, Velset]         ;salto con simpatia, ma non troppa
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -1
x = -3.4
              
[State 2041, Velset]         ;indietro tutta!
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -2
x = -4.84                    


[State 2041, AfterImage]     ;e diamogli un tocco di colore
type = AfterImage
triggerall = Time = 0
trigger1 = var(8) = 2 || var(8) = -2
time = 10
trans = add1
timegap = 2
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 5
                         
[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = command = "holdup"
value = 41

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = command != "holdup"
value = 2041

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = command = "holdup"
value = 42

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = command = "holdup"
value = 43

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Vel y > -2 && pos Y < -70
trigger1 = Vel X > 0
trigger1 = SelfAnimExist(45)
persistent = 0
value = 45

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Vel y > -2 && pos Y < -70
trigger1 = Vel X < 0
trigger1 = SelfAnimExist(46)
persistent = 0
value = 46

[State 2041, ChangeAnim]
type = ChangeAnim
trigger1 = Vel y > -1 && pos Y >= -70
trigger1 = Anim != 45 && Anim != 46
persistent = 0
value = 2044

[State 2041, VelAdd]
type = VelAdd
trigger1 = Time >= 25
y = 0.1

;===========================================================================
;Me Paro
[Statedef 120]
type = U    
physics = U 

[State 120, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && p2stateno < 1000 && statetype != A
value = 2120 + (statetype = C) + (statetype = A)*2          ;mano davanti mano

[State 120, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = p2stateno >= 1000
trigger2 = statetype = A
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

;---------------------------------------------------------------------------
;Me Paro dritto
[Statedef 130]
type    = S
physics = S

[State 130, ChangeAnim]
type = ChangeAnim
trigger1 = p2stateno = [200,999]
value = 2130                      ;mano davanti mano ancora

[State 130, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 130 && Anim != 2130 
value = 130

;---------------------------------------------------------------------------
;Me paro abasso
[Statedef 131]
type    = C
physics = C

[State 131, ChangeAnim]
type = ChangeAnim
trigger1 = p2stateno = [200,999]
value = 2131                     ;in cerca delle rose

[State 131, ChangeAnim]
type = ChangeAnim
trigger1 = Anim != 131 && Anim != 2131 
value = 131

;---------------------------------------------------------------------------
;Me paro finisco
[Statedef 140]
type = U    
physics = U 
ctrl = 1

[State 140, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && p2stateno < 1000 && statetype != A
value = 2140 + (statetype = C) + (statetype = A)*2    ;mano e la mano

[State 140, ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = p2stateno >= 1000
trigger2 = statetype = A
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

;---------------------------------------------------------------------------
;Me Paro ma tremo
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, ChangeA]
type = ChangeAnim
trigger1 = p2stateno < 1000 && Anim != 850
value = 2150             ; mano alza la mano

[State 150, ChangeA]
type = ChangeAnim
trigger1 = Anim != 2150 && Anim != 850
value = 150

[State 150, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 2150
v = 4
value = 2

[State 150, VA]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 150
v = 4
value = 3

[State 150, CA]
type = ChangeAnim
trigger1 = Var(4)  >= 99
value = 850

[State 150, BGPalfx]
type = BGPalfx
trigger1 = Var(4)  >= 99
trigger1 = time = 0
ignorehitpause = 1
time = 1
add = 255,255,255

[State 152, HitBy]
type = HitBy
trigger1 = Var(4)  >= 99
value = SCA

[State 150, Changestate]
type = ChangeState
trigger1 = Var(4)  >= 99
trigger1 = HitShakeOver
value = 10850

[State 150, Changestate]
type = ChangeState
trigger1 = HitShakeOver
value = 151

;---------------------------------------------------------------------------
;Me paro ma ritorno
[Statedef 151]
type    = S
movetype= H
physics = S

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)       ;lontanoooo
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 151, 4]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 130
ctrl = 1

;---------------------------------------------------------------------------
;Me paro ma basso
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 0]
type = ChangeAnim
trigger1 = p2stateno < 1000
value = 2151                 ;a coglier le rose

[State 152, 1]
type = ChangeAnim
trigger1 = Anim != 2151
value = 151

[State 152, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 2151
v = 4
value = 2

[State 152, VarAdd]
type = VarAdd
trigger1 = time = 0
trigger1 = Anim = 151
v = 4
value = 3

[State 152,ChangeAnim]
type = ChangeAnim
trigger1 = Var(4)  >= 99
value = 850

[State 152, BGPalfx]
type = BGPalfx
trigger1 = Var(4)  >= 99
trigger1 = time = 0
ignorehitpause = 1
time = 1
add = 255,255,255

[State 152, HitBy]
type = HitBy
trigger1 = Var(4)  >= 99
value = SCA

[State 152, ChangeState]
type = ChangeState
trigger1 = Var(4)  >= 99
trigger1 = HitShakeOver
value = 10850

[State 152, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 153

;---------------------------------------------------------------------------
;Me paro ma le rose sono lontane
[Statedef 153]
type    = C
movetype= H
physics = C

[State 153, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, VelSet]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = Time >= GetHitVar(hittime)
x = 0

[State 153, CtrlSet]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 153, CS]
type = ChangeState
trigger1 = Time >= GetHitVar(hittime)
value = 131
ctrl = 1

;-------------------------------------------------------------------------------
Se non torno e' perche' sono SCHIVOOOO
[Statedef 10850]
type = S
movetype = H
physics = S
anim = 850          ;SCHIVO

[State 10850, VarSet]
type = VarSet
trigger1 = Time = 0
var(4) = 0

[State 10850, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;================================================================================
;me cado!
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, HVS]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, Veladd]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, CS]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
value = 5100;

;================================================================================
;-Sconfitta per il tempo
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, NotHitBy]    ;stupido monoframe
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;-ESULTANZE
[Statedef 180]
type = S

[State 180, 1]
type = VarRandom
trigger1 = Time = 0
v = 1
range = 0,6              ;0,6 

[State 180, 2]           ;rimani in mutande
type = ChangeState
trigger1 = Var(1) = 0
value = 181             

[State 180, 3]           ;gran bel gessato
type = ChangeState
trigger1 = Var(1) = 1
value = 182              

[State 180, 4]           ;ti indico!
type = ChangeState
trigger1 = Var(1) = 2
value = 183              

[State 180, 5]           ;occhiali
type = ChangeState
trigger1 = Var(1) = 3
value = 185

[State 180, 5]           ;vento
type = ChangeState
trigger1 = Var(1) = 4
value = 186

[State 180, 5]           ;dormo
type = ChangeState
trigger1 = Var(1) = 5
value = 188

[State 180, 6]           ;tope!
type = ChangeState
trigger1 = Var(1) = 6
value = 10097


;---------------------------------------------------------------------------
; Mutande
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 181, AS]
type = AssertSpecial
trigger1 = Time = [0,350]
flag = RoundNotOver

[State 181, SE]
type = PlaySnd
trigger1 = Animelem = 3
value = 180,0;

[State 181, SE]
type = PlaySnd
trigger1 = Animelem = 6
value = 190,2

[State 181, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, Exclamation]         ;il punto esclamativo
type = Explod
trigger1 = AnimElem = 13, =8
anim = 8020
pos = 27,-143                    ;da confermare
sprpriority = 5
scale = .5, .5

[State 181, SE]                  ;antono
type = PlaySnd
trigger1 = Animelem = 13, 80
value = 11010,0;
volume = 25

[State 181, tremolino]
type = EnvShake
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
time = 4
ampl = -3
freq = 110


;---------------------------------------------------------------------------
; Gessato
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182, AS]
type = AssertSpecial
trigger1 = Time = [0,270]     
flag = RoundNotOver          

[State 182, Explod]        ;elegante!
type = Explod
trigger1 = AnimElem = 8
anim = 8021
pos = -50,0
postype = p1
ontop = 1
ownpal = 1
shadow = -1 

[State 182, SE]     ;esplodi
type = PlaySnd
trigger1 = Animelem = 8
value = 3100,0;
          
[State 182, SE]        ;risata
type = PlaySnd
trigger1 = time = 183
value = 180,2
volume = 85

[State 182, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;Ti Indico!
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 183, AS]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

[State 183, SE]            ;io vorrei, ma sei vuoi resti sola!
type = PlaySnd
trigger1 = Animelem = 2
value = 180,1;

[State 183, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;Occhiali
[Statedef 185]
type = S
ctrl = 0
anim = 185
velset = 0,0

[State 185, AS]
type = AssertSpecial
trigger1 = Time = [0,270]     
flag = RoundNotOver          

[State 185, Explod]       
type = Explod
trigger1 = AnimElem = 8
anim = 8021
pos = -50,0
postype = p1
ontop = 1
ownpal = 1
shadow = -1 

[State 185, SE]     ;esplodi
type = PlaySnd
trigger1 = Animelem = 8
value = 3100,0;
          
[State 185, SE]        ;risata
type = PlaySnd
trigger1 = time = 183
value = 180,2
volume = 85

[State 185, NHB]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;Vento
[Statedef 186]
type = S
ctrl = 0
anim = 186
velset = 0,0

[State 186, AS]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

[State 186, SE]            ;da metterci la ventoliata
type = PlaySnd
trigger1 = Animelem = 4
value = 186,0

[State 186, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;Dormo
[Statedef 188]
type = S
ctrl = 0
anim = 188
velset = 0,0

[State 188, AS]
type = AssertSpecial
trigger1 = Time = [0,800]
flag = RoundNotOver

[State 188, SE]            ;da metterci la russata
type = PlaySnd
trigger1 = time = 100
value = 188, 0
volume = 250

[State 188, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;Tope!
[Statedef 10097]
type = S
ctrl = 0
anim = 10097
velset = 0,0

[State 10097, AS]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = RoundNotOver

[State 10097, Explod]       
type = Explod
trigger1 = AnimElem = 9, =10
anim = 8021
pos = -50,0
postype = p1
ontop = 1
ownpal = 1
shadow = -1 

[State 10097, SE]     ;esplodi
type = PlaySnd
trigger1 = Animelem = 9, =10
value = 3100,0;


[State 10097, SE]   ; snap
type = PlaySnd
trigger1 = Animelem = 6
value = 10097, 2
volume = 215

[State 188, SE]     ; monster!          
type = PlaySnd
trigger1 = Animelem = 10
value = 10097,0
volume = 250

[State 10097, SE]   ; le risate
type = PlaySnd
trigger1 = Animelem = 10, =69
value = 10097, 1
volume = 150


[State 10097, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;---------------------------------------------------------------------------
; PRESENTAZIONE 1
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191, vs Bassi]            ;presentaz. contro i personaggi bassi
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "Bao"
trigger2 = p4name = "Bao"
trigger3 = p2name = "Choi Bounge"
trigger4 = p4name = "Choi Bounge"
trigger5 = p2name = "Wolverine"
trigger6 = p4name = "Wolverine"
trigger7 = p2name = "Miyako Arima HM"
trigger8 = p4name = "Miyako Arima HM"
trigger9 = p2name = "Megaman1"
trigger10 = p4name = "Megaman1"
trigger11 = p2name = "Mystiq Vegeta"
trigger12 = p4name = "Mystiq Vegeta"
trigger13 = p2name = "Tung Fu Rue"
trigger14 = p4name = "Tung Fu Rue"
trigger15 = p2name = "Diao Chan"
trigger16 = p4name = "Diao Chan"
trigger17 = p2name = "Gaits"
trigger18 = p4name = "Gaits"
trigger19 = p2name = "Gen"
trigger20 = p4name = "Gen"
trigger21 = p2name = "Okina"
trigger22 = p4name = "Okina"
trigger23 = p2name = "Choi"
trigger24 = p4name = "Choi"
trigger25 = p2name = "Gato By Deuce"
trigger26 = p4name = "Gato By Deuce"
trigger27 = p2name = "Rolf"
trigger28 = p4name = "Rolf"
trigger29 = p2name = "Sasquatch"
trigger30 = p4name = "Sasquatch"
trigger31 = p2name = "tarma"
trigger32 = p4name = "tarma"
trigger33 = p2name = "PocShinGouki"
trigger34 = p4name = "PocShinGouki"
trigger35 = p2name = "marco"
trigger36 = p4name = "marco"
trigger37 = p2name = "Marco_nbc"
trigger38 = p4name = "Marco_nbc"
trigger39 = p2name = "UME_TANE"
trigger40 = p4name = "UME_TANE"
trigger41 = p2name = "choi"
trigger42 = p4name = "choi"
value = 193

[State 191, vs Ella]            ;presentaz. speciale contro Ella
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "ELLA"
trigger2 = p4name = "ELLA"
trigger3 = p2name = "ELLA 2.5"
trigger4 = p4name = "ELLA 2.5"
value = 15000

[State 191, vs Kuando]            ;presentaz. contro kuando
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "kuando"
trigger2 = p4name = "kuando"
trigger3 = p2name = "kuando 1.5"
trigger4 = p4name = "kuando 1.5"
value = 17000

[State 191, VR]           ;nano nano, la tua manoooo
type = VarRandom
trigger1 = Time = 0
v = 1
range = 0,3

[State 191, CG]
type = ChangeState
trigger1 = Var(1) = 1
value = 198

[State 191, CG]
type = ChangeState
trigger1 = Var(1) = 2
value = 10095          ;lui che cade

[State 191, CG]
type = ChangeState
trigger1 = Var(1) = 3
value = 10122          ;l'allegra compagnia

[State 191, CA] 
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191, AS]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = Intro

[State 191, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 195,1;

[State 191, esplosione]
type = PlaySnd
trigger1 = animelem = 15
value = 3100,0;

[State 191, SE]
type = PlaySnd
trigger1 = animelem = 15
value = 190,0;           

[State 191, SE]
type = PlaySnd
trigger1 = Animelem = 4
value = 190,2

[State 191, CG] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Ma se la mia presenza non fosse gradita
[Statedef 192]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 192, CA] 
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 192, AS]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = Intro

[State 192, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 195,0;

[State 192, SE]
type = PlaySnd
trigger1 = Animelem = 4
value = 190,2

[State 192, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Derido Il Basso               
[Statedef 193]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 193, CA]        ;eheheh
type = ChangeAnim
trigger1 = RoundState = 0
value = 193

[State 193, AS]
type = AssertSpecial
trigger1 = Time = [0,330]
flag = Intro


[State 193, SE]
type = PlaySnd
trigger1 = animelem = 7
value = 190,4;

[State 193, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; PRESENTAzione speciale (da fare)
[Statedef 194]
type = S
ctrl = 0
anim = 194
velset = 0,0

[State 194, CA]             ; mi sa che me la sono scordata 
type = ChangeAnim
trigger1 = RoundState = 0
value = 194

[State 194, AS]
type = AssertSpecial
trigger1 = Time = [0,380]
flag = Intro

[State 194, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 190,3;

[State 194, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Presentaz. Occhiali
[Statedef 198]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 198, AS]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = Intro

[State 198, SE]
type = PlaySnd
trigger1 = animelem = 2
value = 195,1;

[State 198, SE]
type = PlaySnd
trigger1 = animelem = 13
value = 3100,0; 

[State 198, SE]
type = PlaySnd
trigger1 = Animelem = 9
value = 210,1

[State 198, Explod]       
type = Explod
trigger1 = AnimElem = 8
anim = 8026
postype = p1
pos = 5,-55
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 198, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------
;Presentaz. Ubu che cade
[Statedef 10095]
type = S
ctrl = 0
anim = 10095
velset = 0,0

[State 10095, AS]
type = AssertSpecial
trigger1 = Time = [0,300]
flag = Intro

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 2
value = 6000,0;
volume = 50

[State 10095, SE]
type = PlaySnd
trigger1 = Animelem = 18
value = 11000,0;
volume = 50

[State 10095, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------
;Presentaz. L'allegra compagnia
[Statedef 10122]
type = S
ctrl = 0
anim = 10122
velset = 0,0

[State 10122, AS]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[State 3165, Explod]       ;yakuza con spada
type = Explod
trigger1 = AnimElem = 1
anim = 10121
pos = 0,0 
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1
supermovetime = 200
shadow = -1

[State 3165, Explod]        ;bell'uomo
type = Explod
trigger1 = AnimElem = 1
anim = 10120
pos = 0,0 
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1
supermovetime = 200
shadow = -1

[State 3165, Explod]       ;palonzo
type = Explod
trigger1 = AnimElem = 1
anim = 10123
pos = 2,-2 
postype = p1
sprpriority = -3
bindtime = 1
ownpal = 1
supermovetime = 200
shadow = -1

[State 10122, SE]
type = PlaySnd
trigger1 = Time = 160
trigger2 = Time = 170
value = 6000,0;
volume = 50

;[State 10122, SE]
;type = PlaySnd
;trigger1 = Animelem = 18
;value = 11000,0;
;volume = 50

[State 10122, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------
;Presentaz. speciale contro ella
[Statedef 15000]
type = S
ctrl = 0
anim = 15000
velset = 0,0
sprpriority = 7

[State 15000, AS]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = Intro

[State 193, SE]
type = PlaySnd
trigger1 = animelem = 6
value = 190,4;

[State 193, SE]
type = PlaySnd
trigger1 = animelem = 31
value = 10097,2;

[State 193, SE]
type = PlaySnd
trigger1 = animelem = 37
value = 5000,1;

[State 15000, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; PRESENTAzione speciale contro Kuando
[Statedef 17000]
type = S
ctrl = 0
anim = 17000
velset = 0,0

;[State 17000, CA]             
;type = ChangeAnim
;trigger1 = RoundState = 0
;value = 194

[State 194, AS]
type = AssertSpecial
trigger1 = Time = [0,650]
flag = Intro

[State 193, SE]
type = PlaySnd
trigger1 = time = 209
value = 3100,0

[State 182, Explod]        
type = Explod
trigger1 = time = 209
anim = 8021
pos = -50,0
postype = p1
ownpal = 1
shadow = -1 
sprpriority = 5

[State 185, Explod]     
type = Explod
trigger1 = time = 209
anim = 8008
pos = 0,0
postype = p1
ownpal = 1
shadow = -1
ontop = 1

[State 193, SE]
type = PlaySnd
trigger1 = AnimElem = 2, =110
value = 3100,0

[State 198, Explod]       
type = Explod
trigger1 = AnimElem = 2, =110
anim = 8021
postype = p1
pos = -50,0
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 185, Explod]     
type = Explod
trigger1 = AnimElem = 2, =110
anim = 8008
pos = 0,0
postype = p1
ownpal = 1
shadow = -1
sprpriority = 5
ontop = 1

[State 193, SE]
type = PlaySnd
trigger1 = AnimElem = 3, =110
value = 3100,0

[State 198, Explod]       
type = Explod
trigger1 = AnimElem = 3, =110
anim = 8021
postype = p1
pos = -50,0
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 185, Explod]     
type = Explod
trigger1 = AnimElem = 3, =110
anim = 8008
pos = 0,0
postype = p1
ownpal = 1
shadow = -1
sprpriority = 5
ontop = 1

[State 17000, CS] 
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;Sfottimento Speciale­
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 195, 0]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "palonzo"
trigger2 = p4name = "palonzo"
value = 196

[State 195, vs ]
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "Bao"
trigger2 = p4name = "Bao"
trigger3 = p2name = "Choi Bounge"
trigger4 = p4name = "Choi Bounge"
trigger5 = p2name = "Wolverine"
trigger6 = p4name = "Wolverine"
trigger7 = p2name = "Miyako Arima HM"
trigger8 = p4name = "Miyako Arima HM"
trigger9 = p2name = "Megaman1"
trigger10 = p4name = "Megaman1"
trigger11 = p2name = "Mystiq Vegeta"
trigger12 = p4name = "Mystiq Vegeta"
trigger13 = p2name = "Tung Fu Rue"
trigger14 = p4name = "Tung Fu Rue"
trigger15 = p2name = "Diao Chan"
trigger16 = p4name = "Diao Chan"
trigger17 = p2name = "Gaits"
trigger18 = p4name = "Gaits"
trigger19 = p2name = "Gen"
trigger20 = p4name = "Gen"
trigger21 = p2name = "Okina"
trigger22 = p4name = "Okina"
trigger23 = p2name = "Choi"
trigger24 = p4name = "Choi"
trigger25 = p2name = "Gato By Deuce"
trigger26 = p4name = "Gato By Deuce"
trigger27 = p2name = "Rolf"
trigger28 = p4name = "Rolf"
trigger29 = p2name = "Sasquatch"
trigger30 = p4name = "Sasquatch"
value = 197

[State 195, SE]
type = PlaySnd
trigger1 = animelem = 1
value = 195,2;
volume = 50

[State 195, CS]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;Me te derido meno
[Statedef 196]
type = S
ctrl = 0
anim = 196
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 196, SE]
type = PlaySnd
trigger1 = animelem = 1
value = 195,1;

[State 196, CtrlSet]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 196, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;­sfotti ai tipi bassi
[Statedef 197]
type = S
ctrl = 0
anim = 196
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 197, SE]
type = PlaySnd
trigger1 = animelem = 3
value = 180,4;
volume = -10

[State 197, CS]
type = CtrlSet
trigger1 = Time = 38
value = 1

[State 197, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;================================================================================
;—pugnetto
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
velset = 0,0                     
ctrl = 0                         
juggle  = 3
anim = 200                     
poweradd = 21                  
sprpriority = 2               

[State 200, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA                    
damage = 41, 0                  
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 3, Hit                
pausetime = 8, 8                
sparkno = 4        ;vediamo se mettere uno spark o no              
guard.sparkno = S8050
sparkxy = -10, -76               
hitsound = s200, 2;  
guardsound = 6, 0                
ground.type = High               
ground.slidetime = 5             
ground.hittime  = 12             
ground.velocity = -4             
airguard.velocity = -1.9,-.8     
air.type = High                  
air.velocity = -1.4,-3           
air.hittime = 12            

[State 200, Explod]
type = Explod
trigger1 = movehit      ;emorraggia piccola
anim = 8000
sprpriority = 5
postype = p2
pos = -10,-90
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 200, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 200, CtrlSet]
type = CtrlSet
trigger1 = Time = 8    ;ridurlo, forse si forse no, ma te lo tieni
value = 1

[State 200, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;—pugnone
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 3
poweradd= 65
ctrl = 0
velset = 0,0
anim = 210

[State 210, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
animtype  = Medium
damage = Ceil((52 / (2 ** HitCount))+5)
guardflag = MA
pausetime = 15,19
sparkno = S8018
guard.sparkno = S8060
sparkxy = 0,-70
hitsound = S210,2
guardsound = S11,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.5,-4



[State 210, EnvColor]
type = EnvColor
triggerall = MoveHit
trigger1 = Time = 12
trigger2 = Time = 18
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 210, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 210, Explod]
type = Explod
trigger1 = movehit
trigger2 = HitCount > 2      ;tanto sangue fa bene
anim = 8000
sprpriority = 5
postype = p2
pos = -10,-65
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1


[State 210, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------
;-colpo forte da vicino
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 1
poweradd= 65
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 4

[State 215, HitDef]
type = HitDef
trigger1 = AnimElem = 5      ;eliminato l'animel 5
attr = S, NA
animtype  = Medium
damage = Ceil(62 / (2 ** HitCount))
guardflag = HA
pausetime = 10,19
sparkno = 6
guard.sparkno = S8060
sparkxy = -10,-70
hitsound   = s210,2
guardsound = S11,2
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5
air.velocity = -2.5,-4



[State 215, sangue]
type = Explod
trigger1 = movehit
anim = 8001
persist = 0
sprpriority = 5
postype = p2
pos = -10,-70
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1


[State 215, EnvColor]          ;sara' da colorare
type = EnvColor
trigger1 = MoveHit && Time = 9
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 215, MHR]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 210, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;—calcetto
[Statedef 230]
type    = S
movetype= A
physics = S
poweradd= 22
ctrl = 0
juggle = 5
velset = 0,0
anim = 230

[State 230, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Medium
damage    = 33
guardflag = MA
pausetime = 8,8
sparkno = S8002
sparkxy = 30,-100
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, CtrlSet]    ;non lo elimino
type = CtrlSet
trigger1 = Time = 15
value = 1

[State 230, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;—calcio forte
[Statedef 240]
type    = S
movetype= A
physics = S
poweradd= 65
ctrl = 0
juggle = 6
velset = 0,0
anim = 240
sprpriority = 2

[State 240, Hitdef]
type = HitDef
trigger1 = Time = 0
trigger2 = AnimElem = 4
trigger3 = AnimElem = 6
attr = S, NA
animtype  = Medium
damage    = 40
guardflag = MA
pausetime = 12,12
sparkno = S8002
sparkxy = 30,-100
hitsound   = S11000,0
guardsound = S11,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -6
air.velocity = -2.2,-3.2

[State 240, Explod]
type = Explod
trigger1 = Time = 0
trigger1 = moveguarded
trigger2 = AnimElem = 4
trigger2 = moveguarded
trigger3 = AnimElem = 6
trigger3 = moveguarded
anim = 8060
sprpriority = 5
postype = p2
pos = -10,-90
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 240, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------
;colpo a terra
[Statedef 245]
type = S
movetype = A
physics = S
poweradd = 50
anim = 245
ctrl = 0

[State 245, PosAdd]  ; mi allineo con lui
type = PosAdd
trigger1 = Time = [9, 14]
x = 2

[State 245, HitDef]   ;forse deve fare piu' male
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype = Hard
damage = 85
hitflag = MAF
guardflag = HA
pausetime = 8,15         ;6,14
sparkno = S8002
sparkxy = 0,-65
hitsound = S11000,0
guardsound = S11,2
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = 0,15
air.velocity = 0,15
fall = 1

[State 245, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype = Hard
damage = 85
hitflag = DF
guardflag = HA
pausetime = 10,10       ;6,6
sparkno = 0             ;scegli se mettere S8100
sparkxy = 20,-12
hitsound = S8002
guardsound = S11,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = 0,15
air.velocity = 0,15
fall = 1

[State 245, Explod]     ;esplos. davanti il piede
type = Explod
trigger1 = AnimElem = 6
anim = 3104
pos = 30, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 245, Explod]     ;esplos. dietro il piede
type = Explod
trigger1 = AnimElem = 6
anim = 8100
pos = 30, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 245, EnvShake]
type = EnvShake
trigger1 = MoveHit 
time = 30
persistent = 0
ignorehitpause = 1

[State 245, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------------------------------
;Ti telefono o no?
[Statedef 300]
type = S
movetype = A
physics = S
poweradd = 35
anim = 300
ctrl = 0

[State 300, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, NA
animtype = Back
damage = 111
guardflag = M
pausetime = 12,12
sparkno = 2
guard.sparkno = S8050
sparkxy = 0,-70
hitsound = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.0,-3.0
air.velocity = -5.5,-3.7
fall = 1

[State 300, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300, 0

[State 300, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210, 1


[State 300, Envcolor]
type = EnvColor
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 300, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 300, Projcancel]          ;Ubu cancella la fireball con il suo proj finto
type = Projectile
trigger1 = AnimElem = 6
hitflag = P
attr = S, SP                     
persistent = 1
ignorehitpause = 1
persistent = 1
projanim = 301
projid = 301
projremovetime = 15
offset= 0, 0
postype = P1
bindtime = 1
Vel = .0001
projsprpriority = 2
projpriority = 9999
ownpal = 1
poweradd = 25

[State 300, Projeater]
type = Helper
trigger1 = AnimElem = 6
name = "ProjEater"
id = 301
stateno = 301
pos = 0,0
postype = p1
helpertype = normal
keyctrl = 0
ownpal = 1

[State 300, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;Mi MANGIO LA FIREBALL!
[Statedef 301]
type = S
movetype = A
physics = S
sprpriority = 1
anim = 301
juggle = 10
velset = 0,0
ctrl = 0

[State 301, HitBy]
type = HitBy	
trigger1 = Time >= 0
value = SCA, AP

[State 301, HitOverride]
type = HitOverride
trigger1 = Time = 0
attr = SCA, NP, SP, HP
stateno = 301
time = -1
slot = 0

[State 301, MoveHitReset]
type = MoveHitReset
trigger1 = parent, StateNo = 1000 && MoveContact

[State 301, PowerAdd]
type = PowerAdd
trigger1 = Time = 0
value = 38

[State 301, DestroySelf]
type = DestroySelf
trigger1 = Time = 10
trigger2 = root, MoveType = H

;-------------------------------------------------------------------------------------------------------
;Ti atterro in aria
[Statedef 305]
type = A
movetype = A
physics = A
poweradd = 100
anim = 305
ctrl = 0
juggle  = 0

[State 305, HitDef]
type = HitDef
trigger1 = AnimElem = 6, = 1
attr = A, NA
animtype = Back
damage = 104
guardflag = M
pausetime = 12,12
sparkno = 6
guard.sparkno = S8060
sparkxy = -10,-70
hitsound = s210,2
guardsound = S11,2
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -4.5,-3.5    
air.velocity = -7.5,-2.5
fall = 1

[State 215, explod]
type = Explod
trigger1 = movehit
anim = 8001
persist = 0
sprpriority = 5
postype = p2
pos = -10,-52
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 305, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300, 0

[State 305, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 210, 1


[State 305, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

;---------------------------------------------------------------------------
;‚Avanti e X
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 65
ctrl = 0
velset = 0,0
anim = 310

[State 310, HitDef]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
attr = S, NA
animtype  = Medium
damage = Ceil((40 / (2 ** HitCount))+5)
Hitflag = MAF
guardflag = MA
pausetime = 6,12
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-70
hitsound   = 5,2
guardsound = S11,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 310, HitDef]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 8
attr = S, NA
animtype  = Medium
damage = Ceil((38 / (2 ** HitCount))+5)
Hitflag = MAF
guardflag = MA
pausetime = 8,12
sparkno = S8018
sparkxy = 0,-50
hitsound   = 5,2
guardsound = S11,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5
air.velocity = -2.5,-4

[State 310, HitDef]  ;il colpo che fa male
type = HitDef
trigger1 = AnimElem = 9
attr = S, NA
animtype  = Medium
damage = Ceil(45 / (2 ** HitCount))
Hitflag = MAF
guardflag = MA
pausetime = 3,3
sparkno = S3107
sparkxy = -10,-60
hitsound   = s200, 2           
guardsound = S11,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5.5,-3
air.velocity = -2.5,-4
fall = 1

[State 310, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 10                  
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub                     
time = 2

[State 310, Afterimage]    ; il mantello della notte
type = AfterImageTime
trigger1 = AnimElemTime(11) < 4
time = 2

[State 310, Blink]     ;la scia nera mi piace
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 310, SE]
type = PlaySnd
trigger1 = Time = 8
value = 640, 

[State 310, VelSet]
type = VelSet
trigger1 = time = [13, 15]
x = 7

[State 310, SE2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 310,


[State 310, EnvColor]
type = EnvColor
triggerall = MoveHit
trigger1 = Time = 14
trigger2 = Time = 20
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 310, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 310, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;pugnetto basso
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 15
ctrl = 0
anim = 400
sprpriority = 2

[State 400, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 20
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = MA
pausetime = 8,8
sparkno = 4
guard.sparkno = S8050
sparkxy = -10,-52
hitsound   = s200,2;
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -4
air.velocity = -1.5,-3

[State 400, Explod]
type = Explod
trigger1 = movehit
anim = 8000
sprpriority = 5
postype = p2
pos = -10,-52
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 400, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 400, CS]
type = CtrlSet
trigger1 = Time = 8
value = 1

[State 400, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;colpo forte basso
[Statedef 410]
type    = C
movetype= A
physics = C
poweradd= 50
ctrl = 0
juggle  = 7
anim = 410
sprpriority = 2

[State 410, HitDef]           ;ti faccio
type = HitDef
trigger1 = AnimElem = 5
attr = C, NA
damage = Ceil(65 / (2 ** HitCount))
animtype  = Medium
hitflag = MA
guardflag = M
pausetime = 6,14
sparkno = 6
guard.sparkno = S8050
sparkxy = -10,-55
hitsound   = s200,2
guardsound = S11,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -3,-4

[State 410, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 210, 1

[State 410, HitDef]         ;tanto male!
type = HitDef
trigger1 = AnimElem = 8
attr = C, NA
damage = Ceil(65 / (2 ** HitCount))
animtype = Medium
hitflag = MAF
guardflag = MA
pausetime = 8,8
sparkno = 6
guard.sparkno = S8060
sparkxy = -10,-30
hitsound = s200,2
guardsound = S11,2
ground.type = Trip
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4,-3
air.velocity = -3,-4
P2Stateno = 411        ;subisci e reagisci
fall = 1

[State 410, Explod]
type = Explod
trigger1 = movehit
anim = 8001
sprpriority = 5
postype = p2
pos = -3,-45
random = 10,10
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 410, MoveHR]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 410, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-----------------
;P2 subisce e reagisce
[Statedef 411]
type    = A
movetype= H
physics = N
velset = 0,0

[State 411, CA]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 411, CS]
type = ChangeState
trigger1 = HitShakeOver
value = 412

;-----------------------------
;i corsieri del patrizio
[Statedef 412]
type    = A
movetype= H
physics = N

[State 15071, VelAdd]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 412, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 412, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 412, SelfState]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
value = 5100

;---------------------------------------------------------------------------
;calcetto basso
[Statedef 430]
type    = C
movetype= A
physics = C
poweradd= 22
ctrl = 0
juggle  = 5
anim = 430
sprpriority = 2

[State 430, Hitef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 26
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 8,8
sparkno = S8002
guard.sparkno = S8050
sparkxy = 10,-20
hitsound   = 5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 12
ground.velocity = -5
air.velocity = -2,-3
down.velocity = -5,0

[State 430, CtrlSet]
type = CtrlSet
trigger1 = Time = 8
value = 1

[State 430, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;A Scivolone!
[Statedef 440]
type    = C
movetype= A
physics = C
poweradd= 70
ctrl = 0
juggle  = 8
anim = 440
sprpriority = 2

[State 440, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage = 108
hitflag = MA
guardflag = L
pausetime = 6,14
sparkno = S8002
guard.sparkno = S8060
sparkxy = 30,-15
hitsound   = 5,3
guardsound = S11,1
ground.type = Low
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -8
air.velocity = -1.2,-3

[State 440, SE]     ;pessimo stato di mantenimento
type = PlaySnd
trigger1 = Animelem = 2
value = 640, 0

[State 440, VelSet]
type = Velset
trigger1 = time = [9,11]
x = 7

[State 440, VelSet]
type = Velset
trigger1 = AnimElem = 5
x = 0

[State 440, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;pugnetto in aria
[Statedef 600]
type    = A
movetype= A
physics = A
poweradd= 11
ctrl = 0
juggle  = 3
anim = 600
sprpriority = 2

[State 600, HitDef]     ;puo' essere ripetuto molte ma molte volte
type = HitDef
trigger1 = Timemod = 4,0
attr = A, NA
damage = Ceil((25 / (2 ** HitCount))+5)
guardflag = HA
priority = 3
pausetime = 10,12
sparkno = 4
guard.sparkno = S8050
sparkxy = -10,-50
hitsound = s200,2;
guardsound = 6,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, Explod]
type = Explod
trigger1 = movehit
anim = 8002
sprpriority = 5
postype = p2
pos = -10,-92
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 600, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 600, CtrlSet]
type = CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
;pugno forte in aria
[Statedef 610]
type    = A
movetype= A
physics = A
poweradd= 65
ctrl = 0
juggle  = 0
anim = 610
sprpriority = 2

[State 610, 1]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 65
guardflag = HA
priority = 4
pausetime = 5,12
sparkno = 4
guard.sparkno = S8060
sparkxy = -10,-55
hitsound   = s210,2;(‹­‚Ð‚Á‚©‚«)
guardsound = S11,2
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -3,-4

[State 610, explod]
type = Explod
trigger1 = movehit
anim = 8001
sprpriority = 5
postype = p2
pos = -10,-52
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 610, EnvColor]
type = EnvColor
triggerall = Random < 300
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 610, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

;---------------------------------------------------------------------------
;Calcio Debole (air)
[Statedef 630]
type = A
movetype = A
physics = A
poweradd = 20
ctrl = 0
juggle  = 4
anim = 630
sprpriority = 2

[State 630, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 52
guardflag = HA
priority = 3
pausetime = 12,12
sparkno = S8002
guard.sparkno = S8050
sparkxy = 5,-40
hitsound   = 5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 8
ground.velocity = -4
air.velocity = -2,-3

;---------------------------------------------------------------------------
;-Calcio Fortis (air)
[Statedef 640]
type = A
movetype = A
physics = A
juggle = 4
poweradd = 65
ctrl = 0
anim = 640
sprpriority = 2

[State 640, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 72
guardflag = HA
priority = 4
pausetime = 20,15
sparkno = S8018
guard.sparkno = S8060
sparkxy = -2,-60
hitsound  = 5,3
guardsound = S11,1
animtype = Med
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3,-4

;---------------------------------------------------------------------------
;-Indietro Calcio Fortis (air)
[Statedef 641]
type = A
movetype = A
physics = A
juggle = 4
poweradd = 65
ctrl = 0
anim = 641
sprpriority = 2

[State 641, SE]      ;urlo
type = PlaySnd
trigger1 = AnimElem = 1
value = 210, 0
volume = -10

[State 641, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 100
guardflag = HA
priority = 6
pausetime = 10,10
sparkno = S8018
guard.sparkno = S8060
sparkxy = -12,-83
hitsound = S200, 2
guardsound = S11,2
animtype = Med
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = 8,0
air.velocity = 8,0
fall = 1

[State 641, PA]      ;salto rimalzo!
type = PosAdd
trigger1 = MoveHit = 1
X = 10
Y = -12

;==================PRESE=================================================
;Presa simil Raikkonen
[Statedef 800]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
hitsound   = s800,0
ground.hittime  = 20
sprpriority = 1       
p1stateno = 801       
p2stateno = 802       
fall = 1              

[State 800, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;colpo simil Raikkonen
[Statedef 801]
type = S
movetype = A
physics = S
poweradd = 90
anim = 801
ctrl = 0

[State 801, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = Back
damage = 117
guardflag = M
pausetime = 0,2
sparkxy = -50,-100
sparkno = 2
hitsound = 5,4
guardsound = S11,1
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.0,-1.0             ;-5.0,-3.0
air.velocity =   -5.0,-1.0              ;-5.5,-3.7
fall = 1
palfx.time = 20
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 801, HitAdd]
type = hitadd
trigger1 = time = 0
value = -1

[State 801, TargetBind]
type = TargetBind
trigger1 = Time = 0
time = 35
pos = 55, -100

[State 801, AS]
type = AssertSpecial
trigger1 = AnimElem = 6
flag = unguardable

[State 1000, EnvShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 20
ampl = -9
freq = 110

[State 811, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 3105
sprpriority = 5
postype = p1
pos = 60,-100
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 811, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 8104
sprpriority = 5
postype = p1
pos = 60,-100
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 811, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 3107
sprpriority = 5
postype = p2
pos = -40,-30
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1
[State 801, CG]
type = ChangeState
trigger1 = P2StateNo = 852
value = 850
ctrl = 0

[State 801, SE]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3100,0

[State 801, SE]      ;sancos
type = PlaySnd
trigger1 = Time = 17
value = 800, 1
volume = -10

[State 801, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210, 1


[State 801, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;Stramaledettissimo subimento
[Statedef 802]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 802, CA]
type = ChangeAnim2
Trigger1 = Time = 0
value = 802

[State 802, CG]
type = ChangeState
triggerall = Time = [0,16]
triggerall = AnimExist(200) || AnimExist(210) || AnimExist(10851)
trigger1 = Command = "y" || Command = "z"
trigger1 = Command = "holdfwd" || Command = "holdback" || Command = "holddown" || Command = "holdup"
value = 852

[State 802, SelfState] 
type = SelfState
trigger1 = time = 36
value = 0 
ctrl = 1

;---------------------------------------------------------------------------
;Presa Tanino Dos
[Statedef 810]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 810
sprpriority = 2

[State 810, HitDef] ;la presa di apollo e il carro
type = HitDef
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 1, Miss    
pausetime = 0,0
sparkno = 50
sparkxy = 0,-75
hitsound   = s800,0
ground.hittime  = 20
sprpriority = 1       
p1stateno = 811       
p2stateno = 812
fall = 1              

[State 810, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Il Viaggio di Apollo
[Statedef 811]
type = S
movetype = A
physics = S
poweradd = 100
anim = 811
ctrl = 0

[State 811, Explod]
type = Explod
trigger1 = time = 0
anim = 8002
sprpriority = 5
postype = p2
pos = -10,-90
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 811, SE]
type = PlaySnd
trigger1 = Time = 6
value = 800, 2
volume = -20

[State 811, SE]
type = PlaySnd
trigger1 = Time = 38
value = 725, 0
volume = -20

[State 811, SE]
type = PlaySnd
trigger1 = AnimElem = 3  ;sancos
value = 210, 1

[State 811, CG]    ;va do via domani e non torno piu'
type = ChangeState
trigger1 = P2StateNo = 851
value = 850
ctrl = 0

[State 811, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------
;subimento da presa
[Statedef 812]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 812, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15

[State 812, ChangeAnim]
type = ChangeAnim2
Trigger1 = Time = 0
value = 812

[State 812, ChangeState]
type = ChangeState
triggerall = Time = [0,16]
triggerall = AnimExist(200) || AnimExist(210) || AnimExist(10851)
trigger1 = Command = "b" || Command = "c"
trigger1 = Command = "holdfwd" || Command = "holdback" || Command = "holddown" || Command = "holdup"
value = 851

[State 812, SprPriority]
type = SprPriority
trigger1 = Time = 23
value = 3

[State 812, ChangeAnim]
type = ChangeAnim2
Trigger1 = Time = 23
value = 813

[State 812, posAdd]
type = posAdd
trigger1 = Time = 23
y = -70

[State 812, Velset]
type = Velset
trigger1 = time = 23
x = 10
y = 7

[State 812, PosAdd]
type = PosAdd
trigger1 = time = [23,25]
x = 15

[State 812, VelAdd]
type = VelAdd
trigger1 = Time > 24
y = .5

[State 812, VelMul]
type = VelMul
trigger1 = Time > 24
trigger1 = Pos Y > -15
x = 0.6

[State 812, ChangeState]
type = ChangeState
trigger1 = Time > 23
trigger1 = Pos Y > -15
value = 813

;---------------------------------------------------------------------------
;subimento da presa (aria)
[Statedef 813]
type = A
movetype = H
physics = N
velset = 5,0
anim = 5100

[State 812, NotHitBy]
type = NotHitBy
trigger1 = time > 0
value = SCA
time = 1

[State 813, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 813, PF]
type = PosFreeze
trigger1 = 1

[State 813, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 15

[State 813, LifeAdd]
type = LifeAdd
trigger1 = Time = 1
value = -117

[State 813, Explod]
type = GameMakeAnim
trigger1 = Time = 1
value = 62
pos = 0, 0

[State 813, SE]
type = PlaySnd
trigger1 = Time = 1
value = F7, 2

[State 813, SelfState]
type = SelfState
trigger1 = Time >= 7
value = 5101

;-------------------------------------------------------------------------------
;Spostamento
[Statedef 850]
type = S
movetype = I
physics = S
anim = 850

[State 850, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 850, VelSet]
type = VelSet
trigger1 = Time = 5
x = -7

[State 850, BGPalfx]
type = BGPalfx
trigger1 = time = 6
ignorehitpause = 1
time = 1
add = 255,255,255

[State 850, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------
;e se la presa mi venisse incontro
[Statedef 851]
type = S
movetype = I
physics = S

[State 851, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 851, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && AnimExist(10851)
value = 10851;

[State 851, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 10851
value = 210;

[State 851, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 10851 && Anim != 210
value = 200;

[State 851, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------
;P2 si libera da simil raikkonen
[Statedef 852]
type = S
movetype = I
physics = S

[State 852, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 852, PosSet]
type = PosSet
trigger1 = 1
Y = 0

[State 852, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && AnimExist(10852)
value = 10852;

[State 852, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 10852
value = 210;

[State 852, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 && Anim != 10852 && Anim != 210
value = 200;

[State 852, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==================SUPER SPARO=================================================
;-Pachbell Cannon (debole)
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 110
velset = 0,0
anim = 1000
ctrl = 0

[State 1000, SE]           ;Dance For Me!
type = PlaySnd
trigger1 = Time = 5
value = 1000, 0

[State 1000, SE]
type = PlaySnd
trigger1 = AnimElem = 15
value = 11003,0

[State 1000, Helper]    ;il mio compositore preferito
type = Helper
trigger1 = AnimElem = 15
helpertype = normal
name = "pachbell"
id = 1001
postype = P1
pos = 100,0
stateno = 1001
keyctrl = 0
ownpal = 1
facing = 1

[State 1000, Projectile]
type = Projectile
trigger1 = AnimElem = 15
projanim = 1003
offset = 100, 0
velocity = 2, 0
projremovetime = 25
attr = C, SP
animtype  = Hard
getpower = 0,0
givepower = 0,0
guardflag = MA
pausetime = 0,0
hitsound   = -1,0
guardsound = -1,0
ground.type = High
ground.velocity = 0


[State 1000, EnvShake]
type = EnvShake
trigger1 = AnimElem = 15
time = 5
ampl = -2
freq = 110

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 15
anim = 1002
pos = 100, 0
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 15
anim = 8003
id = 8003
sprpriority = 5
pos = -20,10
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 15
anim = 8004
id = 8004
sprpriority = 5
pos = 35,-48
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 1000, PosAdd]
type = PosAdd
trigger1 = AnimTime = 0
x = -10

[State 1000, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
;Pachbell (la collisione del mio compositore)
[Statedef 1001]
type    = C
movetype= A
physics = N
ctrl = 0
velset = 1, 0
anim = 1001


[State 1001,  PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1001, NotHitBy ]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 1001, HitDef]
type = HitDef
trigger1 = Timemod = 5,0
attr = C, SP
animtype  = Medium
damage = Ceil((55 / (2 ** HitCount))+6), 6
guardflag = MA
pausetime = 0,4
sparkno = S3107
guard.sparkno = S8050
sparkxy = 0,-40
hitsound   = 5,2
guardsound = S11,1
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.2,-3.2
fall = 1

[State 1001, DestroySelf]
type = DestroySelf
trigger1 = time >= 25

;---------------------------------------------------------------------------
;-Pachbell Cannon (forte)
[Statedef 1010]
type    = S
movetype= A
physics = S
poweradd= 120
velset = 0,0
juggle  = 4
anim = 1010
ctrl = 0

[State 1010, SE]
type = PlaySnd
trigger1 = Time = 8
value = 1000, 0

[State 1010, SE]
type = PlaySnd
trigger1 = AnimElem = 15
value = 11003,0

[State 1010, Helper Pachbell]
type = Helper
trigger1 = AnimElem = 15
helpertype = normal
name = "pachbell"
id = 1011
postype = P1
pos = 100,0
stateno = 1011
keyctrl = 0
ownpal = 1
facing = 1

[State 1010, Proj]
type = Projectile
trigger1 = AnimElem = 15
projanim = 1003
ID = 1003
offset = 100, 0
velocity = 2, 0
projremovetime = 30
attr = C, SP
animtype  = Hard
getpower = 0,0
givepower = 0,0
guardflag = MA
pausetime = 0,0
hitsound   = -1,0
guardsound = -1,0
ground.type = High
ground.velocity = 0


[State 1010, EnvShake]
type = EnvShake
trigger1 = AnimElem = 15
time = 10
ampl = -4
freq = 90

[State 1010, Explod]
type = Explod
trigger1 = AnimElem = 15
anim = 1002
pos = 100, 0
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1010, Explod]
type = Explod
trigger1 = AnimElem = 16
anim = 1002
pos = 120, 0
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1010, Explod]
type = Explod
trigger1 = AnimElem = 17
anim = 1002
pos = 140, 0
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1010, Explod]
type = Explod
trigger1 = AnimElem = 18
anim = 1002
pos = 160, 0
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1010, Explod]
type = Explod
trigger1 = AnimElem = 15
anim = 8003
id = 8003
sprpriority = 5
pos = -20,10
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 1010, Explod]
type = Explod
trigger1 = AnimElem = 15
anim = 8004
id = 8004
sprpriority = 5
pos = 34,-48
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 1010, PosAdd]
type = PosAdd
trigger1 = AnimTime = 0
x = -10

[State 1010, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------
;Il col del mio compositore preferito forte
[Statedef 1011]
type    = C
movetype= A
physics = N
ctrl = 0
velset = 2, 0
anim = 1001

[State 1011, SE]
type = PlayerPush
trigger1 = 1
value = 0

[State 1011, NHB]
type = NotHitBy 
trigger1 = 1
value = SCA
time = 1

[State 1011, HitDef]  ; non vale la pena di cambiare il col
type = HitDef
trigger1 = Timemod = 5,0
attr = C, SP
animtype  = Medium
damage = Ceil((45 / (2 ** HitCount))+6), 6
guardflag = MA
pausetime = 0,4
sparkno = 0
sparkxy = -10,-40
hitsound   = 5,2
guardsound = S11,2
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.2,-3.2

[State 1011, AssertSpecial]
type = AssertSpecial
trigger1 = Timemod = 5,0
flag = unguardable

[State 1011, DS]
type = DestroySelf
trigger1 = time >= 30

;---------------------------------------------------------------------------
;-CALCIO OBERON (con relativo subimento del p2)
[Statedef 1020]
type    = S
movetype= A
physics = N
poweradd= 100
velset = 0,0
juggle  = 4
anim = 1020
ctrl = 0
sprpriority = 2

[State 1020, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 1020, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 4
time = 2

[State 1020, Friction]     ;me ne parto
type = VelMul
trigger1 = 1
x = .85 * ifelse (AnimElemTime(6) < 0, 1, .8)

[State 1020, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0;

[State 1020, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1020, 0
volume = -145

[State 1020, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1020, SE]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 1020, PA]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1020, PA]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
x = 10

[State 1020, PA]
type = PosAdd
trigger1 = AnimElem = 4
x = 5

[State 1020, VS]
type = VelSet
trigger1 = AnimElem = 4
x = 13

[State 1020, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 92, 5
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 20,22
sparkno = S8018
guard.sparkno = S8060
sparkxy = -10,-60
hitsound   = 5,4
guardsound = S11,2
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025

[State 1020, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8009
id = 8009
sprpriority = 1
pos = 0,12
bindtime = 1
supermovetime = -1

[State 1020, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------
;-CALCIO OBERON DA VICINO

[Statedef 1021]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 100
velset = 0,0
anim = 1021
ctrl = 0
sprpriority = 2

[State 1021, Friction]
type = VelMul
trigger1 = 1
x = .85 * ifelse (AnimElemTime(6) < 0, 1, .8)

[State 1021, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0;

[State 1021, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 11016, 0
volume = -15

[State 1021, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13               ;13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 3
FrameGap = 1
Trans = sub
time = 2                  ;2

[State 1021, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 4
time = 2

[State 1021, Blink]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1021, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 1021, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 20

[State 1021, 3]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
x = 30

[State 1021, 4]
type = PosAdd
trigger1 = AnimElem = 4
x = 5

[State 1021, 5]
type = VelSet
trigger1 = AnimElem = 4
x = 13

[State 1021, 6]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 92, 5
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 20,22
sparkno = S8018
guard.sparkno = S8060
sparkxy = -10,-75
hitsound   = 5,4
guardsound = S11,2
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = 8,-7
guard.velocity = -7
air.velocity = 8,-7
airguard.velocity = -5, -4
fall = 1


[State 1021, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8009
id = 8009
sprpriority = 1
pos = 0,12
bindtime = 1
supermovetime = -1

[State 1021, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;-CALCIO OBERON Debole

[Statedef 1022]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 85
velset = 0,0
anim = 1022
ctrl = 0
sprpriority = 2

[State 1022, Friction]
type = VelMul
trigger1 = 1
x = .42 * ifelse (AnimElemTime(6) < 0, 1, .4)

[State 1022, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0;

[State 1022, ]
type = PlaySnd
trigger1 = AnimElem = 3
value = 725, 0
volume = -45

[State 1022, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 1022, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 4
time = 2

[State 1022, Blink]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1022, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 1022, 2]
type = PosAdd
trigger1 = AnimElem = 2
x = 9                    

[State 1022, 3]
type = PosAdd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 11
x = 4                  

[State 1022, 4]
type = PosAdd
trigger1 = AnimElem = 4
x = 2                    

[State 1022, 5]
type = VelSet
trigger1 = AnimElem = 4
x = 6                 

[State 1022, 6]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype  = Hard
damage    = 80, 5
getpower  = 0
priority  = 5
guardflag = MA
pausetime = 20,22
sparkno = S8018
guard.sparkno = S8060
sparkxy = -10,-60
hitsound   = 5,4
guardsound = S11,2
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -8,-7
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 1
p2stateno = 1025

[State 1022, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8009
id = 8009
sprpriority = 1
pos = 0,12
bindtime = 1
supermovetime = -1

[State 1022, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------
;subimento del calcio oberon
[Statedef 1025]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1025, ChangeAnim]
type = ChangeAnim
trigger1 = AnimExist(11025)
value = 11025;

[State 1025, CAnim]
type = ChangeAnim2
trigger1 = Anim != 11025
value = 1025

[State 1025, ChangeState]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1026

;------------------
;e volo cosi'
[Statedef 1026]
type    = A
movetype= H
physics = N

[State 1026, HitVelSet]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1026, VelAdd]
type = VelAdd
trigger1 = 1
y = .45

[State 1026, ScreenBound]        ; non muovimao la MDP
type = ScreenBound
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist < 65
trigger2 = FrontEdgeBodyDist < 65
value = 1
movecamera = 0,1

[State 1026, ChangeState]        ;sbattimi
type = ChangeState
triggerall = Pos y < -15
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1027

[State 1026, Torno Normale]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; subimento del calcio oberon (preso il calcione)
[Statedef 1027]
type    = A
movetype= H
physics = N

[State 1027, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1027, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1027, PosFreeze]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1027, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1027, Spark]
type = GameMakeAnim
trigger1 = Time = 0
value = 3
postype = p2
pos = -30, -60
sprpriority = 3
bindtime = 1
ownpal = 1

[State 1027, Spark]
type = Explod
trigger1 = Time = 0
anim = 8012                           ;mettere forse l'anim 8012 
pos = 0, floor (screenpos y) - 50
postype = back
sprpriority = 3

[State 1027, CAnim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1027

[State 1027, SE]
type = PlaySnd
trigger1 = Time = 0
value = F7,0

[State 1027, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 1028

;------------------
; e torno cosi'
[Statedef 1028]
type    = A
movetype= H
physics = N

[State 1028, NHB]
type = NotHitBy
trigger1 = 1
value = , NA, NP

[State 1028, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1028, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1028, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1028, VelAdd]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] 
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] 
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] 
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] 
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;--------------------------------------------------------------------------------------
;-Burning Meriggio (debole)
[Statedef 1100]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
juggle = 0
anim = 1103
ctrl = 0

[State 19981, SS]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 1100, SE]
type = PlaySnd
trigger1 = Time = 5
value = 1100, 

[State 1100, SE]
type = PlaySnd
trigger1 = Time = 9
value = 1100, 1

[State 1110, SE]     ; il vocione
type = PlaySnd
trigger1 = AnimElem = 6
trigger1 = MoveHit = 0
value = 1100, 2

[State 1100, Explod]
type = Explod
trigger1 = time = 12     ;time = 9
anim = 1101
pos = 36, -27
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1100, Proj]
type = Projectile
trigger1 = Time = 11
projanim = 1102
offset = 35, -32          ;0,-35
velocity = 0.05, 0
projremovetime = 10
attr = A, SP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 78,6
guardflag = MA
hitflag = MAF
pausetime = 0,8        ;0,12
sparkno = S8018        ;S3106 
guard.sparkno = S8050
sparkxy = 40,-40          
hitsound   = s1100,2
guardsound =  S11,1        
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -12.5,0.5      ;-6,-4      
airguard.velocity = -3.5      
air.velocity = -12.5,0.5     ;-2.5,-3.5
air.juggle = 3
fall = 1
fall.recover = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90
;fall.envshake.time = 12
;fall.envshake.ampl = -4
;fall.envshake.freq = 90
mindist = 50,0

[State 1100, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;-Burning Meriggio (forte)
[Statedef 1110]
type    = S
movetype= A
physics = S
poweradd= 110
velset = 0,0
juggle  = 4
anim = 1104
ctrl = 0

[State 19981, SS]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 1110, SE]
type = PlaySnd
trigger1 = Time = 10
value = 1100

[State 1110, SE]
type = PlaySnd
trigger1 = Time = 19
value = 1100, 1

[State 1110, SE]
type = PlaySnd
trigger1 = AnimElem = 7
trigger1 = MoveHit = 0 
value = 1100, 2

[State 1100, Explod]
type = Explod
trigger1 = time = 19
anim = 1101
pos = 10, -55
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1110, Proj]
type = Projectile
trigger1 = Time = 21
projanim = 1102
offset = 10, -55
velocity = 0.05, 0
projremovetime = 10
attr = A, SP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 54,6
guardflag = MA
hitflag = MAF
pausetime = 11,15
sparkno = S3107
guard.sparkno = S8050
sparkxy = 30,-20
hitsound   = s1100,2
guardsound = S11,1        
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2,-8.5
airguard.velocity = -3.5      
air.velocity = -2.5,-5.5
air.juggle = 5
;air.hittime  = 20
fall = 1
fall.recover = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 1110, Proj]
type = Projectile
trigger1 = Time = 23
projanim = 1102
offset = 10, -55
velocity = 0.05, 0
projremovetime = 8
attr = A, SP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 54,6
guardflag = MA
hitflag = MAF
pausetime = 0,12
sparkno = 2
sparkxy = -10,-55
hitsound   = s1100,2
guardsound = S11,1
ground.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -0.2,-8
airguard.velocity = -3.5      
air.velocity = -0.2,-10.5
;air.hittime  = 20
air.juggle = 4
fall = 1
fall.recover = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 16
envshake.ampl = -3
envshake.freq = 90

[State 1100, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------
;collegamento con mossa altra
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1200
ctrl = 0

[State 1200, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 1201

;----------------------------------------------------------
;-Burning Horizon (debole)
[Statedef 1201]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 110
velset = 4,-3
anim = 1201
ctrl = 0

[State 1201, Afterimage]      ;le solite scie
type = AfterImage
trigger1 = Time = 0
length = 25               
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 1201, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1201, Me Coloro]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1201, VelAdd]
type = VelAdd 
trigger1 = Time >= 1
y = 0.5

[State 1201, SE]    ;antono di
type = PlaySnd
trigger1 = AnimElem = 5
value = 800, 1;
volume = -20

[State 1201, SE]
type = PlaySnd
trigger1 = Time = 13
value = 1100, 1;

[State 1210, SE]
type = PlaySnd
trigger1 = Time = 13
trigger1 = MoveHit = 0 
value = 1100, 2

[State 1201, Proj]
type = Projectile
trigger1 = Time = 13
projanim = 1102
offset = 25, -60
velocity = 0.05, 0
projremovetime = 10
attr = A, SP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 104,6
guardflag = MA
hitflag = MAF
pausetime = 0,12
sparkno = 2
guard.sparkno = S8050
sparkxy = 35,-20
hitsound   = s1100,2
guardsound = S11,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -6,-4
airguard.velocity = -3.5      
air.velocity = -2.5,-3.5
air.juggle = 3
fall = 1
fall.recover = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 1201, Explod]
type = Explod
trigger1 = Time = 13
anim = 1101
pos = 25, -60
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1201, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 120, 20
guardflag = MA
hitflag = MAF
priority = 6
pausetime = 0,0
sparkno = S8018
guard.sparkno = S8060
sparkxy = -12,-83
hitsound = S200, 2
guardsound = S11,1
animtype = Med
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = 8,0
air.velocity = 8,0
fall = 1
p2facing = 1
p1stateno = 1220
p2stateno = 1225
envshake.time = 10
envshake.ampl = -5
envshake.freq = 90

[State 1201, CG]
type = ChangeState
trigger1 = pos Y >= 20
value = 1202

;------------------
;il solito collegamento
[Statedef 1202]
type = C
movetype = A
physics = S
anim = 1202
velset = 0, 0

[State 1202, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1202, SE]
type = PlaySnd
trigger1 = Time = 0
value = 40,0;

[State 1202, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;l'altro solito collega
[Statedef 1210]
type    = S
movetype= A
physics = S
juggle  = 4
velset = 0,0
anim = 1210
ctrl = 0

[State 1210, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 190, 1

[State 1210, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211

;--------------------------------------------------
;Burning Horizon (forte)
[Statedef 1211]
type    = A
movetype= A
physics = N
poweradd= 110
velset = 6,-4.8
juggle = 5
anim = 1211
ctrl = 0

[State 1211, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 15
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 1211, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(8) < 0
time = 2

[State 1211, Blink Black]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 1211, VelAdd]
type = VelAdd 
trigger1 = Time >= 1
y = 0.5

;[State 1211, SE]
;type = PlaySnd
;trigger1 = AnimElem = 7
;value = 800, 1;
;volume = -20

[State 1211, SE]
type = PlaySnd
trigger1 = Time = 22
value = 1100, 1

[State 1210, SE]
type = PlaySnd
trigger1 = Time = 22
trigger1 = MoveHit = 0 
value = 1100, 2

[State 1211, Proj]
type = Projectile
trigger1 = Time = 22
projanim = 1102
offset = 25, -60
velocity = 0.05, 0
projremovetime = 10
attr = A, SP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 91,6
guardflag = HA
hitflag = MAF
pausetime = 0,12
sparkno = 2
guard.sparkno = S8050
sparkxy = 35,-25
hitsound   = s1100,2
guardsound = S11,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -6
airguard.velocity = -3.5      
air.velocity = -1.5,-4.5
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 1211, Explod]
type = Explod
trigger1 = Time = 22
anim = 1101
pos = 25, -60
postype = p1
sprpriority = 3
ownpal = 1
ontop = 1

[State 1211, CG]
type = ChangeState
trigger1 = pos Y >= 20
value = 1212

;----------------------------------------
;Me Atterro
[Statedef 1212]
type = C
movetype = A
physics = S
anim = 1212
velset = 0, 0


[State 1212, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1212, SE]
type = PlaySnd
trigger1 = Time = 0
value = 40,0

[State 1212, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Horizon Debole continuazione presa
[Statedef 1220]
type = S
movetype = A
physics = S
anim = 1220
velset = 0, 0

[State 170, NotHitBy]
type = NotHitBy
trigger1 = time > 0
value = SCA
time = 1

[State 1220, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 15
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 35

[State 106, Posset]
type = PosAdd
trigger1 = Time = 0
x = 50

[State 106, Posset]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1220, TargetBind]
type = TargetBind
trigger1 = Time = 0
time = 4
pos = 40, 0

[State 1220, TargetBind]
type = TargetBind
trigger1 = AnimElem = 2
time = 15
pos = 30, 0

[State 811, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 3105
sprpriority = 5
postype = p1
pos = 40,-5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 811, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 8104
sprpriority = 5
postype = p1
pos = 40,-5
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 801, SE]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3100,0

[State 1112, Env]
type = EnvShake
trigger1 = AnimElem = 5
ampl = 9    
freq = 115
time = 25

[State 1212, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 105
ctrl = 0

;----------------------------------------
;Horizon Debole continuazione presa p2
[Statedef 1225]
type = L
movetype = H
physics = N
anim = 1225
velset = 0, 0

[State 170, NotHitBy]
type = NotHitBy
trigger1 = time > 0
value = SCA
time = 1

[State 106, Posset]
type = PosAdd
trigger1 = Time = 0
x = 50

[State 1225, CA]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1225

[State 106, Posset]
type = PosSet
trigger1 = Time = 3
y = 0

[State 310, Blink]     
type = PalFX
trigger1 = Time = 10
time = 40
add = 40,-70,-200
sinadd = 40,30,0,10
color = 0
invertall = 1

[State 1225, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 5110
ctrl = 1

;------------------------------------------------
;CALCIO SCEVRO
[Statedef 1300]
type = A
movetype = A
physics = N
poweradd = 0
juggle = 12
ctrl = 0
anim = 1300
velset = 0,0

[State 1300, Blink]
type = PalFX
trigger1 = Time = 0
time = 35
sinadd = 50,50,50,3

[State 1300, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 35


[State 1300, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 11016, 0
volume = -15

[State 1300, velset]
type = velset
trigger1 = animelem = 3
x = 6.5
y = 5.5

[State 1300, veladd]
type = veladd
trigger1 = animelem = 3, > 0
trigger1 = animelem != 4
y = .45

[State 1300, Freeze]                 
type = PosFreeze
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
trigger7 = AnimElem = 10


[State 1300, CG]                 ;va a una anim speciale se p2 si para
type = ChangeState
trigger1 = moveguarded
value = 1301

[State 1300, CG]                 ; se non colpisce nessuno
type = ChangeState
trigger1 = Pos Y >= 0 && vel y > 0
value = 1302


[State 1300, Primo Calcio In Aria]
type = HitDef
trigger1 = AnimElem = 4
attr = A, SA
hitflag = HLA
animtype = HARD
damage = 93,19
guardflag = HLA
pausetime = 15,40
sparkno = S8018
guard.sparkno = S8050
sparkxy = 15,-38
hitsound = S200, 2
guardsound = S11,2
ground.type = low
ground.velocity = -6,6
air.velocity = -6,6
airguard.velocity = -2.5,-1
id = 1300
hitonce = 1
fall = 0
fall.recover = 0
forcestand = 1
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 0,0
givepower = 21,21
air.juggle = 1
guard.pausetime = 5,11
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
fall.yVelocity = -6.4
yaccel = .5
envshake.ampl = 6            ;Parameters for shaking the screen on hit
envshake.freq = 178
envshake.time = 15

[State 1300, Secondo Calcio In Aria]
type = HitDef
trigger1 = AnimElem = 9
attr = A, SA
hitflag = HLA
animtype = HARD
damage = 75,19
guardflag = HLA
pausetime = 25,25
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-35
ground.type = low
hitsound = S200,2 
guardsound = S11,1
ground.velocity = -6,6
air.velocity = -6,6
airguard.velocity = -2.5,-1
chainid = 1300
hitonce = 1
fall = 1
fall.recover = 0
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 0,0
givepower = 21,21
air.juggle = 1
guard.pausetime = 1,11
guard.slidetime = 22
guard.hittime = 44
guard.ctrltime = 44
fall.yVelocity = -6.4
yaccel = .5
envshake.ampl = 6            ;Parameters for shaking the screen on hit
envshake.freq = 178
envshake.time = 15
ignorehitpause = 1
p1stateno = 1303

[State 1300]
type = ChangeState
trigger1 = animtime = 0
Value = 1301

;------------------------------------------------------------------------
;salto indietro
[Statedef 1301]
type = A
movetype = I
physics = A
poweradd = 0
ctrl = 0
anim = 1301
velset = 0,0

[State vel]
type	= veladd
trigger1 = time = 0
x = -4
y = -7

;-------------------------------------------------------------------------
;Ubu atterra
[StateDef 1302]
Type = S
MoveType = I
physics = S
anim = 1302
Ctrl = 0
PowerAdd = 0
velset = 0,0
FaceP2 = 0
HitDefPersist = 0
MoveHitPersist = 0
HitCountPersist = 0
SprPriority = 2

[State 1302, AfterImage]
type = AfterImagetime
trigger1 = time = 0
time = 0

[State 1302, Vel]
type = posset
trigger1 = time = 0
Y = 0

[State 1302, CG]
type = ChangeState
trigger1 = Animtime = 0
Value = 0
ctrl = 1

;------------------------------------------------------------
;balzo indietro dopo che colpisco
[Statedef 1303]
type = A
movetype = I
physics = A
poweradd = 0
ctrl = 0
anim = 1303
velset = 0,0

[State 1303, vel]
type = veladd
trigger1 = time = 0
x = -7
y = -10

;===================================================================
;Enought
[Statedef 3000]
type    = S
movetype= A
physics = S
velset = 0,0
juggle  = 0
anim = 3000
ctrl = 0
sprpriority = 0
poweradd = -1000

[State 19981, SS]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 3000, VarSet]
type = VarSet
trigger1 = var(10) = 1
var(10) = 0

[State 3000, SE]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1

[State 3000, NHB]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 50

[State 3000, Explod]
type = Explod
trigger1 = AnimElem = 1
;trigger1 = Time = 3
anim = 4000
pos = 0, -90
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3000, Explod]
type = Explod
trigger1 = AnimElem = 1
;trigger1 = Time = 3
anim = 4001
pos = 0, -90
postype = p1
supermove = 1
under = 1

[State 3000, SP]
type = SuperPause
trigger1 = AnimElem = 1
;trigger1 = Time = 5
time = 24
;movetime = 24 
anim = -1

[State 3000, SE]            ;voce :ENOUGHT!
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000, 0;

[State 3000, EncShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 20
ampl = 8
persistent = 0
ignorehitpause = 1

[State 3000, Explod]             ;qui bisogna piazzarci sopra il polverone
type = Explod
trigger1 = AnimElem = 5
anim = 8008
ID = 8008
pos = 38, 0
postype = p1
sprpriority = 2
bindtime = 47
ownpal = 1
ontop = 1

[State 3000, SE]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3000, 2;SE

[State 3000, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, HA
animtype  = diagup
damage    = 240, 35
getpower  = 0
priority  = 7
guardflag = MA
pausetime = 25,25
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = S10130,0
guardsound = S11,2
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -6,-6
air.velocity = -6,-6
p2Stateno = 3001
fall = 1

[State 3000, EnvCol]
type = EnvColor
trigger1 = Time = [0, 5]
trigger2 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 3000, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 3000, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
;-Subimento del p2
[Statedef 3001]
type = A
movetype = H
physics = N
anim = 5030
velset = 0, 0
ctrl = 0

[State 3001, Pause]
type = Pause
trigger1 = Time < 13 
trigger1 = RoundState = 2
time = 1
darken = 1

[State 3001,ChangeAnim]
type = ChangeAnim
trigger1 = HitShakeOver
persistent = 0
value = IfElse(SelfAnimExist(5052),5052,5050)

[State 3001, VelsSet]
type = VelSet
trigger1 = HitShakeOver
persistent = 0
x = -6.0
y = -7.0

[State 3001, Gravity]
type = Gravity
trigger1 = HitShakeOver

[State 3001,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > 0 
trigger1 = Anim = 5050 || Anim = 5052
trigger1 = SelfAnimExist(5062)
value = 5062

[State 3001, SS]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;--------------------------------------------------------------
;-ENOUGHT A DUE (MAX)
[Statedef 3015]
type    = S
movetype= A
physics = S
velset = 0,0
juggle  = 0
anim = 3015
ctrl = 0
sprpriority = 0
poweradd = -2000

[State 19981, SS]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 3015, VarSet]
type = VarSet
trigger1 = var(10) = 1
var(10) = 0

[State 3015, SE]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 1

[State 3015, NHB]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 50

[State 3015, Explod]
type = Explod
trigger1 = AnimElem = 1
;trigger1 = Time = 3
anim = 4003
pos = 0, -90
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3015, Explod]
type = Explod
trigger1 = AnimElem = 1
;trigger1 = Time = 3
anim = 4002
pos = 0, -90
postype = p1
supermove = 1
under = 1

[State 3015, 1]
type = SuperPause
trigger1 = AnimElem 1, =1
time = 24
unhittable = 1
anim = -1
darken = 0

[State 3015, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1
time = 24                   
value = 0,0,0
under = 1

[State 3160, BGPALFX]
type = BGPalFX
trigger1 = AnimElem = 1, =2
time = 70                      ;57
invertall = 1
value = 0
ignorehitpause = 1

[State 3015, SE]            ;voce :ENOUGHT!
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000, 0;

[State 3015, EncShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 20
ampl = 8
persistent = 0
ignorehitpause = 1

[State 3015, Explod]             ;qui bisogna piazzarci sopra il polverone
type = Explod
trigger1 = AnimElem = 5
anim = 8008
ID = 8008
pos = 38, 0
postype = p1
sprpriority = 2
bindtime = 47
ownpal = 1
ontop = 1

[State 3015, SE]
type = PlaySnd
trigger1 = AnimElem = 6
value = 3000, 2;SE

[State 3015, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, HA
animtype  = diagup
damage    = 240, 35
getpower  = 0
priority  = 7
guardflag = MA
pausetime = 0,100
sparkno = S8018
guard.sparkno = S8050
sparkxy = -10,-65
hitsound = S10130,0
guardsound = S11,2
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -6,-6
air.velocity = -6,-6
p2Stateno = 3001
fall = 1

[State 3015, EnvCol]
type = EnvColor
;trigger1 = Time = [0, 5]
trigger1 = MoveHit
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 3015, MoveHitReset]
type = MoveHitReset
trigger1 = MoveHit
ignorehitpause = 1

[State 3015, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 3016
ctrl = 1

;--------------------------------------------------------------
;-ENOUGHT A DUE (MAX) colpo finale successivo
[Statedef 3016]
type    = S
movetype= A
physics = S
velset = 0,0
juggle  = 1
anim = 3016
ctrl = 0
sprpriority = 0

[State 3015, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 10111, 0

[State 3015, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 10005, 1

[State 3016, NHB]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 50

[State 3160, BGPALFX]
type = BGPalFX
trigger1 = time = 1
time = 28
;time = 55
invertall = 1
value = 0
ignorehitpause = 1

[State 3015, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 7
time = 23                    
value = 0,0,0
under = 1

;[State 3015, 1]
;type = EnvColor
;trigger1 = AnimElem = 8
;time = 2                    
;value = 245,245,245
;under = 1

[State 3016, HitDEf]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
damage = 285,65
animtype = DiagUp
air.animtype = DiagUp
fall.animtype = DiagUp
guardflag = M
hitflag = MAF
pausetime = 30,0        ;30,50            
sparkno = S4002            ;S8018
guard.sparkno = S1042
sparkxy = -60, -70
hitsound = S10005,0
guardsound = S200,4
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 18
air.hittime  = 18
ground.velocity = -22,-6
air.velocity = -20,-6
givepower = 45,10
fall = 1
fall.recover = 0
air.fall = 1
yaccel = .5
mindist = 115,-70
maxdist = 125,-10
envshake.time = 16
envshake.ampl = -8
envshake.freq = 90

[State 3015, Explod]            ;cerchio bianco
type = Explod
trigger1 = AnimElem = 7
anim = 8007
ID = 8007
pos = 98, -60
postype = p1
sprpriority = 5
bindtime = 47
ownpal = 1
ontop = 1

[State 3015, Explod]            ;espls in mano
type = Explod
trigger1 = AnimElem = 7
anim = 8019
ID = 8019
pos = 102, -62
postype = p1
sprpriority = 5
bindtime = 47
ownpal = 1

[State 3015, Explod]            ;esplos dinamica
type = Explod
trigger1 = AnimElem = 6
anim = 8101
ID = 8101
pos = 98, -60
postype = p1
sprpriority = 4
bindtime = 47
ownpal = 1

[State 3015, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=============================================================
;-THIS IS THE HAND
[Statedef 3100]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3100
ctrl = 0
poweradd = -1000

[State 3100, VarSet]
type = VarSet
trigger1 = var(10) = 1
var(10) = 0

[State 3100, Explod]
type = Explod
trigger1 = Time = 19
anim = 4000
pos = 90, -100
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3100, Explod]
type = Explod
trigger1 = Time = 19
anim = 4001
pos = 90, -100
postype = p1
supermove = 1
under = 1

[State 3100, SP]
type = SuperPause
trigger1 = time = 19
time = 24
Movetime = 24
anim = -1

[State 3100, SE]
type = PlaySnd
trigger1 = time = 20
value = 700, 1;

[State 3100, NHB]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 60

[State 3100, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3100, 1;

[State 3100, SE]
type = EnvShake
trigger1 = AnimElem = 31
ampl = 8
time = 30

[State 3100, VelSet]
type = Velset
trigger1 = Time = 116
x = -5

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
trigger5 = AnimElem = 31
anim = 3101
pos = 87, -100
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 20
trigger4 = AnimElem = 26
trigger5 = AnimElem = 32
anim = 3103
pos = 30, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 20
trigger4 = AnimElem = 26
trigger5 = AnimElem = 32
anim = 3104
pos = 30, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3100, SE]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
trigger5 = AnimElem = 31
value = 1100, 2;SE

[State 3100, proj]            ;questi sono i colpi che infuocano il p2         
type = Projectile
trigger1 = Animelem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
projID = 3110
projanim = 3110     
offset = 80, -60
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 45,9
guardflag = MA
hitflag = MAF
pausetime = 0,12
sparkno = 3
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s1100,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8     
air.velocity = -2.5,-1.5
air.fall = 1
Kill = 0
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3150, Explod]
type = Explod
trigger1 = ProjContact3110 = 1
anim = 3107
pos = 5, -65
postype = p2
random = 40,-65
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1
scale = .7, .7

[State 3150, Explod]
type = Explod
trigger1 = ProjContact3110 = 1
anim = 3106
pos = 5, -40
postype = p2
random = 35,-55
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1

[State 3100, Proj]                  ;questo e' il colpo finale che lo fa volare via
type = Projectile
trigger1 = Animelem = 31
projanim = 3110
projhitanim = 3102
offset = 80, -60
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 0,0
givepower = 20,10
damage    = 85,18
guardflag = MA
hitflag = MAF
pausetime = 0,12
sparkno = 3
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -2.5,-5.5
p2stateno = 3101
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3100, EnvColor]
type = EnvColor
trigger1 = AnimElem = 8, = 2
trigger2 = AnimElem = 14, = 2
trigger3 = AnimElem = 20, = 2
trigger4 = AnimElem = 26, = 2
trigger5 = AnimElem = 32, = 2
trigger6 = Time = [16,19]
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 3100, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------
;Subimento p2
[Statedef 3101]
type = A
movetype = H
physics = N
anim = 5030
velset = 0, 0
ctrl = 0

[State 3101,Pause]
type = Pause
trigger1 = Time = [12,22] 
trigger1 = RoundState = 2
time = 1
darken = 1

[State 3101,ChangeAnim]
type = ChangeAnim
trigger1 = HitShakeOver
persistent = 0
value = IfElse(SelfAnimExist(5052),5052,5050)

[State 3101,VelSet]
type = VelSet
trigger1 = HitShakeOver
persistent = 0
x = -6.0
y = -7.0

[State 3101,Gravity]
type = Gravity
trigger1 = HitShakeOver

[State 3101,ChangeAnim]
type = ChangeAnim
trigger1 = Vel Y > 0 
trigger1 = Anim = 5050 || Anim = 5052
trigger1 = SelfAnimExist(5062)
value = 5062

[State 3101,SelfState]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;-----------------------------------------------
;THIS IS THE HAND (vicino)
[Statedef 3150]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3150
ctrl = 0
poweradd = -1000

[State 3150, VarSet]
type = VarSet
trigger1 = var(10) = 1
var(10) = 0

[State 3150, NotHitBy]
type = NotHitBy
trigger1 = AnimElem = 1
value = , NA, SA, AT
time = 30

[State 3150, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3100, 1

[State 3150, Explod]
type = Explod
trigger1 = time = 8
anim = 4000
pos = 90, -72
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3150, Explod]
type = Explod
trigger1 = time = 8
anim = 4001
pos = 90, -72
postype = p1
supermove = 1
under = 1

[State 3150, SP]
type = SuperPause
trigger1 = time = 8
time = 26
anim = -1

[State 3150, SE]
type = PlaySnd
trigger1 = time = 8
value = 700, 1;

[State 3150, EnvShake]
type = EnvShake
trigger1 = AnimElem = 7
time = 10

[State 3150, EnvShake]
type = EnvShake
trigger1 = AnimElem = 31
ampl = 8
time = 30

[State 3150, Velset]
type = Velset
trigger1 = Time = 87
x = -5

[State 3150, Explod]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
trigger5 = AnimElem = 31
anim = 3101
pos = 70, -72
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3150, Explod]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
trigger5 = AnimElem = 31
anim = 8100              
pos = 30, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3150, Explod]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
trigger5 = AnimElem = 31
anim = 3104
pos = 30, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3150, SE]
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 21
value = 3150, 0;SE

[State 3150, SE]
type = PlaySnd
trigger1 = AnimElem = 31
value = 1100, 2

[State 3150, Proj]
type = Projectile
trigger1 = Animelem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
trigger5 = Animelem = 15
trigger6 = AnimElem = 17
trigger7 = AnimElem = 19
trigger8 = AnimElem = 21
trigger9 = Animelem = 23
trigger10 = AnimElem = 25
trigger11 = Animelem = 27
trigger12 = AnimElem = 29
projID = 3110
projanim = 3110
offset = 40, -60
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 19,7
guardflag = MA
hitflag = MAF
pausetime = 0,0
sparkno = 0
guard.sparkno = 0
sparkxy = 40, 0
random = 0,-25
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2.5      
air.velocity = -2.5,-.5
air.fall = 1
Kill = 0


[State 3150, Proj]
type = Projectile
trigger1 = Animelem = 31
projID = 3110
projanim = 3110
projhitanim = 3102
offset = 40, -60
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 0,0
givepower = 20,10
damage    = 48,7
guardflag = MA
hitflag = MAF
pausetime = 0,12
sparkno = 2
guard.sparkno = S3107
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-3.5 
air.velocity = -2.5,-5.5
P2stateno = 3101
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3150, Explod]
type = Explod
trigger1 = ProjContact3110 = 1
anim = 3107
pos = 5, -65
postype = p2
random = 40,-65
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1
scale = .7, .7

[State 3150, Explod]
type = Explod
trigger1 = ProjContact3110 = 1
anim = 3106
pos = 5, -40
postype = p2
random = 35,-55
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1

[State 3150, envcolor]
type = EnvColor
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 19
trigger4 = AnimElem = 25
trigger5 = AnimElem = 31
trigger6 = Time = [5,8]
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 3150, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------
;THE END IN MY HANDS
;Hands - Super Sparo a Due (state 3160)
[Statedef 3160]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3160
ctrl = 0
poweradd = -2000

[State 3160, VarSet]
type = VarSet
trigger1 = var(10) = 1
var(10) = 0

[State 3160, Explod1]    ;esplosioine di innesco
type = Explod
trigger1 = Time = 3
anim = 4003
pos = 0, -100             
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3160, Explod2]     ;come sopra ma quella in sottofondo
type = Explod
trigger1 = Time = 3
anim = 4002
pos = 0, -100           
postype = p1
supermove = 1
under = 1

[State 3160, Schermo Nero]
type = EnvColor
trigger1 = time = 2
time = 25                   
value = 0,0,0
under = 1

[State 3160, SP]
type = SuperPause
trigger1 = time = 3
time = 24
Movetime = 24
anim = -1

[State 3160, AfterImage]
type = AfterImage
trigger1 = AnimElemTime(1) > 1            
trigger1 = AnimElemTime(91) < 4
time = 20
length = 60
timegap = 1
framegap = 1
trans = sub

[State 3160, BGPALFX]
type = BGPalFX
trigger1 = AnimElemTime(6) > 1            
trigger1 = AnimElemTime(91) < 4
time = 30
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 3160, SE]
type = PlaySnd
trigger1 = time = 20
value = 700, 1;

[State 3160, SE]
type = PlaySnd
trigger1 = time = 20
value = 3000, 1;

[State 3160, NHB]      ;rendi invincibile il p1 per 60 tick (forse e' meglio aumentare)
type = NotHitBy
trigger1 = AnimElemTime(1) > 1           
trigger1 = AnimElemTime(9) < 5
value = SCA
time = 2

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3100, 1

[State 3160, HitDef]          ;colpo che serve per allontanare
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
animtype  = Medium
damage = 5
guardflag = MA
pausetime = 15,15           
sparkno = S8002
sparkxy = 0,-70
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 35
guard.slidetime = 35
ground.hittime  = 15
ground.velocity = -7
air.velocity = -2.5,-4

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 14
value = 3100, 2

[State 3160, EnvShake]       ;inizio degli spari
type = EnvShake
trigger1 = AnimElem = 14          
ampl = 12
time = 20

[State 3160, EnvShake]       ; trema a meta'
type = EnvShake
trigger1 = AnimElem = 41          
ampl = 15
time = 20


[State 3160, VelSet]        
type = Velset
trigger1 = Time = 116
x = -5

[State 3160, Explod]   ;esplos. che esce dal cannone
type = Explod
trigger1 = AnimElem = 14
trigger2 = AnimElem = 17
trigger3 = AnimElem = 21
trigger4 = AnimElem = 24
trigger5 = AnimElem = 28
trigger6 = AnimElem = 31
trigger7 = AnimElem = 35
trigger8 = AnimElem = 38
trigger9 = AnimElem = 41
trigger10 = AnimElem = 45
trigger11 = AnimElem = 49
trigger12 = AnimElem = 53
trigger13 = AnimElem = 57
trigger14 = AnimElem = 61
trigger15 = AnimElem = 65
trigger16 = AnimElem = 69
trigger17 = AnimElem = 73
trigger18 = AnimElem = 78
anim = 3101
pos = 87, -70
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 9999

[State 3160, Explod]      ;esp a terra (quella dietro)
type = Explod
trigger1 = AnimElem = 15
trigger2 = AnimElem = 18
trigger3 = AnimElem = 22
trigger4 = AnimElem = 25
trigger5 = AnimElem = 29
trigger6 = AnimElem = 32
trigger7 = AnimElem = 36
trigger8 = AnimElem = 39
trigger9 = AnimElem = 42
trigger10 = AnimElem = 46
trigger11 = AnimElem = 50
trigger12 = AnimElem = 54
trigger13 = AnimElem = 58
trigger14 = AnimElem = 62
trigger15 = AnimElem = 66
trigger16 = AnimElem = 70
trigger17 = AnimElem = 74
trigger18 = AnimElem = 79
anim = 3103
pos = 30, 0
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1

[State 3160, Explod]    ;espl a terra
type = Explod
trigger1 = AnimElem = 15
trigger2 = AnimElem = 18
trigger3 = AnimElem = 22
trigger4 = AnimElem = 25
trigger5 = AnimElem = 29
trigger6 = AnimElem = 32
trigger7 = AnimElem = 36
trigger8 = AnimElem = 39
trigger9 = AnimElem = 42
trigger10 = AnimElem = 46
trigger11 = AnimElem = 50
trigger12 = AnimElem = 54
trigger13 = AnimElem = 58
trigger14 = AnimElem = 62
trigger15 = AnimElem = 66
trigger16 = AnimElem = 70
trigger17 = AnimElem = 74
trigger18 = AnimElem = 79
anim = 3104
pos = 30, 0
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 14
trigger2 = AnimElem = 17
trigger3 = AnimElem = 21
trigger4 = AnimElem = 24
trigger5 = AnimElem = 28
trigger6 = AnimElem = 31
trigger7 = AnimElem = 35
trigger8 = AnimElem = 38
trigger9 = AnimElem = 41
trigger10 = AnimElem = 45
trigger11 = AnimElem = 49
trigger12 = AnimElem = 53
trigger13 = AnimElem = 57
trigger14 = AnimElem = 61
trigger15 = AnimElem = 65
trigger16 = AnimElem = 69
trigger17 = AnimElem = 73
trigger18 = AnimElem = 78
value = 1100, 2

[State 3160, Proj]            ;questi sono i colpi che infuocano il p2         
type = Projectile
trigger1 = AnimElem = 14
trigger2 = AnimElem = 17
trigger3 = AnimElem = 21
trigger4 = AnimElem = 24
trigger5 = AnimElem = 28
trigger6 = AnimElem = 31
trigger7 = AnimElem = 35
trigger8 = AnimElem = 38
trigger9 = AnimElem = 41
trigger10 = AnimElem = 45
trigger11 = AnimElem = 49
trigger12 = AnimElem = 53
trigger13 = AnimElem = 57
trigger14 = AnimElem = 61
trigger15 = AnimElem = 65
trigger16 = AnimElem = 69
projID = 3110
projanim = 3110              ;si richiama il collision box rosso vuoto
offset = 80, -60
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 23,9
guardflag = MA
hitflag = MAF
pausetime = 0,12            
sparkno = S3106             
sparkxy = 20, -15                       
guard.sparkno = 42
hitsound   = s1100,2
guardsound = 6,0
random = 25,60
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8     
air.velocity = -2.5,-1.5
air.fall = 1
Kill = 0
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3160, Explod]         ;esplosione su p2 colpito
type = Explod
trigger1 = ProjContact3110 = 1
anim = 3107
pos = 20, -60
postype = p2
sprpriority = 2
random = 15,50
bindtime = 1
ownpal = 1
ontop = 1
scale = .7, .7

[State 3160, Proj]            ;questi sono i 2 colpi a mani unite         
type = Projectile
trigger1 = AnimElem = 73    ;colpo a mani unite
trigger2 = AnimElem = 78    ;colpo a mani unite
projanim = 3110
projID = 3110             
offset = 80, -60
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = Hard
getpower = 0,0
givepower = 20,10
damage    = 64,25
guardflag = MA
hitflag = MAF
pausetime = 40,60           
sparkno = S3105             
sparkxy = 20, -10                       
guard.sparkno = S3107       ;anhes se p2 si para cmq ha l'esplosione di sopra
random = 10,20
hitsound = s1100,2
guardsound = s1100,2
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8     
air.velocity = -2.5,-1.5
air.fall = 1
Kill = 0
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3160, Envshake]         ;fai tremare lo schermo
type = EnvShake
trigger1 = AnimElem = 74   ; tremare su due colpi a mani unite
trigger2 = AnimElem = 79
ampl = 15
time = 20

[State 3160, SE]                ;effetto son. prima dello sparo (forse da cambiare)
type = PlaySnd
trigger1 = Animelem = 83
value = 700, 1

[State 3160, SuperPause]
type = SuperPause
trigger1 = Animelem = 85        ;superpausa per caricare il colpo finale
time = 40
movetime = 0
anim = -1

[State 3160, BGPALFX]          ;crea lo sfondo nero su cui piazzare il botto rosso
type = BGPalFX
trigger1 = AnimElem = 85            
time = 40
invertall = 0
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 3160, Explod]            ;botto rosso sulla mano
type = Explod
trigger1 = AnimElem = 85
anim = 3161
ID = 3161
pos = 95, -72
postype = p1
facing = 1
bindtime = -1
vel = 0, 0
supermove = 1
sprpriority = -5
ontop = 0
scale = .9, .9

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 85
value = 11015,0

[State 3160, NHB]      ;rendi invincibile il p1 per l'ultimo colpo
type = NotHitBy
trigger1 = AnimElemTime(82) > 1
trigger1 = AnimElemTime(91) < 4
value = SCA
time = 1

[State 3160, Proj Finale]                  ;questo e' il colpo finale che lo fa volare via
type = Projectile
trigger1 = Animelem = 85
projanim = 3110
projhitanim = 3102
offset = 80, -60
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 0,0
givepower = 20,10
damage    = 95,40
guardflag = MA
hitflag = MAF
pausetime = 40,40
sparkno = 3
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -2.5,-5.5
p2stateno = 3101
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3160, PalFX]
type = PalFX
trigger1 = AnimElem = 85, =6
add = 64,64,64
time = 6

[State 3160, EnvShake]             ;fai tremare lo schermo
type = EnvShake
trigger1 = AnimElem = 85, =6   ;ultimo shake nel colpo finale (nota, forse va messo al 86 ovvero al rinculo)
ampl = 20
time = 30

[State 3160, Explod]           ;il fumo rotondo a terra
type = Explod
trigger1 = AnimElem = 85, =6
anim = 8013
pos = -15, -5
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1

[State 3160, Explod]            ;il fumo che esce dalla "pistola" finale
type = Explod
trigger1 = AnimElem = 85, =6
anim = 8014
pos = 100, -71
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1
ontop = 1
scale = .8, .8

[State 3160, SE]          ;sfx della pistolettata finale
type = PlaySnd
trigger1 = Animelem = 85, =6
value = 11004, 0;
volume = 50

[State 3160, SE]          
type = PlaySnd
trigger1 = Animelem = 85, =6
value = 3100, 0;
volume = 60

[State 3160, EnvColor]
type = EnvColor
trigger1 = AnimElem = 12, =2
trigger2 = AnimElem = 18, =2
trigger3 = AnimElem = 24, =2
trigger4 = AnimElem = 30, =2
trigger5 = AnimElem = 36, =2
trigger6 = AnimElem = 42, =2
trigger7 = AnimElem = 48, =2
trigger8 = AnimElem = 54, =2
trigger9 = AnimElem = 60, =2
trigger10 = AnimElem = 66, =2
trigger11 = AnimElem = 72, =2
trigger12 = AnimElem = 78, =2
trigger13 = AnimElem = 84, =2
trigger14 = AnimElem = 90, =2
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 3160, CS]
type = ChangeState
triggerall = stateno = 3160
trigger1 = AnimElemTime(80) > 0
trigger1 = AnimElemTime(82) < 5
trigger1 = ProjHit3110 = 1, < 30
trigger1 = command = "Sayanchiosparo"
trigger1 = power >= 1000
value = 3165
ctrl = 0

[State 3160, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
;-SAYANCHIOSPARO (SUPER A TRE)
[Statedef 3165]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 3165
ctrl = 0
poweradd = -1000

[State 3165, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
time = 150                     
movetime = 150
darken = 1 
unhittable = 1
anim = -1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4003
pos = 65, -100
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 19500, SE]
type = EnvShake
trigger1 = AnimElem = 1
ampl = 8
time = 30

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4002
pos = 65, -100
postype = p1
supermove = 1
under = 1

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3165, 0
volume = 50

[State 3165, Explod]                    ;palonzo dietro
type = Explod
trigger1 = AnimElem = 1
anim = 3167
pos = 28,1 
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1
supermovetime = 200
shadow = -1
;scale = .8, .8

[State 3165, SE]                         ;prima frase
type = PlaySnd
trigger1 = AnimElem = 4
value = 3165,1

[State 3165, SE]                         ;seconda frase
type = PlaySnd
trigger1 = AnimElem = 5
value = 3165,2

[State 3165, SE]                         ;terza frase
type = PlaySnd
trigger1 = AnimElem = 7
value = 3165,3
volume = 100

[State 3165, SE]                         ;quarta frase (coretto palonzo)
type = PlaySnd
trigger1 = AnimElem = 7
value = 3165,4
volume = 100

[State 19500,EnvColor]
type = EnvColor
trigger1 = AnimElem = 8
value = 248,248,248
time = 2
under = 1

[State 3060, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 8, =2
time = 80                  
value = 0,0,0
under = 1

[State 3165, Proj Finale]                  ;questo e' il colpo finale con palonzo
type = Projectile
trigger1 = Animelem = 5
trigger2 = Animelem = 5, =15
projanim = 3168
projID = 3168
projhitanim = 3102
offset = 5, -40
velocity = 25, 0
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 0,0
givepower = 20,10
damage    = 140,40
guardflag = MA
hitflag = MAF+
pausetime = 0,0
sparkno = 3
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -10,-8.5       ;-8,-5.5 
air.velocity = -8.5,-7.5         ;-2.5,-5.5
p2stateno = 3101
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 4003
pos = 65, -100
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 4002
pos = 65, -100
postype = p1
supermove = 1
under = 1

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 8
value = 10130, 1;
volume = 200


[State 3160, SE]          
type = PlaySnd
trigger1 = Animelem = 8
trigger2 = Animelem = 9
value = 1100, 2;
;volume = 60

[State 3165, Explod]
type = Explod
trigger1 = projHit3168 = 1
anim = 3105
pos = 0, -85
postype = p2
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
random = 40,40

[State 3165, Explod]
type = Explod
trigger1 = projHit3168 = 1
anim = 3106
pos = 12, -35
postype = p2
sprpriority = 3
bindtime = 1
ownpal = 1
ontop = 1
random = 40,40


[State 3165, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 3101
pos = 66, -101
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 200

[State 3165, Explod]      ;lo sparo di palonzo
type = Explod
trigger1 = AnimElem = 8, =2
anim = 3101
pos = 86, -107
postype = p1
sprpriority = -2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 200

[State 3165, EnvShake]
type = EnvShake
trigger1 = projHit3168 = 1
time = 30
ampl = 10
freq = 90
persistent = 0
ignorehitpause = 1

[State 3165, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=============================================================
;HYPER DEVASTAZIONE a TRE
[Statedef 3300]                ;lui che crea la palla
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3300
ctrl = 0
poweradd = -3000
sprpriority = 2               ;nota: crea invunerabilita', superpausa che blocca tutti e effetti grafici

[State 3300, SuperPause]      ;casomai aggiungerci un bel sfx
type = SuperPause
trigger1 = AnimElem = 1
time = 25                     
movetime = 25
darken = 0 
anim = -1
unhittable = 1

[State 3303, SE]               ;BAROCCO BLAST!
type = PlaySnd
trigger1 = Time = 0
value = 11009, 0

[State 3301, SE]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1;

[State 3301, SE]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 1;

[State 3301, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1
time = 25                    
value = 0,0,0
under = 1

[State 3300, Blink Color]            ;da scegliere il colore se nero, giallo o altri
type = PalFX
trigger1 = AnimElem = 1
time = 15
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 3300, Explod1]         ;explod di inzio della super
type = Explod
trigger1 = Time = 2
anim = 4003
pos = 5, -130
postype = p1
supermove = 1
sprpriority = 3
bindtime = 1
ownpal = 1


[State 3300, Explod2]        ;explod di inzio della super (sottofondo)
type = Explod
trigger1 = Time = 2
anim = 4002
pos = 5, -126
postype = p1
supermove = 1
sprpriority = -3
under = 1
ownpal = 1

[State 3300, Explod3]        ;la palla
type = Explod
trigger1 = Time = 12
anim = 8108
ID = 8108
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 2
ownpal = 1
scale = .7, .7

[State 3301, SE]               ;urlo disumano
type = PlaySnd
trigger1 = Time = 12
value = 11007, 0             
volume = -45

[State 3303, polverone]        ;polverone per terra
type = Explod
trigger1 = Time = 14       
anim = 8120  
postype = p1
pos = -7, 0                
supermove = 1
sprpriority = 3
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = Time = 14       
anim = 8120  
postype = p1
pos = 7, 0                 
supermove = 1
sprpriority = 3
facing = -1
ownpal = 1
shadow = -1
scale = .7, .7


[State 3301, SE]            ;TERREMOTO
type = PlaySnd
trigger1 = Time = 12
value = 11005, 0
loop = 1 
channel = 3

[State 3300, Colpisco!]      
type = HitDef
trigger1 = Time = 12
attr = A, HA
animtype  = Diagup
damage = 106, 106
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = S8002
guard.sparkno = 42
sparkxy = 20,-75
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 12            
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3300, Explod]         ;esplosione su p2 colpito
type = Explod
trigger1 = MoveHit
anim = 3107
pos = 15, -60
postype = p2
sprpriority = 2
random = 15,60
bindtime = 1
ownpal = 1
ontop = 1
scale = .4, .4

[State 3300, AssertSpecial]      
type = AssertSpecial
trigger1 = Time >= 12
flag = unguardable
flag2 = timerfreeze

[State 8030, Explod]     ;il cerchio che si crea p1     
type = Explod
trigger1 = AnimElem = 12
trigger2 = AnimElem = 39
trigger3 = AnimElem = 45
trigger4 = AnimElem = 67
anim = 8030            
ID = 8030
pos = 0,-50
postype = p1
sprpriority = 3
ontop = 1
shadow = -1
ownpal = 1
scale = .9, .9

[State 3300, SE]                ;SE del cerchio su p1
type = PlaySnd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 39
trigger3 = AnimElem = 45
trigger4 = AnimElem = 67
value = 10005,2
volume = 255


[State 3300, LifeADD]      ;il p1 comincia a perdere energia      
type = LifeAdd
trigger1 = AnimElem = 12
trigger2 = AnimElem = 39
trigger3 = AnimElem = 45
trigger4 = AnimElem = 67
value = -19               ;quanto togliere
kill = 0                  ;settato a 0 il p1 non verra' ucciso



[State 8007, Explod]        ;Cerchio Bianco
type = Explod
trigger1 = AnimElem = 37
trigger2 = AnimElem = 39
anim = 8007
ID = 8007
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 4
ownpal = 1

[State 3300, EnvShake]
type = EnvShake
trigger1 = Time = 12
time = 132
ampl = -2
freq = 90

[State 3300, ChangeState]      
type = ChangeState
trigger1 = AnimTime = 0
value = 3301
------------------------------

[Statedef 3301]                ;lui tiene la palla (secondo loop)
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3301
ctrl = 0
sprpriority = 2               

[State 3301, Explod4]        ;la palla secondo loop
type = Explod
trigger1 = Time = 1          ;forse e' meglio l'animelem
anim = 8109
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 3
ownpal = 1
scale = .7, .7

[State 3301, Colpisco!]      
type = HitDef
trigger1 = Time = 1
attr = A, HA
animtype  = Diagup
damage = 106, 106
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = S8002
guard.sparkno = 42
sparkxy = 20,-75
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3301, Explod]         ;esplosione su p2 colpito
type = Explod
trigger1 = MoveHit
anim = 3107
pos = 15, -60
postype = p2
sprpriority = 2
random = 15,60
bindtime = 1
ownpal = 1
ontop = 1
scale = .4, .4

[State 3301, AssertSpecial]      
type = AssertSpecial
trigger1 = Time >= 1
flag = unguardable
flag2 = timerfreeze

[State 8030, Explod]     ;il cerchio che si crea p1     
type = Explod
trigger1 = AnimElem = 21
trigger3 = AnimElem = 39
trigger4 = AnimElem = 56
trigger5 = AnimElem = 71
anim = 8030            
ID = 8030
pos = 0,-50
postype = p1
sprpriority = 3
ontop = 1
shadow = -1
ownpal = 1
scale = .9, .9

[State 3300, SE]                ;SE del cerchio su p1
type = PlaySnd
trigger1 = AnimElem = 21
trigger3 = AnimElem = 39
trigger4 = AnimElem = 56
trigger5 = AnimElem = 71
value = 10005,2
volume = 255


[State 3300, LifeADD]      ;il p1 continua a perdere energia      
type = LifeAdd
trigger1 = AnimElem = 21
trigger2 = AnimElem = 39
trigger3 = AnimElem = 56
trigger4 = AnimElem = 71
value = -29               
kill = 0                  


[State 8007, Explod]        ;Cerchio Bianco (seconda tornata)
type = Explod
trigger1 = AnimElem = 37
trigger2 = AnimElem = 39
anim = 8007
ID = 8007
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 4
ownpal = 1

[State 3300, 5]
type = EnvShake
trigger1 = Time = 1
time = 156
ampl = -2
freq = 90

[State 3301, ChangeState]      
type = ChangeState
trigger1 = AnimTime = 0          
value = 3302
-----------------------------

[Statedef 3302]                ;lui tiene la palla (terzo loop, quello grande)
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3302
ctrl = 0
sprpriority = 2               

[State 3302, Explod5]        ;la palla piu' grande
type = Explod
trigger1 = Time = 1          ;forse e' meglio l'animelem
anim = 8107
pos = 5, -166
postype = p1
supermove = 1
sprpriority = 3
ownpal = 1
scale = .7, .7

[State 3302, Colpisco!]      
type = HitDef
trigger1 = Time = 1
attr = A, HA
animtype  = Diagup
damage = 140, 140
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = S8002
guard.sparkno = 42
sparkxy = 20,-75
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1


[State 3302, Explod]         ;esplosione su p2 colpito
type = Explod
trigger1 = MoveHit
anim = 3107
pos = 15, -60
postype = p2
sprpriority = 2
random = 15,60
bindtime = 1
ownpal = 1
ontop = 1
scale = .4, .4

[State 3302, AssertSpecial]      
type = AssertSpecial
trigger1 = Time >= 1
flag = unguardable
flag2 = timerfreeze

[State 8030, Explod]     ;il cerchio che si crea p1     
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
trigger3 = AnimElem = 28
trigger4 = AnimElem = 37
anim = 8030            
ID = 8030
pos = 0,-50
postype = p1
sprpriority = 3
ontop = 1
shadow = -1
ownpal = 1
scale = .9, .9

[State 3300, SE]                ;SE del cerchio su p1
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
trigger3 = AnimElem = 28
trigger4 = AnimElem = 37
value = 10005,2
volume = 255


[State 3302, LifeADD]      ;il p1 continua a perdere energia      
type = LifeAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 15
trigger3 = AnimElem = 28
trigger4 = AnimElem = 37
value = -58               
kill = 0                  

[State 3302, 5]
type = EnvShake
trigger1 = Time = 1
time = 126         
ampl = -3
freq = 90


[State 3302, ChangeState]      ;cambia all'animaz. di lui che butta la palla
type = ChangeState
trigger1 = AnimTime = 0          ;metti come trigger l'AnimElem finale
value = 3303

;---------------------------------
;-UBU butta la palla in terra
[Statedef 3303]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3303
ctrl = 0
sprpriority = 2

[State 3303, SE]
type = StopSnd
trigger1 = AnimElem = 1
value = 11005, 0
channel = 3

[State 3303, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1
time = 3 
value = 246,246,246
under = 1

[State 3303, Blink Color]            ;da scegliere il colore se nero, giallo o altri
type = PalFX
trigger1 = AnimElem = 1
time = 3
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 3303, Invertall]
type = BGPalfx
trigger1 = AnimElemTime(1) >= 3
trigger1 = AnimElemTime(13) <= 5
ignorehitpause = 1
time = 2
invertall = 1

[State 3303, Explod6]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 1
anim = 8110                  ;casomai mettere la 8110
pos = -10, -160
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]  ;nota:questa super e' parabile e il p1 e' colpibile    
type = HitDef
trigger1 = AnimElem = 1
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, Explod7]        ;la palla viene gettata a terra
type = Explod     
trigger1 = AnimElem = 2
anim = 8111                  
pos = -35, -145
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      ;nota:questa super e' parabile e il p1 e' colpibile
type = HitDef
trigger1 = AnimElem = 2
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1

[State 3303, Explod8]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 3
anim = 8110                  ;casomai mettere la 8110
pos = -10, -160
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      ;nota:questa super e' parabile e il p1 e' colpibile
type = HitDef
trigger1 = AnimElem = 3
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, Explod9]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 4
anim = 8110                  ;casomai mettere la 8110
pos = 45, -140
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      ;nota: qui il p1 ridiventa incolpibile
type = HitDef
trigger1 = AnimElem = 4
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, Explod9]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 5
anim = 8110                  ;casomai mettere la 8110
pos = 90, -100
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1                ;se fai arretrare il p1 (posadd) allora devi togliere il bindtime infinito
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      
type = HitDef
trigger1 = AnimElem = 5
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1

[State 3303, SE]               ;CRY!!!!!
type = PlaySnd
trigger1 = AnimElem = 5
value = 11008, 0


[State 3303, NotHitBy]            ;invunnerabile dall'anim 5
type = NotHitBy
trigger1 = AnimElemTime(5) >= 5
trigger1 = AnimElemTime(13) <= 15
value = SCA

[State 3303, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 5, =3       
anim = 8120  
postype = p1
pos = 105, 0
supermove = 1
sprpriority = 3
ontop = 1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 5, =3       
anim = 8120  
postype = p1
pos = 127, 0
supermove = 1
sprpriority = 3
ontop = 1
facing = -1
ownpal = 1
shadow = -1
scale = .7, .7



[State 3303, Explod10]        ;la palla viene gettata a terra
type = Explod
trigger1 = AnimElem = 6
anim = 8110                  ;creare una altra animazione della palla tagliata
pos = 120, -60
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7

[State 3303, Colpisco!]      
type = HitDef
trigger1 = AnimElem = 6
attr = A, HA
animtype  = Diagup
damage = 140, 35
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303, SE]                ;SE della palla che sbatte per terra
type = PlaySnd
trigger1 = AnimElem = 6
value = 10005,1
volume = 100

[State 3303, SE]                ;SE del tuono della palla
type = PlaySnd
trigger1 = AnimElem = 6
value = 11006,0
volume = 250

[State 3303, Explod11]        ;la palla tagliata a terra
type = Explod
trigger1 = AnimElem = 7
anim = 8112                  
pos = 120, 1
postype = p1
supermove = 1
sprpriority = 3
bindtime = -1
ownpal = 1
shadow = -1
scale = .7, .7


[State 3303, Colpisco!]    ;l'Hitdef per tutti i restanti colpi  
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 8
trigger3 = AnimElem = 9
trigger4 = AnimElem = 10
trigger5 = AnimElem = 11
trigger6 = AnimElem = 12
attr = A, HA
animtype  = Diagup
damage = 10, 8
Hitflag = MAF
guardflag = MA
priority = 7, Hit
pausetime = 0,25
sparkno = 3
guard.sparkno = S8050
sparkxy = 5,-62
random = 20, 66
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3303,EnvShake]
type = EnvShake
trigger1 = AnimElem = 7, =1
time = 25                    
ampl = -30
freq = 30

[State 3303, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 7, =3
time = 2
value = 246,246,246
under = 1

[State 3303, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 8
time = 15
value = 246,246,246
under = 1

[State 3303, Schermo Nero]   
type = EnvColor
trigger1 = AnimElem = 10
time = 25
value = 0,0,0
under = 1

[State 3303, Explod12]        ;l'animz. gialla sull'espl.
type = Explod
trigger1 = AnimElem = 10
anim = 8025
sprpriority = 0
postype = left
pos = 0,0
shadow = 0,0,0                
bindtime = -1
supermovetime = 30            ;quanto la explod sta "unfrozen" durante la superpausa

[State 3303, Explod13]        ;l'espl. dopo il polverone
type = Explod
trigger1 = AnimElem = 9    
anim = 8022  
postype = p1
pos = 50, -1
supermove = 1
sprpriority = 3
ownpal = 1
shadow = -1

[State 3303, Explod14]       ;l'esplosione bianca che invade lo schermo
type = Explod
trigger1 = AnimElem = 12
anim = 8026
postype = left
pos = 160,140
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3303, SE]
type = PlaySnd
trigger1 = Time = 1
value = 3000, 1

[State 3303, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3304

;---------------------------------
;-Il bianco invade lo schermo e i nemici subiscono
[Statedef 3304]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 3304
ctrl = 0
sprpriority = 2

[State 3304,EnvShake]
type = EnvShake
trigger1 = time = 0
time = 60
ampl = -6
freq = 95

[State 3304, AsserSpecial]            ;nota; mettere un flag2 dove spariscono le barre di energia
type = AssertSpecial
trigger1 = time = 0
flag = nojugglecheck

[State 3304, NotHitBy]            ;invunnerabile
type = NotHitBy
trigger1 = AnimElemTime(1) >= 1
trigger1 = AnimElemTime(40) <= 2
value = SCA

[State 3304‚ BGPalFx­]
type = BGPalfx
trigger1 = time = 0
trigger2 = time = 2
ignorehitpause = 1
time = 1
mul = 0,0,0
invertall = 1

[State 3304, BGPal]
type = BGPalfx
trigger1 = time = 1
trigger2 = time >= 3
ignorehitpause = 1
time = 1
add = 255,255,255

[State 3304‚­ PalFX]
type = Palfx
trigger1 = time = 1
ignorehitpause = 1
time = 18
sinadd = 255,255,255,80

[State 3304, PalFX]
type = Palfx
trigger1 = time >= 19
ignorehitpause = 1
time = 1
add = 255,255,255

[State 3304, HitDef]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
trigger4 = AnimElem = 18
trigger5 = AnimElem = 30
attr = A, HA
animtype  = Hard
affectteam = B
damage = Ceil((160 / (2 ** HitCount))+7), 8
Hitflag = MAF
guardflag = MA
pausetime = 0,1
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = -7,-90
random = 20, 66
hitsound   = 5,2
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1


[State 3304, HitDef]
type = HitDef
trigger1 = AnimElem = 8
trigger2 = AnimElem = 12
trigger3 = AnimElem = 16
trigger4 = AnimElem = 20
trigger5 = AnimElem = 32
attr = A, HA
animtype  = Hard
affectteam = B
damage = Ceil((160 / (2 ** HitCount))+7), 8
Hitflag = MAF
guardflag = MA
pausetime = 0,1
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = -16,-95
random = 20, 66
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1


[State 3304, HitDef]
type = HitDef
trigger1 = AnimElem = 22
trigger2 = AnimElem = 24
trigger3 = AnimElem = 26
trigger4 = AnimElem = 28
attr = A, HA
animtype  = Hard
affectteam = B
damage = 6, 6
Hitflag = MAF
guardflag = MA
pausetime = 2,3
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = 2,-60
random = 20, 66
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1

[State 3304, VarRandom]
type = VarRandom
trigger1 = Time = 0
v = 15
range = 0,4

[State 3304, HitDef]
type = HitDef
triggerall = Var(15) = 4
trigger1 = AnimElem = 7
trigger2 = AnimElem = 9
trigger3 = AnimElem = 11
trigger4 = AnimElem = 13
trigger5 = AnimElem = 15
trigger6 = AnimElem = 17
trigger7 = AnimElem = 19
trigger8 = AnimElem = 21
trigger9 = AnimElem = 23
trigger10 = AnimElem = 25
trigger11 = AnimElem = 27
trigger12 = AnimElem = 29
trigger13 = AnimElem = 31
trigger14 = AnimElem = 33
trigger15 = AnimElem = 34
attr = A, HA
animtype  = Hard
affectteam = B
damage = Ceil((160 / (2 ** HitCount))+8), 8
Hitflag = MAF
guardflag = MA
pausetime = 0,1
givepower = 0,0
getpower = 0,0
sparkno = S8012
guard.sparkno = S8050
sparkxy = 2,-60
random = 20, 66
hitsound   = 5,2
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0
air.velocity = 0,-1

[State 3304, HitDef]               ;colpo finale che atterra
type = HitDef
trigger1 = AnimElem = 35
attr = A, HA
animtype  = Diagup
affectteam = B
damage = 25, 13
Hitflag = MAF
guardflag = MA
pausetime = 0,0
givepower = 0,0
getpower = 0,0
sparkno = S3105
guard.sparkno = S8050
sparkxy = 2,-67
random = 20, 66
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5, -5
air.velocity = -2.5,-4
fall = 1


[State 3304, CGsuicidio]             ;se invece p1 si trova con 1 di energia
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = life = 1
trigger1 = p2life > 0
value = 3305
ctrl = 1


[State 3304, CG]             ;il ritorno allo state normale
type = ChangeState
trigger1 = AnimTime = 0
value = 0                        
ctrl = 1

;---------------------------------
;-Se p1 E' con una linea di energia
[Statedef 3305]
type    = S
movetype= A
velset = 0,0
anim = 3305
ctrl = 0
sprpriority = 2

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3305, Explod]    ;il sangue sulla testa   
type = Explod
trigger1 = AnimElem = 8, =14
anim = 8125
postype = p1
pos = -15,-118
bindtime = 1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, 5]        ;lo schermo trema sul colpo alla tempia
type = EnvShake
trigger1 = AnimElem = 8, =14
time = 25        
ampl = -3
freq = 90

[State 3305, SE]
type = PlaySnd
trigger1 = AnimElem = 8, =14
value = 11004,0
volume = 60

[State 3305, SE]
type = PlaySnd
trigger1 = AnimElem = 8, =14
value = 1100,2               

[State 3305, EnvColor]  
type = EnvColor
trigger1 = life = 1
trigger1 = AnimElem = 25, =15
value = 0,0,0
time = 130              

[State 3305,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 25,=26
trigger2 = AnimElem = 25,=32
trigger3 = AnimElem = 25,=65
trigger4 = AnimElem = 25,=78
value = 3100,0
volume = 30

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =25
anim = 3105
postype = p1
pos = 20,-45
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =25
anim = 3107
postype = p1
pos = -20,-20
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =30
anim = 3102
postype = p1
pos = 0,-30
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =60
anim = 3105
postype = p1
pos = 0,-65
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =65
anim = 3107
postype = p1
pos = 15,-10
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =75
anim = 3105
postype = p1
pos = 25,-65
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, Explod]       
type = Explod
trigger1 = AnimElem = 25, =80
anim = 3107
postype = p1
pos = 5,-40
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 3305, ChangeState]    ;p1 si uccide!   
type = ChangeState
trigger1 = AnimTime = 0
value = 3307

;---------------------------------------------------------------
;P1 a terra morto
[Statedef 3307]
type = L
movetype= I
velset = 0,0
anim = 3307
ctrl = 0
sprpriority = 2

[State 3307, AssertSpecial]  
type = AssertSpecial
trigger1 = Time = [0,35]
flag = nokosnd
flag2 = nokoslow
flag3 = nomusic

[State 3307, LifeAdd]    ;p1 si uccide!   
type = LifeAdd
trigger1 = life = 1
trigger1 = AnimElem = 1, =18
value = -1
kill = 1
absolute = 1

[State 3307, ChangeAnim]   
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------


;REVERSAL START
[Statedef 10001]
type = S
movetype = I
physics = N
anim = 10001
velset = 0,0
poweradd = 53
ctrl = 0

[State 10001,rev1]
type = ReversalDef
reversal.attr = SCA, NA,SA,HA
trigger1 = AnimElem = 4
pausetime = 9,70            
sparkno = S8002
sparkxy = 5, -65
hitsound = S3,6
numhits = 0
priority = 7, Hit
p1stateno = 10003

[State 10001, Cancel]
type = ChangeState
trigger1 = Time = 50
value = 10002
ctrl = 0

;-----------------------------

;Reversal End
[Statedef 10002]
type = S
movetype = I
physics = N
anim = 10002
velset = 0,0
ctrl = 0

[State 10002, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------

[Statedef 10003] 
type = S
movetype = A
physics = S
anim = 10003
velset = 0
ctrl = 0
juggle = 8
poweradd = 130

;reversal attack
[State 10003, HitDef]
type = HitDef
trigger1 = AnimElem = 5
attr = S, SA
damage = 160,35
animtype = DiagUp
guardflag = M
hitflag = MAF
pausetime = 24,24
hitonce = 1
sparkno = S8101
guard.sparkno = S8060
sparkxy = 0, -82
hitsound = S1100,2
guardsound = S200,4
ground.type = High
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,-6
air.velocity = -20,-6
getpower = 50,40
givepower = 30,10
fall = 1
fall.recover = 0
yaccel = .5
mindist = 50,-55
maxdist = 100,-10
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90

[State 10004, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0        
value = SCA
time = 1

[State 10003, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------
;Hyper REVERSAL START
[Statedef 10004]
type = S
movetype = I
physics = N
anim = 10004
velset = 0,0
poweradd = -1000
ctrl = 0

[State 710, 1]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 10004, SE]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1;

[State 10004,rev1]
type = ReversalDef
reversal.attr = SCA, NA,SA,HA
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
pausetime = 9,80                 
hitsound = S3,6
numhits = 0
priority = 7
p1stateno = 10005

[State 10004, AfterImage]
type = Null;AfterImage
trigger1 = AnimElem = 1
time = 999
timegap = 1
framegap = 1
length = 10


[State 10004,EnvColor]
type = EnvColor
trigger1 = Time = 1
trigger2 = AnimElem = 1
value = 248,248,248
time = 2
under = 1

[State 10004,Explod]
type = Explod
trigger1 = Time = 2
anim = 4000
ID = 4000
pos = 6,-83
postype = P1
sprpriority = 4
supermove = 1
ownpal = 1
bindtime = -1

[State 10004,Explod]
type = Explod
trigger1 = Time = 2
anim = 4001
ID = 4001
pos = 6,-83
postype = P1
sprpriority = -2
supermove = 1
ownpal = 1
bindtime = -1

[State 10004, SP]
type = SuperPause
trigger1 = AnimElem = 4
pos = -5, -55
anim = -1
sound = 20, 0
unhittable = 1


[State 10004, Cancel]
type = ChangeState
trigger1 = Time = 50
value = 10002
ctrl = 0

;Hyper Reversal End
[Statedef 10002]
type = S
movetype = I
physics = N
anim = 10002
velset = 0,0
ctrl = 0

[State 10002, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
																										
;-----------------------------
;Hyper REVERSAL i 3 pugni
[Statedef 10005] 
type = S
movetype = A
physics = S
anim = 10005
velset = 0
ctrl = 0
juggle = 15

;Invunerabilita' dei primi frames
[State 10005, NotHitBy]
type = NotHitBy
trigger1 = AnimElem >= 1
value = SCA
time = 56

;fermare il tempo
[State 10005, AssertSpecial]
type = AssertSpecial
triggerall = (GameTime%1) = 0 && roundstate = 2 && p2life > 0
trigger1 = movecontact
flag = timerfreeze
flag2 = unguardable

Rallentare tutti i personaggi sullo schermo
[State 10005, Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2 && p2life > 0 
trigger1 = AnimElemTime(7) > 1
trigger1 = AnimElemTime(8) < 30
time = 1 
movetime = 1 
ignorehitpause = 1 


;Hyper reversal attack
[State 10005, reversal]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
animtype  = Hard             ;Make p2 use "Up" type animation on hit
damage    = 100, 12
getpower  = 0
priority  = 7
pausetime = 0,300            
sparkno = S8018
sparkxy = 0,-80
hitsound   = 5,4
ground.type = Low
envshake.ampl = 6            ;Parameters for shaking the screen on hit
envshake.freq = 178
envshake.time = 15
mindist = 70,-10            ;Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 70,-10            ;Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below

[State 10005, TargetBind]
type = TargetBind
triggerall = movehit = 1
trigger1 = AnimElem = 7
time = 95
pos = 65,-10

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 11011,0

[State 10005, SuperPause]
type = SuperPause
trigger1 = AnimElem = 7
trigger1 = MoveContact
anim = -1
darken = 1
pos = -5, -55
sound = S10005,2

[State 10005, EnvColor]
type = EnvColor
trigger1 = AnimElem = 7
value = 248,248,248
time = 1
under = 1

[State 10005, reversal successivo]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
animtype  = Back               ;Make p2 use "Up" type animation on hit
damage    = 100, 12
getpower  = 0
priority  = 7
pausetime = 40,500             
sparkno = S8018
sparkxy = -4,-85
hitsound   = 5,4
ground.type = High
envshake.ampl = 6
envshake.freq = 178
envshake.time = 30
mindist = 70,-10            ;Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 70,-10            ;Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below

[State 10005, END2]               ;nota; la mossa si resetta se non prende
type = ChangeState
trigger1 = AnimElem = 8
trigger1 = movecontact = 0
value = 0
ctrl = 1

[State 10005, TargetBind]
type = TargetBind
trigger1 = movehit = 1
trigger1 = AnimElem = 8
time = 70
pos = 65,-10

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 8
value = 11012,0

[State 10005, SuperPause]
type = SuperPause
trigger1 = AnimElem = 8
trigger1 = MoveContact
anim = -1
darken = 1
pos = -5, -55
sound = S10005,2

[State 10005, EnvColor]
type = EnvColor
trigger1 = AnimElem = 8
value = 248,248,248
time = 1
under = 1

[State 10005, finale]
type = HitDef
trigger1 = AnimElem = 9
attr = S, HA
animtype  = Up               ;Make p2 use "Up" type animation on hit
damage    = 150, 12
getpower  = 0
priority  = 7
pausetime = 5,5
sparkno = S8002
sparkxy = 0,-110
hitsound   = S10005,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -1.3,-25
guard.velocity = -11
air.type = Low	
air.velocity = -1.3,-25
airguard.velocity = -4.5,-5
envshake.time = 25           ;Parameters for shaking the screen on hit (25)
envshake.ampl = 10          
envshake.freq = 200          
fall = 1
fall.recover = 0             ;Prevent p2 from recovering
fall.damage = 70             ;p2 will take 70 damage on hitting the ground
fall.envshake.ampl = 6       ;Parameters for shaking the screen on fall
fall.envshake.freq = 178
fall.envshake.time = 15
mindist = 65,-100            ;Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 100,-10            ;Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below
yaccel = .8                  ;Accelerate p2 downwards rapidly

[State 10005, END3]               ;nota; la mossa si resetta se non prende
type = ChangeState
trigger1 = AnimElem = 9
trigger1 = movecontact = 0
value = 0
ctrl = 1

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 9
value = 11013,0

[State 10005, EnvColor]
type = EnvColor
trigger1 = AnimElem = 9
value = 248,248,248
time = 1
under = 1

[State 10005,Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 3102
ID = 3102
pos = 0,-150
postype = P2
sprpriority = 5
supermove = 1
ownpal = 1
bindtime = 2

[State 10005, Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 8103
id = 8103
sprpriority = -5
pos = 60,-135
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10005, Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 8104
id = 8103
sprpriority = 5
pos = 60,-135
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10005, EnvColor]
type = EnvColor
trigger1 = AnimElem = 9
time = 30
value = 0,0,0
under = 1
persistent = 0

[State 10005,SE]      ;nota: scegliere tra fx 3100,0 o questo
type = PlaySnd
trigger1 = AnimElem = 9
value = 10005,1
volume = 30


[State 10005, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
;Hyper REVERSAL START MAX
[Statedef 10006]
type = S
movetype = I
physics = N
anim = 10006
velset = 0,0
poweradd = -2000
ctrl = 0

[State 710, 1]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 10006, SE]
type = PlaySnd
trigger1 = Time = 0
value = 700, 1;

[State 10006, SE]
type = PlaySnd
trigger1 = Time = 0
value = 3000, 1;

[State 10006,rev1]
type = ReversalDef
reversal.attr = SCA, NA,SA,HA
trigger1 = AnimElem = 3
trigger2 = AnimElem = 4
pausetime = 9,66            
hitsound = S3,6
numhits = 0
priority = 7
p1stateno = 10007

[State 10006, AfterImage]
type = Null;AfterImage
trigger1 = AnimElem = 1
time = 999
timegap = 1
framegap = 1
length = 10

[State 10006,EnvColor]
type = EnvColor
trigger1 = Time = 1
trigger2 = AnimElem = 1
value = 248,248,248
time = 2
under = 1

[State 10006,Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 4003
ID = 4003
pos = 6,-83
postype = P1
sprpriority = 4
supermove = 1
ownpal = 1
bindtime = -1

[State 10006,Explod]
type = Explod
trigger1 = animElem = 4
anim = 4002
ID = 4002
pos = 6,-83
postype = P1
sprpriority = -2
supermove = 1
ownpal = 1
bindtime = -1

[State 10170, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 3, =3
time = 31                   
value = 0,0,0
under = 1

[State 10006, SP]
type = SuperPause
trigger1 = AnimElem = 4
pos = -5, -55
anim = -1
sound = 20, 0
unhittable = 1

[State 10006, Cancel]
type = ChangeState
trigger1 = Time = 50
value = 10002
ctrl = 0

;Hyper Reversal End
[Statedef 10002]
type = S
movetype = I
physics = N
anim = 10002
velset = 0,0
ctrl = 0

[State 10002, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
																										
;-----------------------------------------------------------------
;HYPER REVERSAL MAX (I 3 PUGNI)
[Statedef 10007] 
type = S
movetype = A
physics = S
anim = 10007
velset = 0
ctrl = 0
juggle = 15

;Invunerabilita' dei primi frames
[State 10007, NotHitBy]
type = NotHitBy
trigger1 = AnimElem >= 1
value = SCA
time = 56

;fermare il tempo
[State 10007, AssertSpecial]
type = AssertSpecial
triggerall = (GameTime%1) = 0 && roundstate = 2 && p2life > 0
trigger1 = movecontact
flag = timerfreeze
flag2 = unguardable

;Rallentare tutti i personaggi sullo schermo
[State 10007, Slow Motion ]
type = Pause 
triggerall = (GameTime%1) = 0 && roundstate = 2 && p2life > 0 
trigger1 = AnimElemTime(7) > 1
trigger1 = AnimElemTime(8) < 30     
time = 1 
movetime = 1 
ignorehitpause = 1 


;Hyper reversal attack MAX   ;versione che colpisce
[State 10007, reversal]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = p2Life > 165
attr = S, HA
animtype  = Hard               ;Make p2 use "Up" type animation on hit
damage    = 165, 12
getpower  = 0
priority  = 7
pausetime = 0,150           
sparkno = 0
sparkxy = -15,-77
hitsound = S11001,0
ground.type = Low
envshake.ampl = 6            ;Parameters for shaking the screen on hit
envshake.freq = 178
envshake.time = 15
mindist = 75,-10          ;(65,-100) Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 75,-10         ;(100,-10) Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below

;Hyper reversal attack MAX   ;versione che NON colpisce
[State 10007, reversal]
type = HitDef
trigger1 = AnimElem = 7
trigger1 = p2Life <= 165
attr = S, HA
animtype  = Hard               
damage    = 0, 0
getpower  = 0
priority  = 7
pausetime = 0,150
sparkno = 0
sparkxy = -15,-77
hitsound = S11001,0
ground.type = Low
envshake.ampl = 6            
envshake.freq = 178
envshake.time = 15
mindist = 75,-10          ;(65,-100) Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 75,-10          ;(100,-10) Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below

[State 10007, TargetBind]
type = TargetBind
triggerall = movehit
trigger1 = AnimElem = 7
time = 95
pos = 65,-10

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 11011,0

[State 10007, BGPalFX]
type = BGPalFX
trigger1 = AnimElem = 7
time = 600
invertall = 1
value = 0
ignorehitpause = 1

[State 10007, SuperPause]
type = SuperPause
trigger1 = AnimElem = 7
trigger1 = MoveContact
anim = -1
darken = 1
pos = -5, -55
sound = S10005,2

[State 10007, EnvColor]
type = EnvColor
trigger1 = AnimElem = 7
value = 248,248,248
time = 1
under = 1

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 8007
id = 8007
sprpriority = 4
postype = p1
pos = 70,-61
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 8005
id = 8005
sprpriority = 5
postype = p1
pos = 60,-71
bindtime = -1
supermovetime = -1
removeongethit = 1


;Hyper reversal successivo MAX           ;versione che colpisce
[State 10007, reversal successivo MAX] 
type = HitDef
trigger1 = AnimElem = 8
trigger1 = p2Life > 180
attr = S, HA
animtype  = Back               ;Make p2 use "Up" type animation on hit
damage    = 180, 12
getpower  = 0
priority  = 7
pausetime = 55,150
sparkno = 0
sparkxy = 2,-91
hitsound = S11002,0
ground.type = High
envshake.ampl = 6
envshake.freq = 178
envshake.time = 15
mindist = 75,-10          ;(65,-100) Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 75,-10          ;(100,-10) Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below

;Hyper reversal successivo MAX           ;versione che NON colpisce
[State 10007, reversal successivo MAX] 
type = HitDef
trigger1 = AnimElem = 8
trigger1 = p2Life <= 180
attr = S, HA
animtype  = Back               
damage    = 0, 0
getpower  = 0
priority  = 7
pausetime = 55,150
sparkno = 0
sparkxy = 2,-91
hitsound = S11002,0
ground.type = High
envshake.ampl = 6
envshake.freq = 178
envshake.time = 15
mindist = 75,-10          ;(65,-100) Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 75,-10          ;(100,-10) Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below

[State 10005, TargetBind]
type = TargetBind
trigger1 = movehit
trigger1 = AnimElem = 8
time = 85
pos = 65,-10

[State 10007, END2]               ;nota; la mossa si resetta se non prende
type = ChangeState
trigger1 = AnimElem = 8
trigger1 = movecontact = 0
value = 0
ctrl = 1

[State 10005, SE]
type = PlaySnd
trigger1 = AnimElem = 8
value = 11012,0

[State 10007, SuperPause]
type = SuperPause
trigger1 = AnimElem = 8
trigger1 = MoveContact
anim = -1
darken = 1
pos = -5, -55
sound = S10005,2

[State 10007, EnvColor]
type = EnvColor
trigger1 = AnimElem = 8
value = 248,248,248
time = 1
under = 1

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 8
trigger1 = movecontact
anim = 8007
id = 8007
sprpriority = 4
postype = p1
pos = 70,-81
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 8
trigger1 = movecontact
anim = 8005
id = 8005
sprpriority = 5
postype = p1
pos = 60,-91
bindtime = -1
supermovetime = -1
removeongethit = 1


;Hyper Rev. Uppercut Finale MAX     ;versione che colpisce
[State 10007, uppercut finale MAX]
type = HitDef
trigger1 = AnimElem = 9
trigger1 = p2Life > 192
attr = S, HA
hitflag = MAF+
animtype  = Up               ;Make p2 use "Up" type animation on hit
damage    = 192, 12
getpower  = 0
priority  = 7
pausetime = 5,5
hitsound   = S10005,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -.3,-92    ;quanto si sposta e va in aria dopo il pugnone
guard.velocity = -11
air.type = Low	
air.velocity = -.3,-92       
airguard.velocity = -4.5,-5
envshake.time = 25           ;Parameters for shaking the screen on hit (25)
envshake.ampl = 10           
envshake.freq = 200         
fall = 1
fall.recover = 0             ;Prevent p2 from recovering
fall.damage = 70             ;p2 will take 70 damage on hitting the ground
fall.envshake.ampl = 6       ;Parameters for shaking the screen on fall
fall.envshake.freq = 178
fall.envshake.time = 15
yaccel = .8                  ;Accelerate p2 downwards rapidly


;Hyper Rev. Uppercut Finale MAX     ;versione che NON colpisce
[State 10007, uppercut finale MAX]
type = HitDef
trigger1 = AnimElem = 9
trigger1 = p2Life <= 192
attr = S, HA
hitflag = MAF+
animtype  = Up               
damage    = 0, 0
getpower  = 0
priority  = 7
pausetime = 5,5
hitsound   = S10005,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -.3,-92  
guard.velocity = -11
air.type = Low	
air.velocity = -1.3,-25
airguard.velocity = -4.5,-5
envshake.time = 25           
envshake.ampl = 10           
envshake.freq = 200          
fall = 1
fall.recover = 0             
fall.damage = 70             
fall.envshake.ampl = 6       
fall.envshake.freq = 178
fall.envshake.time = 15
mindist = 75,-20          ;(50,-100) Keep p2 a minimum of 50 pixels away from p1, and no higher than 100 pixels up
maxdist = 75,-10          ;(100,-10) Keep p2 a maximum of 100 pixels away from p1, and no lower than 10 pixels below
yaccel = .8  

[State 10007, END3]               ;nota; la mossa si resetta se non prende (uppercut)
type = ChangeState
trigger1 = AnimElem = 9
trigger1 = movecontact = 0
value = 0
ctrl = 1

[State 10007, SE]
type = PlaySnd
trigger1 = AnimElem = 9
value = 11014,0
voluem = 150


[State 10007, EnvColor]
type = EnvColor
trigger1 = AnimElem = 9
value = 248,248,248
time = 1
under = 1

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 8103
id = 8103
sprpriority = -5
pos = 60,-135
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 8104
id = 8104
sprpriority = 5
pos = 60,-135
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10007,EnvShake]
type = EnvShake
trigger1 = AnimElem = 9, =1
time = 218
ampl = 2
freq = 118

[State 10007, SE]            ;TERREMOTO
type = PlaySnd
trigger1 = AnimElem = 10
value = 11005,0
volume = 20 
loop = 1 
channel = 3


[State 10007,EnvShake]
type = EnvShake
trigger1 = AnimElem = 43
time = 218
ampl = 4
freq = 133


[State 10007,EnvShake]
type = EnvShake
trigger1 = AnimElem = 73
time = 218
ampl = 7
freq = 178

[State 10007, EC]
type = EnvColor
trigger1 = AnimElem = 9
time = 30
value = 0,0,0
under = 1
persistent = 0

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 99
anim = 8006
id = 8006
sprpriority = 5
Postype = p1
pos = -5,-66
bindtime = -1
supermovetime = -1
removeongethit = 1


[State 10007, EC]
type = EnvColor
trigger1 = AnimElem = 109
time = 2
value = 246,246,246
persistent = 0

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 110
anim = 8011
id = 8011
sprpriority = 5
Postype = p1
pos = -15,-60
scale = .9, .9
bindtime = -1
removeongethit = 1

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 110, =2
anim = 8012
id = 8012
sprpriority = 5
Postype = p1
pos = -7,-70
bindtime = 2
removeongethit = 1

[State 10007, SE]      ;nota: scegliere tra fx 3100,0 o 10005,1
type = PlaySnd
trigger1 = AnimElem = 9
value = 3100,0
volume = 30

[State 10007, Explod]
type = Explod
trigger1 = AnimElem = 114, =2
anim = 8009
id = 8009
sprpriority = 5
pos = 0,-2
bindtime = -1
supermovetime = -1
removeongethit = 1

[State 10007, SE]       ;fine terremoto
type = StopSnd
trigger1 = AnimElem = 117
value = 11005, 0
channel = 3

;Hyper reversal attack FINAL
[State 10007, HitDEf]
type = HitDef
trigger1 = AnimElem = 117
attr = S, HA
damage = 215,65
animtype = DiagUp
air.animtype = DiagUp
fall.animtype = DiagUp
guardflag = M
hitflag = MAF
pausetime = 30,50            
sparkno = S8101
guard.sparkno = S1042
sparkxy = 5, -70
hitsound = S10005,0
guardsound = S200,4
ground.type = High
air.type = High
ground.slidetime = 10
ground.hittime  = 18
air.hittime  = 18
ground.velocity = -22,-6
air.velocity = -20,-6
givepower = 45,10
fall = 1
fall.recover = 0
air.fall = 1
yaccel = .5
mindist = 115,-70
maxdist = 125,-10
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90


[State 10007, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
TimeGap  = 1
FrameGap = 2
Trans = Add
time = 2

[State 10007, Afterimage]
type = AfterImageTime
trigger1 = AnimElem = 115
time = 2

[State 10007, Blink Yellow]
type = PalFX
trigger1 = AnimElem = 115
trigger2 = AnimElem = 116
trigger3 = AnimElem = 117, =1
time = 20
add = 32,16,0
sinadd = 64,32,5,3

[State 700, 5]
type = EnvColor
trigger1 = AnimElem = 117
time = 30
value = 0,0,0
under = 1
persistent = 0

[State 10007,Explod]
type = Explod
trigger1 = AnimElem = 117, =1
anim = 3102
ID = 3102
pos = 90,-72
postype = P1
sprpriority = 5
supermove = 1
ownpal = 1
bindtime = 2

[State 10007, Explod]    ; Esplosione MAX
type = Explod
trigger1 = AnimElem = 117, =1
anim = 8105
ID = 8105
postype = left
pos = 160,245
scale = 1.08,1.08
facing = facing
bindtime = -1
removetime = 40
sprpriority = -3
ownpal = 1

[State -2,AssertSpecial]
type = AssertSpecial
trigger1 = NumExplod(8105)
flag = NoBG
flag2 = NoFG
ignorehitpause = 1

[State 10007,PlaySnd]      ;nota: scegliere tra fx 3100,0 o questo
type = PlaySnd
trigger1 = AnimElem = 117, =1
value = 10005,1
volume = 30

[State 10007, END]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------------
;THIS IS THE HEAD (capata culetto)
[Statedef 10010]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 100
velset = 0,0
anim = 10010
ctrl = 0
sprpriority = 2

[State 10010, Friction]
type = VelMul
trigger1 = 1
x = .85

[State 10010, SE]
type = PlaySnd
trigger1 = Time = 1
value = 640, 0

[State 10010, SE]       
type = PlaySnd
trigger1 = AnimElem = 3
value = 11017, 0
volume = -10

[State 10010, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 10
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 10010, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(6) < 5
time = 2

[State 10010, Blink Color]
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

[State 10010, 1]                      ;controlla che sfx e'
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 10010, 2]
type = PosAdd
trigger1 = AnimElem = 2
trigger1 = movecontact = 0
x = 20

[State 10010, 3]
type = PosAdd
trigger1 = AnimElem = 4
trigger1 = movecontact = 0
x = 10

[State 10010, 4]
type = PosAdd
trigger1 = AnimElem = 5
trigger1 = movecontact = 0
x = 5

[State 10010, 5]
type = VelSet
trigger1 = AnimElem = 5
trigger1 = movecontact = 0
x = 13

[State 10010, Hitdef]    ;se prende porta alla testa            
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
attr = S, SA
animtype  = Hard
damage    = 0, 0
getpower  = 0,0
givepower = 0,0
priority  = 3
guardflag = MA
pausetime = 0,50
sparkno = 0
sparkxy = -10,-60
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.hittime  = 20
fall = 0
p1stateno = 10011              ;p1stateno = 10012

[State 10010, Changestate]     ;casomai da rivedere
type = ChangeState
triggerall = moveguarded
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
trigger5 = AnimElem = 5
value = 10011
ctrl = 0

[State 10010, 6]                ;nota: aggiungi alla fine il p1stateno 10011
type = HitDef
trigger1 = AnimElem = 6
attr = S, SA
animtype  = Hard
damage    = 52, 18
getpower  = 15,3
givepower = 15,3
priority  = 4
guardflag = MA
pausetime = 30,35
sparkno = S8018
sparkxy = -3,-64
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 0
p1stateno = 10011

[State 10010, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 8009
id = 8009
sprpriority = 1
pos = 0,12
bindtime = 1
supermovetime = -1
ownpal = 1

;[State 10010, PosAdd]
;type = PosAdd
;trigger1 = AnimTime = 0
;x = 32
;y = 0

[State 10010, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
;Capata Culetto
;DOPPIO PUGNO SUCCESSIVO 
[Statedef 10011]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 100
velset = 0,0
anim = 10011
ctrl = 0
sprpriority = 3


[State 10011, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 10
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 10011, Afterimage]
type = AfterImageTime
trigger1 = AnimElemTime(2) < 25
time = 2

[State 10011, Blink Color]           
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 10010, 1]
type = NotHitBy
trigger1 = AnimElem = 1
value = SCA
time = 8

[State 10010, 2]
type = NotHitBy
trigger1 = AnimElem = 2
value = SCA
time = 25

[State 10011, HitDef]                 ;HitDef del pugno successivo alla capata
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Hard
damage    = 85, 25
getpower  = 25,5
givepower = 20,3
priority  = 7
guardflag = MA
pausetime = 30,32
sparkno = S8018
guard.sparkno = S8060
sparkxy = -2,-68        ;-12,-68
hitsound   = S1100,2                  
guardsound = 6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -22,-6
air.velocity = -20,-6
getpower = 30,10
givepower = 20,5
fall = 1
fall.recover = 0
yaccel = .5
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90

[State 10010, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1021,0
volume = -10

[State 10010, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 8101                  
id = 8101
sprpriority = 3
postype = p1
pos = 125,-68
bindtime = 1
supermovetime = -1
ownpal = 1
scale = .8,.8

;[State 10010, PosAdd]
;type = PosAdd
;trigger1 = AnimTime = 0
;x = 32
;y = 0

[State 10011, Changestate]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

-------------------------------------------------------
;Testata
[Statedef 10012]
type    = S
movetype= A
physics = N
juggle  = 6
poweradd= 100
velset = 0,0
anim = 10012
ctrl = 0
sprpriority = 2

[State 10012, 6]                ;nota: testata che porta al colpo finale
type = HitDef
trigger1 = AnimElem = 1
attr = S, SA
animtype  = Hard
damage    = 52, 18
getpower  = 15,3
givepower = 15,3
priority  = 4
guardflag = MA
pausetime = 30,35
sparkno = S8018
sparkxy = -4,-64
hitsound   = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 13
ground.hittime  = 20
ground.velocity = -8,-3
guard.velocity = -7
air.velocity = -8,-7
airguard.velocity = -5, -4
fall = 0
p1stateno = 10011

[State 10012, Changestate]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------
;PROJ REVERSAL START
[Statedef 10090]
type = S
movetype = A
physics = N
anim = 10090
velset = 0,0
poweradd = 53
ctrl = 0

[State 10090, ProjRev]
type = ReversalDef
reversal.attr = SCA, AP
trigger1 = AnimElem = 2
pausetime = 0,0            
hitsound = S3,6
numhits = 0
priority = 9999
p1stateno = 10091

[State 10090, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA, NP, SP, HP
stateno = 10091
time = 50
slot = 0

[State 10090, Changestate]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------
;Ti Restituisco il favore
[Statedef 10091]
type = S
movetype = A
physics = N
anim = 10091
poweradd = 50
velset = 0,0
ctrl = 0


[State 10091, SE]           ;sine!
type = PlaySnd
trigger1 = AnimElem = 3
value = 10111,0
volume = 100

;[State 10091, SE]            ;sfx del suo parlato (da mettere)
;type = PlaySnd
;trigger1 = AnimElem = 2
;value = 10101, 0

[State 10091, Proj]
type = Projectile
trigger1 = AnimElem = 4
attr = S, SP
projID = 8127
projanim = 8127
projshadow = 68,68,68
projsprpriority = 1
projpriority = 9999
projremove = 0
projremovetime = 47
offset = 50,-65
velocity = 2
ownpal = 1
damage = 260,55
animtype = Hard
hitflag = MFADP
guardflag = MA
pausetime = 0,14
sparkno = 1000
guard.sparkno = S8060
hitsound = s1100,2
guardsound = S200,3
ground.type = high
ground.slidetime = 14
ground.hittime  = 19
air.hittime = 100
ground.velocity = -4,-6
air.velocity = -4,-4
down.velocity = -4
palfx.time = 45
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
fall = 1
getpower = 40,40
givepower = 30,30

[State 10091, Explod]       
type = Explod
trigger1 = ProjHit8127 = 1
anim = 3105
postype = p2
pos = 20,-45
ontop = 1
bindtime = -1
ignorehitpause = 1
ownpal = 1
persistent = 0
pausemovetime = 20
supermove = 1

[State 10091, SE]
type = PlaySnd
trigger1 = ProjHit8127 = 1
value = 1100,2

[State 10091, Afterimage]
type = AfterImage
trigger1 = Time = 0
length = 50
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 2

[State 10091, Afterimage]
type = AfterImageTime
trigger1 = Time = 0
time = 2

[State 10091, Blink Color]           
type = PalFX
trigger1 = Time = 0
time = 20
sinadd = 50,50,50,3

[State 10091, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------
;PRESA SPECIALE
[Statedef 10100]
type    = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 10100
poweradd = 10
sprpriority = 2

[State 19981, SS]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 10100, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-          
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
hitsound   = s800,0
sprpriority = 1
p1stateno = 10101      
p2stateno = 10102            
fall = 1              

[State 10100, CS]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;Presa Speciale - p1 solleva e colpisce
[Statedef 10101]
type    = S
movetype= A
physics = N
anim = 10101
poweradd = 60


[State 10101, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10101, Width]    ;distanza dal bordo
type = Width
trigger1 = 1
edge = 125,10

[State 1020, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = time = 0
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 108

[State 10101, Bind 1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 60, 0

[State 10101, Bind 2]
type = TargetBind
trigger1 = AnimElem >= 2
pos = 68, -140

[State 10101, SE]       ;Kazani!
type = PlaySnd
trigger1 = AnimElem = 2
value = 10101,0
volume = 215

[State 10101, Bind 2]
type = TargetBind
trigger1 = AnimElem = 8
pos = 78, -120

[State 10101, Bind 3]
type = TargetBind
trigger1 = AnimElem = 9
pos = 125, -120

[State 10101, Bind 4]
type = TargetBind
trigger1 = AnimElem = 10
pos = 138, -100

[State 10101, Bind 5]
type = TargetBind
trigger1 = AnimElem = 11
pos = 155, -35

[State 10101, Throw]      ;fa andare il p2 allo state 
type = TargetState
trigger1 = AnimElem = 8
trigger2 = AnimElem = 9
trigger3 = AnimElem = 10
value = 10104

[State 10101, LifeLess]
type = TargetLifeAdd
trigger1 = Time = 17
value = -17

[State 10101, Explod]
type = Explod
trigger1 = Time = 17
anim = 8018
pos = 72,-135
ontop = 1
ownpal = 1

[State 10091, SE]
type = PlaySnd
trigger1 = Time = 15
value = 200,2
volume = -60

[State 180, 2]
type = Explod
trigger1 = AnimElem = 10
anim = 8018
pos = 115,-100
ontop = 1
ownpal = 1

[State 180, 3]
type = EnvShake
trigger1 = AnimElem = 10
time = 16
ampl = -6
freq = 90

[State 10091, SE]
type = PlaySnd
trigger1 = AnimElem = 10
value = 3100,0

[State 811, Explod]
type = Explod
trigger1 = AnimElem = 10, =10
anim = 8104
sprpriority = 5
postype = p1
pos = 125,-100
random = 5,5
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 180, 4]
type = Explod
trigger1 = AnimElem = 10, =10
anim = 3105
pos = 125,-100
postype = p1
ontop = 1
ownpal = 1

[State 10101, HitDef]
type = Hitdef
trigger1 = AnimElem = 11
anim = 10101
attr = A, SA
animtype  = diagup
air.animtype = diagup
fall.animtype = diagup
getpower = 0,0
givepower = 20,10
damage    = 142,25
guardflag = MA
hitflag = MAF
pausetime = 0,5        ;0,12
;sparkno = S3105 
guard.sparkno = S8050
sparkxy = 35,-100          
hitsound   = s1100,2
guardsound =  6,0        
ground.type = Low      ;High
air.type = Low
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -12.5,1      ;-6,0.5      
airguard.velocity = -3.5      
air.velocity = -15.5, -3    ;-2.5,0.5
air.juggle = 3
fall = 1
fall.recover = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
;envshake.time = 16
;envshake.ampl = -6
;envshake.freq = 90
;p2stateno = 10103
;fall.envshake.time = 12
;fall.envshake.ampl = -4
;fall.envshake.freq = 90

[State 10101, Throw]      ;fa andare il p2 allo state in cui volera' dopo esser stato colpito
type = TargetState
trigger1 = AnimElem = 11
value = 10103

[State 10101, PosAdd]
type = PosAdd
trigger1 = AnimTime = 0
x = 55
y = 0

[State 10101, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;lo state in cui va il p2 se preso
[Statedef 10102]
type    = S      ;A
movetype= H
physics = S      ;N
velset = 0,0
ctrl = 0

[State 10101, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 10102, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10102

;[State 2302, 1]
;type = ScreenBound
;Trigger1 = Time >= 0
;value = 1
;movecamera = 0,0

;[State 4003, PosAdd]
;type = PosAdd
;trigger1 = Time = 0
;x = 30
;y = -52

;-----------------------------------------------------
;il p2 vola dopo esser stato colpito
[Statedef 10103]
type    = A
movetype= H
physics = N
velset = 0,0      ;2.8,-7 cordinate del movimento       
poweradd = 40

[State 10102, 1]
type = SelfState
Trigger1 = Time = 0
value = 5030           ;5010

[State 4003, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = 138
y = -100

[State 821, 1] ;Gravity
type = VelAdd
Trigger1 = 1
y = -.4

[State 821, 2] ; Recover near ground (use ChangeState)
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;Hit ground

;-----------------------------------------------------
;lo state in cui va il p2 se preso
[Statedef 10104]
type    = S      ;A
movetype= H
physics = S      ;N
velset = 0,0
ctrl = 0

[State 10102, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 10104

;-----------------------------------------------------
;Stop the piccion
[Statedef 10110]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 10110
ctrl = 0

[State 19981, SS]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 10110, Proj]
type = Projectile
trigger1 = Animelem = 2, =6     ;1, =6
projanim = 10112                ;3110
projhitanim = 3105
projID = 10112
offset = 15, -85
velocity = 25, -12
projremovetime = 30
attr = A, SP
animtype  = diagup
getpower = 8,3
givepower = 20,10
damage    = 88,25
guardflag = MAF
hitflag = MAF
pausetime = 25,15
sparkno = 3
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -2.5,-5.5
;p2stateno = 1025
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 2, =6
anim = 8012
Id = 8012
pos = 57, -118
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
pausemovetime = 150

[State 3100, SE]
type = PlaySnd
trigger1 = AnimElem = 2, =6
value = 1100, 2

[State 3000, EncShake]
type = EnvShake
trigger1 = AnimElem = 2, =6
time = 10
ampl = 6
persistent = 0
ignorehitpause = 1

[State 1020, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 2, =6
time = 10
sinadd = 50,50,50,3

;[State 10110, EnvColor]
;type = EnvColor
;trigger1 = AnimElem = 2
;time = 1
;value = 255,255,255
;under = 1
;ignorehitpause = 1

[State 10110, CS]
type = ChangeState
triggerall = stateno = 10110 & AnimElem = 2, >6
trigger1 = ProjHit10112 = 1, < 30
trigger1 = command = "tondekiwondeki"
trigger1 = power >= 2000
value = 10113
ctrl = 0

[State 10110, CS]
type = ChangeState
triggerall = stateno = 10110 & AnimElem = 2, >6
trigger1 = ProjHit10112 = 1, < 30
trigger1 = command = "killthepiccion"
trigger1 = power >= 1000
value = 10111
ctrl = 0

[State 10110, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;KILL the piccion
[Statedef 10111]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 10111
ctrl = 0
juggle = 0
poweradd = -1000

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 4000
pos = 15, -80
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 4001
pos = 15, -80
postype = p1
supermove = 1
under = 1

[State 3100, SP]
type = SuperPause
trigger1 = AnimElem = 2
time = 60
Movetime = 46
anim = -1

[State 3100, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 700, 1;

;[State 3100, NHB]
;type = NotHitBy
;trigger1 = Time = 1
;value = SCA
;time = 60

[State 3100, SE]           ;sine!
type = PlaySnd
trigger1 = AnimElem = 3
value = 10111,0
volume = 100

[State 3100, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2
ID = 8012

[State 3100, SE]
type = EnvShake
trigger1 = AnimElem = 4
ampl = 8
time = 10      ;30

[State 10111, Proj]
type = Projectile
trigger1 = Animelem = 4
projanim = 10112                
projhitanim = 3105
projID = 10112
offset = 15, -85
velocity = 25, -12
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 3,0
givepower = 20,10
damage    = 300,40
guardflag = MAF
hitflag = MAF
pausetime = 25,15
sparkno = S3102
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -7.5,-7.5    ;-2.5,-5.5
;p2stateno = 1025
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90

[State 10111, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 8080
pos = 57, -113
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermove = 1

[State 10111, Explod]   ;nuvolene sui piedi
type = Explod
trigger1 = AnimElem = 4
anim = 8120            ;forse 8003
pos = -20, 0
postype = p1
sprpriority = -1
bindtime = 1
ownpal = 1
ontop = 1

[State 10111, SE]
type = PlaySnd
trigger1 = AnimElem = 4
value = 1100, 2

[State 10111, EncShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 10
ampl = 6
persistent = 0
ignorehitpause = 1

[State 10111, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 4
time = 35
sinadd = 50,50,50,3

[State 10111, EnvShake]
type = EnvShake
trigger1 = projHit10112 = 1
time = 15
ampl = 8
persistent = 0
ignorehitpause = 1

;[State 10111, EnvColor]
;type = EnvColor
;trigger1 = AnimElem = 1
;time = 1
;value = 255,255,255
;under = 1
;ignorehitpause = 1

[State 10111, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------
;-TONDEKIWONDEKI (super a due)
[Statedef 10113]
type    = S
movetype= A
physics = S
velset = 0,0
anim = 10113
ctrl = 0
juggle = 0
poweradd = -2000

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 4003
pos = 15, -80
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 4002
pos = 15, -80
postype = p1
supermove = 1
under = 1

[State 10170, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1, = 7
time = 61                   
value = 0,0,0
under = 1

[State 10113, SP]
type = SuperPause
trigger1 = AnimElem = 2
time = 60
Movetime = 46
anim = -1

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000, 1;

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 3       ;tondeki
value = 10113,0
volume = 100

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 22      ;wondeki
value = 10113,1
volume = 100

[State 10113, BGPALFX]
type = BGPalFX
trigger1 = AnimElemTime(2) > 0         
trigger1 = AnimElemTime(28) < 6
time = 15
invertall = 1
value = 0
ignorehitpause = 1
scale = 1.08, 1.08

[State 10113, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 700, 1;

[State 3100, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 2
ID = 8012

[State 3100, SE]
type = EnvShake
trigger1 = AnimElem = 4
trigger2 = AnimElem = 23
ampl = 8
time = 10      ;30

[State 10113, Proj]
type = Projectile
trigger1 = Animelem = 4
projanim = 10112                
projhitanim = 3105
projID = 10112
offset = 15, -85
velocity = 25, -12
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 3,0
givepower = 20,10
damage    = 350,40
guardflag = MAF
hitflag = MAF
pausetime = 25,105            ;25,15
sparkno = S3102
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -7.5,-7.5    ;-2.5,-5.5
;p2stateno = 1025
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90

[State 10113, Proj]
type = Projectile
trigger1 = Animelem = 23
projanim = 10112                
projhitanim = 3105
projID = 10112
offset = 15, -85
velocity = 25, -12
projremovetime = 30
attr = A, HP
animtype  = diagup
getpower = 3,0
givepower = 20,10
damage    = 405,40
guardflag = MAF
hitflag = MAF
pausetime = 25,15
sparkno = S3102
guard.sparkno = 42
sparkxy = 20, 0
hitsound   = s3100,0
guardsound = 6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8,-5.5 
air.velocity = -7.5,-7.5    ;-2.5,-5.5
;p2stateno = 1025
fall = 1
palfx.time = 60
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
envshake.time = 16
envshake.ampl = -6
envshake.freq = 90

[State 10113, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 8080
pos = 57, -113
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermove = 1

[State 10113, Explod2]
type = Explod
trigger1 = AnimElem = 23
anim = 8080
pos = 60, -108
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermove = 1

[State 10113, Explod]   ;nuvolene sui piedi
type = Explod
trigger1 = AnimElem = 4
trigger2 = AnimElem = 23
anim = 8120            ;forse 8003
pos = -20, 0
postype = p1
sprpriority = -1
bindtime = 1
ownpal = 1
ontop = 1

[State 10111, SE]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 23
value = 1100, 2

[State 10111, EncShake]
type = EnvShake
trigger1 = AnimElem = 4
trigger2 = AnimElem = 23
time = 10
ampl = 6
persistent = 0
ignorehitpause = 1

[State 10111, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 4
trigger2 = AnimElem = 23
time = 35
sinadd = 50,50,50,3

[State 10111, EnvShake]
type = EnvShake
trigger1 = projHit10112 = 1
time = 15
ampl = 8
persistent = 0
ignorehitpause = 1


[State 10111, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------
;RAINONME (super a uno)
[Statedef 10130]
type = A
movetype = A
physics = A
poweradd = -1000
juggle  = 0
anim = 10130
ctrl = 0

[State 10130, SP]
type = SuperPause
trigger1 = AnimElem = 1
time = 24
;Movetime = 24
anim = -1

[State 10130, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4000
pos = -16, -100
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 10130, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4001
pos = -16, -100
postype = p1
supermove = 1
under = 1

[State 10130, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 700, 1;

[State 3100, NHB]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 60

[State 10130, SE]
type = EnvShake
trigger1 = AnimElem = 1
ampl = 8
time = 30

[State 10130, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 1
time = 25
sinadd = 50,50,50,3

[State 1020, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = AnimElem = 1
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 30

[State 10130, HitDef]
type = HitDef
trigger1 = Time = 0           ;AnimElem = 5
attr = A, HT
animtype = Back
damage = 10
guardflag = M
pausetime = 10,0
kill = 0
sparkno = S8018
guard.sparkno = S8060
sparkxy = -10,-70
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = 0,7.5    
air.velocity = 0,7.5      ;-7.5,-2.5
fall = 1
p2facing = 1
p1stateno = 10135
p2stateno = 10131

[State 10130, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 10130,0
volume = 200 


[State 10130, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------
;rainonme - primo subimento del p2
[Statedef 10131]
type = A
movetype = H
velset = 0,0
ctrl = 0

[State 10131, ChangeAnim]
type = ChangeAnim
trigger1 = alive = 1 && time = 0
value = 5050


[State 10131, Gravity]
type = Veladd
trigger1 = time >= 0
y = 1

[State 10131, CG]
type = ChangeState
trigger1 = Pos Y >= 0
value = 10132
ctrl = 0

;-------------------------------------------------------------
;rainonme - p2 a terra
[Statedef 10132]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10132

[State 10132, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10132, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 11000, 0

[State 10132, PosAdd]
type = posadd
trigger1 = time = 0
x = 15
y = 0

[State 10132, LA]       ;quanto energia togliere a p2
type = lifeadd
trigger1 = time = 0
value = -20
kill = 0

[State 10132, VelSet]
type = Velset
trigger1 = time = 0
y = 0

[State 10132, CA2]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10132
ID = 10132

[State 10132, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10132, EnvShake]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -9
freq = 100
phase = 10

[State 10131, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10133
ctrl = 0

;-------------------------------------------------------------
;rainonme - p2 rinculo
[Statedef 10133]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10133

[State 10133, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10133, PosAdd]
type = posadd
trigger1 = time = 0
x = 15
y = 0

[State 10133, CA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10133
ID = 10133

[State 10133, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10131, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10134
ctrl = 0

;-------------------------------------------------------------
;rainonme - p2 di nuovo a terra dopo il rinculo
[Statedef 10134]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10134

[State 10134, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10134, PosAdd]
type = posadd
trigger1 = time = 0
x = 15
y = 0

[State 10134, VelSet]
type = Velset
trigger1 = time = 0
y = 0

[State 10134, ChA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10134
ID = 10134

[State 10134, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10134, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10139
ctrl = 0

;-------------------------------------------------------------
;rainonme - inzio dei colpi in aria
[Statedef 10135]
type = A
movetype = A
physics = A
anim = 10135
velset = -1,-6
ctrl = 0

[State 10130, PosFreeze]
type = PosFreeze
trigger1 = time >=15                   ;time = [0,28]
value = 1

[State 3303, Schermo Bianco]
type = EnvColor
trigger1 = Time = 0
time = 2
value = 246,246,246

[State 10135, VelAdd]
type = Veladd
trigger1 = time = 29
Y = .25

[State 10135, PosAdd]         ;col posfreeze questo purtroppo non funziona
type = Posadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
y = -10                        ;y = -15

[State 10135, SE]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
value = 1100, 2

[State 10135, Explod]        ;spari dalle mani
type = Explod
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
anim = 10143
pos = 36, -8
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1
ontop = 1
scale = .8, .8

[State 3150, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 3107
pos = 0, -5
postype = p2
random = 5,-5
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1
supermovetime = 1
scale = .7, .7

[State 3165, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 3105
pos = 0, -5
postype = p2
random = 5,-5
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 1
scale = .7, .7

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
anim = 8003
id = 8003
sprpriority = 2
postype = p2
pos = -5, 2
bindtime = -1
supermovetime = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
anim = 10142
id = 10142
sprpriority = 2
postype = p2
pos = 5, 2
bindtime = -1
supermovetime = 1

[State 10135, VelAdd]
type = Veladd
trigger1 = time = 5            ;trigger1 = time >= 0
trigger1 = P2Dist X < 0
X = -.12

[State 10135, VelAdd]
type = Veladd
trigger1 = time = 5
trigger1 = P2Dist X > 0
X = .12

[State 10135, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
persistent = 0
time = 6
ampl = 15
freq = 200
;phase = 10

[State 10135, EnvShake]
type = EnvShake
trigger1 = AnimElem = 6
persistent = 0
time = 7
ampl = -15
freq = 200
;phase = 10

[State 10135, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 10136
ctrl = 0

;-------------------------------------------------------------
;rainonme - ubu si carica in aria
[Statedef 10136]
type = A
movetype = A
physics = A
anim = 10136
velset = -1,-1
ctrl = 0

[State 10130, PosFreeze]
type = PosFreeze
trigger1 = time >=0                    ;time = [0,28]
value = 1

[State 10136, SP]
type = SuperPause
trigger1 = AnimElem = 2
time = 52
anim = -1

[State 3160, Explod]            ;botto rosso sulla mano
type = Explod
trigger1 = AnimElem = 2
anim = 3161
ID = 3161
pos = 10, -142
postype = p1
facing = 1
bindtime = -1
vel = 0, 0
supermove = 1
sprpriority = -5
ontop = 1
scale = .9, .9

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000,0
volume = 200

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3000, 1


[State 10136, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 10137
ctrl = 0

;-------------------------------------------------------------
;rainonme - ubu si butta per colpire a terra
[Statedef 10137]
type = A
movetype = I
physics = N
anim = 10137
velset = -1,15            ;0,15
ctrl = 0

;[State 10137, PosAdd]
;type = VelMul
;trigger1 = AnimElem = 1
;Y = .8                    

;[State 10130, PosFreeze]
;type = PosFreeze
;trigger1 = time >=0                   ;time = [0,28]
;value = 1

;[State 10135, Add]
;type = Veladd
;trigger1 = Time > 0
;trigger1 = Pos Y != 0
;Y = .08 

[State 10137, SE]                    ;shimeteohotoi
type = PlaySnd
trigger1 = AnimElem = 1
value = 10137,0

[State 10137, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 1
time = 25
sinadd = 50,50,50,3

[State 1037, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = AnimElem = 1
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 30


[State 10137, CS]
type = ChangeState
trigger1 = Pos Y >= 0 ;           && vel y > 0
value = 10138
ctrl = 0

;-------------------------------------------------------------
;rainonme - ubu colpisce a terra
[Statedef 10138]
type = S
movetype = I
physics = S
anim = 10138
velset = 0,0
ctrl = 0

[State 10138, polverone]        ;FULMINE!
type = Explod
trigger1 = Time = 0      
anim = 8011  
postype = p1
pos = 0, 0                
supermove = 1
sprpriority = -4
ownpal = 1
shadow = -1

[State 10138, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 3303, polverone]        ;polverone per terra
type = Explod
trigger1 = Time = 0       
anim = 8120  
postype = p1
pos = -8, 0                
supermove = 1
sprpriority = -3
ownpal = 1
ontop = 1
shadow = -1
scale = .7, .7

[State 3303, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = Time = 0       
anim = 8120  
postype = p1
pos = 8, 0                 
supermove = 1
sprpriority = -3
facing = -1
ownpal = 1
shadow = -1
ontop = 1
scale = .7, .7

[State 10138, PLP]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 10138, EnvShake]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 25
ampl = 18
freq = 200
;phase = 10

[State 10138, PosAdd]
type = PosAdd
trigger1 = AnimTime = 0
x = -22
y = -1

[State 10138, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 3
time = 2
value = 246,246,246

[State 10138, Explod]           ;esplosione totale quando p1 colpisce
type = Explod
trigger1 = AnimElem = 3, =1
anim = 3102
pos = 0, -5
postype = p2
random = 5,-5
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 1

[State 3165, Explod]
type = Explod
trigger1 = AnimElem = 3, =1
anim = 3105
pos = 20, -5
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 1
scale = .7, .7

[State 10130, Explod]
type = Explod
trigger1 = AnimElem = 3, =1
anim = 8007
pos = 30, -5
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 1

[State 3160, SE]          
type = PlaySnd
trigger1 = Animelem = 3
value = 10138, 0;
volume = 215

[State 3160, SE]          
type = PlaySnd
trigger1 = Animelem = 3, =1
value = 3100, 0;
volume = 60

[State 10138, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------
;rainonme - p2 rinculo per i colpi subiti in aria
[Statedef 10139]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10139

[State 10139, PalFX]
type = PalFX
trigger1 = time = [0,27]
time = 1
add = 40,-70,-200
sinadd = 40,30,0,10
color = 0
invertall = 1

[State 10141, LA]
type = LifeAdd
trigger1 = Time = 0
trigger2 = Time = 15
kill = 0
value = -40

[State 10139, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10139, CA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10139
ID = 10139

[State 10139, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10139, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10140
ctrl = 0
;-----------------------------------------------------------

;rainonme - p2 di nuovo a terra dopo il rinculo dei colpi in aria
[Statedef 10140]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10140


[State 10140, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10140, VelSet]
type = Velset
trigger1 = time = 0
y = 0

[State 10140, ChA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10140
ID = 10140

[State 10140, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10140, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10141
ctrl = 0

;-------------------------------------------------------------
;rainonme - p2 subisce il pugnone
[Statedef 10141]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10141

[State 10141, LA]
type = LifeAdd
trigger1 = Time = 0
value = -280

[State 10141, PLP]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 10141, PalFX]
type = PalFX
trigger1 = time >= 0
time = 1
add = 40,-70,-200
sinadd = 40,30,0,10
color = 0
invertall = 1

[State 10141, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10141, CA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10141
ID = 10141

[State 10141, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10141, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 5110
ctrl = 1

;-----------------------------------------------------------------
;RAINONME MAX (super a due)
[Statedef 10150]
type = A
movetype = A
physics = A
poweradd = -2000
anim = 10130
juggle  = 0
ctrl = 0

[State 3160, BGPALFX]
type = BGPalFX
trigger1 = AnimElem = 3
time = 190
invertall = 1
value = 0
ignorehitpause = 1

[State 10170, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 1
time = 25                   
value = 0,0,0
under = 1

[State 10150, SP]
type = SuperPause
trigger1 = AnimElem = 2
time = 24
;Movetime = 24
anim = -1

[State 10130, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4003
pos = -16, -100
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 10150, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 4002
pos = -16, -100
postype = p1
supermove = 1
under = 1

[State 10150, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000, 1;

[State 3100, NHB]
type = NotHitBy
trigger1 = time = 1
value = SCA
time = 60

[State 10150, SE]
type = EnvShake
trigger1 = AnimElem = 1
ampl = 8
time = 30

[State 10150, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 1
time = 25
sinadd = 50,50,50,3

[State 1020, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = AnimElem = 1
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 30


[State 10150, HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, HT
animtype = Back
damage = 10
guardflag = M
pausetime = 10,0
kill = 0
sparkno = S8018
guard.sparkno = S8060
sparkxy = -10,-70
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = 0,7.5    
air.velocity = 0,7.5      ;-7.5,-2.5
fall = 1
p2facing = 1
p1stateno = 10155
p2stateno = 10151

[State 10150, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 10130,0
volume = 200 


[State 10150, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------
;rainonme MAX - inzio dei colpi in aria (tantissimi colpi)
[Statedef 10155]
type = A
movetype = A
physics = A
anim = 10155
velset = -1,-6
ctrl = 0

[State 10150, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 10
trigger4 = AnimElem = 13
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 27
time = 1       ;25
sinadd = 50,50,50,3

[State 1020, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = AnimElem = 1
length = 13
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 64    ;30

[State 10130, PosFreeze]
type = PosFreeze
trigger1 = time >=15                   ;time = [0,28]
value = 1


[State 3303, Schermo Bianco]
type = EnvColor
trigger1 = Time = 0
time = 2
value = 246,246,246

[State 10135, VelAdd]
type = Veladd
trigger1 = time = 29
Y = .25

[State 10135, PosAdd]         ;col posfreeze questo purtroppo non funziona
type = Posadd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
y = -10                        ;y = -15

[State 10135, SE]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 10
trigger4 = AnimElem = 13
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 27
value = 1100, 2

[State 10135, Explod]        ;spari dalle mani
type = Explod
trigger1 = AnimElem = 3
trigger2 = AnimElem = 6
trigger3 = AnimElem = 10
trigger4 = AnimElem = 13
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 24
trigger8 = AnimElem = 27
anim = 10143
pos = 36, -8
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1
ontop = 1
scale = .8, .8

[State 3150, Explod]
type = Explod
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
trigger3 = AnimElem = 17
trigger4 = AnimElem = 24
anim = 3107
pos = 0, -5
postype = p2
random = 5,-5
sprpriority = 2
bindtime = -1
ownpal = 1
ontop = 1
supermovetime = 1
scale = .7, .7

[State 3165, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 20
trigger4 = AnimElem = 27
anim = 3105
pos = 0, -5
postype = p2
random = 5,-5
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 1
scale = .7, .7

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 20
trigger4 = AnimElem = 27
anim = 8003
id = 8003
sprpriority = 2
postype = p2
pos = -5, 2
bindtime = -1
supermovetime = 1

[State 1000, Explod]
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 20
trigger4 = AnimElem = 27
anim = 10142
id = 10142
sprpriority = 2
postype = p2
pos = 5, 2
bindtime = -1
supermovetime = 1

[State 10135, VelAdd]
type = Veladd
trigger1 = time = 5            ;trigger1 = time >= 0
trigger1 = P2Dist X < 0
X = -.12

[State 10135, VelAdd]
type = Veladd
trigger1 = time = 5
trigger1 = P2Dist X > 0
X = .12

[State 10135, EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
trigger3 = AnimElem = 17
trigger4 = AnimElem = 24
;persistent = 0
time = 6
ampl = 15
freq = 200
;phase = 10

[State 10135, EnvShake]
type = EnvShake
trigger1 = AnimElem = 6
trigger2 = AnimElem = 13
trigger3 = AnimElem = 20
trigger4 = AnimElem = 27
;persistent = 0
time = 7
ampl = -15
freq = 200
;phase = 10


[State 10135, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 10156
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - ubu si carica in aria al massimo
[Statedef 10156]
type = A
movetype = A
physics = A
anim = 10156
velset = -1,-1
ctrl = 0

[State 10130, PosFreeze]
type = PosFreeze
trigger1 = time >=0                    ;time = [0,28]
value = 1

;[State 10136, SP]
;type = SuperPause
;trigger1 = AnimElem = 2
;time = 52
;anim = -1

[State 3160, Explod]            ;cerchio concentrico
type = Explod
trigger1 = AnimElem = 2
anim = 8006
ID = 8006
pos = 10, -142
postype = p1
facing = 1
bindtime = -1
vel = 0, 0
supermove = 1
sprpriority = -5
ontop = 1
;scale = .9, .9

[State 3160, Explod]            ;bottino
type = Explod
trigger1 = AnimElem = 2, = 10
anim = 8012
ID = 8012
pos = 10, -142
postype = p1
facing = 1
bindtime = -1
vel = 0, 0
supermove = 1
sprpriority = -5
ontop = 1

;[State 3160, SE]
;type = PlaySnd
;trigger1 = AnimElem = 2
;value = 3000,0
;volume = 200

[State 3160, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 700, 1


[State 10136, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 10157
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - ubu si butta per colpire a terra (prima pugno e poi calcio)
[Statedef 10157]
type = A
movetype = I
physics = N
anim = 10157
velset = -1,15            ;0,15
ctrl = 0


[State 10137, SE]                    ;shimeteohotoi
type = PlaySnd
trigger1 = AnimElem = 1
value = 10137,0

[State 3300, Blink Color]            ;da scegliere il colore se nero, giallo o altri
type = PalFX
trigger1 = AnimElem = 1
time = 25
sinadd = 50,50,50,8                   ;cosi' si colora (grigio) e lascia una scia nera

;[State 10137, Blink]  ;si colora bello chiaro
;type = PalFX
;trigger1 = AnimElem = 1
;time = 25
;sinadd = 50,50,50,3

[State 1037, Afterimage]   ;la solita scia
type = AfterImage
trigger1 = AnimElem = 1
length = 25
PalBright   =  30, 30,  0
PalContrast =  70, 70, 20
TimeGap  = 1
FrameGap = 2
Trans = sub
time = 30


[State 10137, CS]
type = ChangeState
trigger1 = Pos Y >= 0 ;           && vel y > 0
value = 10158
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - ubu colpisce a terra (col pugno)
[Statedef 10158]
type = S
movetype = I
physics = S
anim = 10158
velset = 0,0
ctrl = 0

[State 10138, polverone]        ;FULMINE!
type = Explod
trigger1 = Time = 0      
anim = 8011  
postype = p1
pos = 0, 0                
supermove = 1
sprpriority = -4
ownpal = 1
shadow = -1

[State 10138, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 3303, polverone]        ;polverone per terra
type = Explod
trigger1 = Time = 0       
anim = 8120  
postype = p1
pos = -8, 0                
supermove = 1
sprpriority = -3
ownpal = 1
ontop = 1
shadow = -1
scale = .7, .7

[State 3303, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = Time = 0       
anim = 8120  
postype = p1
pos = 8, 0                 
supermove = 1
sprpriority = -3
facing = -1
ownpal = 1
shadow = -1
ontop = 1
scale = .7, .7

[State 10138, PLP]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 10138, EnvShake]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 25
ampl = 18
freq = 200
;phase = 10

;[State 10138, PosAdd]
;type = PosAdd
;trigger1 = AnimTime = 0
;x = -22
;y = -1

[State 10138, Schermo Bianco]
type = EnvColor
trigger1 = AnimElem = 3
time = 2
value = 246,246,246


;[State 3165, Explod]
;type = Explod
;trigger1 = AnimElem = 3, =1
;anim = 3105
;pos = 20, -5
;postype = p1
;sprpriority = 2
;bindtime = 1
;ownpal = 1
;ontop = 1
;supermovetime = 1
;scale = .7, .7

[State 10130, Explod]
type = Explod
trigger1 = AnimElem = 3, =1
anim = 8007
pos = 30, -5
postype = p1
sprpriority = 2
bindtime = 1
ownpal = 1
ontop = 1
supermovetime = 1

[State 3160, SE]          
type = PlaySnd
trigger1 = Animelem = 3
value = 10138, 0;
volume = 215

[State 10138, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 10170
ctrl = 1

;----------------------------------------------------------------
;rainonme MAX - ubu colpisce a terra (PEDATA)
[Statedef 10170]
type = S
movetype = I
physics = S
anim = 10170
velset = 0,0
ctrl = 0

[State 3160, BGPALFX]
type = BGPalFX
trigger1 = AnimElem = 3
time = 24
invertall = 1
value = 0
ignorehitpause = 1

[State 10170, Schermo Nero]
type = EnvColor
trigger1 = AnimElem = 3
time = 23                  
value = 0,0,0
under = 1

[State 10150, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3000, 1;

[State 10130, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 4003
pos = 20, -50
postype = p1
supermove = 1
sprpriority = 2
bindtime = 1

[State 10130, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 4002
pos = 20, -50
postype = p1
supermove = 1
under = 1


[State 10170, SP]
type = SuperPause
trigger1 = AnimElem = 3, =1
time = 14
anim = -1

[State 3160, BGPALFX]
type = BGPalFX
trigger1 = Time = 15
time = 100
invertall = 1
value = 0
ignorehitpause = 1

[State 10150, SE]         ; sine!
type = PlaySnd
trigger1 = AnimElem = 3, =10
value = 10111, 0;

[State 10110, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10110, EnvShake]
type = EnvShake
trigger1 = AnimElem = 9, =3
time = 35
ampl = 30
freq = 80
;phase = 10

[State 10150, SE]
type = PlaySnd
trigger1 = AnimElem = 9
value = 10130, 0;

[State 3160, SE]                ;espl. alla pedata          
type = PlaySnd
trigger1 = Animelem = 9
value = 3100, 0;
volume = 60

[State 3303, polverone]        ;polverone per terra
type = Explod
trigger1 = AnimElem = 9      
anim = 8120  
postype = p1
pos = 12, 0                
supermove = 1
sprpriority = 7
ownpal = 1
ontop = 1
shadow = -1
scale = 1.5, 1

[State 3303, polverone]        ;polverone per terra (opposto)
type = Explod
trigger1 = AnimElem = 9      
anim = 8120  
postype = p1
pos = 28, 0                 
supermove = 1
sprpriority = 7
facing = -1
ownpal = 1
shadow = -1
ontop = 1
scale = 1.5, 1

[State 10170, Explod]           ;esplosione totale quando p1 colpisce
type = Explod
trigger1 = AnimElem = 9
anim = 14592
pos = 16, 0
postype = p1
sprpriority = 5
bindtime = 1
ownpal = 1
supermovetime = 1

[State 10170, Schermo bianco]
type = EnvColor
trigger1 = AnimElem = 9, =3
time = 2                   
value = 250,250,250
under = 1

[State 3160, BGPALFX]
type = BGPalFX
trigger1 = AnimElem = 9, =5
time = 50
invertall = 1
value = 0
ignorehitpause = 1


;[State 10170, Schermo Nero]
;type = EnvColor
;trigger1 = AnimElem = 9, =5
;time = 190                   
;value = 0,0,0
;under = 1

;[State 10110, PosAdd]
;type = PosAdd
;trigger1 = AnimTime = 0
;x = -22
;y = -1

[State 10110, CS]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------
;rainonme MAX - primo subimento del p2
[Statedef 10151]
type = A
movetype = H
velset = 0,0
ctrl = 0

[State 10151, ChangeAnim]
type = ChangeAnim
trigger1 = alive = 1 && time = 0
value = 5050


[State 10131, Gravity]
type = Veladd
trigger1 = time >= 0
y = 1

[State 10131, CG]
type = ChangeState
trigger1 = Pos Y >= 0
value = 10152
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - p2 a terra
[Statedef 10152]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10152

[State 10152, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10132, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 11000, 0

[State 10132, PosAdd]
type = posadd
trigger1 = time = 0
x = 15
y = 0

[State 10132, LA]       ;quanto energia togliere a p2
type = lifeadd
trigger1 = time = 0
value = -20
kill = 0

[State 10132, VelSet]
type = Velset
trigger1 = time = 0
y = 0

[State 10132, CA2]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10132
ID = 10132

[State 10132, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10132, EnvShake]
type = EnvShake
trigger1 = time = 0
persistent = 0
time = 20
ampl = -9
freq = 100
phase = 10

[State 10131, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10153
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - p2 rinculo
[Statedef 10153]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10153

[State 10133, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10133, PosAdd]
type = posadd
trigger1 = time = 0
x = 15
y = 0

[State 10133, CA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10133
ID = 10133

[State 10133, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10131, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10154
ctrl = 0

;-------------------------------------------------------------
;rainonme - p2 di nuovo a terra dopo il rinculo
[Statedef 10154]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10154

[State 10134, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10134, PosAdd]
type = posadd
trigger1 = time = 0
x = 15
y = 0

[State 10134, VelSet]
type = Velset
trigger1 = time = 0
y = 0

[State 10134, ChA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10134
ID = 10134

[State 10134, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10134, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10159
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - p2 rinculo per i colpi subiti in aria
[Statedef 10159]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10159

[State 10139, PalFX]
type = PalFX
trigger1 = time = [0,58]
time = 1
add = 40,-70,-200
sinadd = 40,30,0,10
color = 0
invertall = 1

[State 10141, LA]
type = LifeAdd
trigger1 = Time = 0
trigger2 = Time = 15
kill = 0
value = -40

[State 10139, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10139, CA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10159
ID = 10159

[State 10159, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10159, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10160
ctrl = 0
;-----------------------------------------------------------

;rainonme MAX - p2 di nuovo a terra dopo il rinculo dei colpi in aria
[Statedef 10160]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10160


[State 10140, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10140, VelSet]
type = Velset
trigger1 = time = 0
y = 0

[State 10140, ChA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10160
ID = 10160

[State 10140, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10160, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10162
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - p2 subisce il pugnone
[Statedef 10162]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10162

[State 10141, LA]
type = LifeAdd
trigger1 = Time = 0
value = -180

[State 10141, PLP]
type = PlayerPush
trigger1 = Time >= 0
value = 0

;[State 10141, PalFX]
;type = PalFX
;trigger1 = time >= 0
;time = 1
;add = 40,-70,-200
;sinadd = 40,30,0,10
;color = 0
;invertall = 1

[State 10141, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10141, CA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10162
ID = 10162

[State 10162, PosSet]
type = posset
trigger1 = time = 0
Y = 0

[State 10160, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 10163
ctrl = 0

;-------------------------------------------------------------
;rainonme MAX - p2 subisce Pedata
[Statedef 10163]
type = L
movetype = H
physics = C
velset = 0,0
ctrl = 0
ID = 10162

[State 10163, LifeLess]
type = LifeAdd
trigger1 = time = 95
value = -400
kill = 1

[State 10163, PLP]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 10141, PalFX]
type = PalFX
trigger1 = AnimElem = 2
time = 120
add = 40,-70,-200
sinadd = 40,30,0,10
color = 0
invertall = 1

[State 10163, CA]
type = ChangeAnim2
trigger1 = alive = 1 && time = 0
value = 10163
ID = 10163

[State 10141, NHB]
type = NotHitBy
trigger1 = time >= 0
value = SCA, NP, SP
time = 1

[State 10163, PosSet]
type = posset
trigger1 = time = 0
Y = 0


[State 10163, SelfState]
type = SelfState
trigger1 = AnimTime = 0
value = 5110
ctrl = 1

;=============================================================================================
;--MOSSE VS--
;-UBUFISTINO (Ubu vs Ubu)
[Statedef 19900]
type = S
movetype = A
physics = S
anim = 19900
velset = 0, 0
ctrl = 0

[State 17000, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19901    
p2stateno = 19910  
;mindist = -50
;maxdist = -100      
fall = 1

[State 19901, SE]
type = PlaySnd
trigger1 = Time = 0
value = 10111, 0;

[State 19900, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;UBUFISTINO continuazione pugni p1
[Statedef 19901]
type = S
movetype = A
physics = S
anim = 19901
velset = 0, 0
sprpriority = 4
ctrl = 0

[State 19901, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 19900, 0;          VS a uno

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 6
value = 11000, 0;
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 10
trigger2 = AnimElem = 13
value = 1100, 2;

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 21
value = 10130, 0;
volume = 200

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 21
value = 1000

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 13
trigger4 = AnimElem = 21
value = -20
kill = 0
absolute = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 16011
persist = 0
sprpriority = 5
postype = p1
pos = -30,-120
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 19901, Width]
type = Width
trigger1 = 1
edge = 80

[State 19901, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -40

[State 19901, PosAdd]
type = PosAdd
trigger1 = AnimElem = 18
x = 15

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 6
anim = 8005
persist = 0
sprpriority = 5
postype = p1
pos = 45,-90
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 8018
persist = 0
sprpriority = 5
postype = p1
pos = 50,-75
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 13
anim = 8018
persist = 0
sprpriority = 5
postype = p1
pos = 47,-70
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 3105
persist = 0
sprpriority = 5
postype = p1
pos = 50,-75
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 13
anim = 3107
persist = 0
sprpriority = 5
postype = p1
pos = 50,-75
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1


[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 19
anim = 8018
persist = 0
sprpriority = 6
postype = p1
pos = 60,-85
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 19
anim = 8005
persist = 0
sprpriority = 5
postype = p1
pos = 50,-95
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 19
anim = 8007
persist = 0
sprpriority = 5
postype = p1
pos = 70,-85
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 180, 3]
type = EnvShake
trigger1 = AnimElem = 6
time = 8
ampl = -11
freq = 120

[State 180, 3]
type = EnvShake
trigger1 = AnimElem = 10
trigger2 = AnimElem = 13
time = 6
ampl = -8
freq = 120

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 19
time = 18
ampl = -18
freq = 165

[State 19900, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 105                 ;p1 va al salto all'indietro
ctrl = 0

;-------------------------------------------
;Ubufistino continuazione pugni p2 
[Statedef 19910]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 3
anim = 19910

[State 19010, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 16011
persist = 0
sprpriority = 5
postype = p1
pos = -60,-65
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 20
value = 1000

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 20
value = -20
kill = 0
absolute = 1

[State 19910, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -40

[State 19901, Width]
type = Width
trigger1 = 1
edge = 80

[State 19910, PosAdd]
type = PosAdd
trigger1 = AnimElem = 17
x = 15

[State 19910, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 19910, VS]
type = VarSet
trigger1 = AnimTime = 0 
var(7) = 0

[State 19910, 1]
type = SelfState
trigger1 = AnimTime = 0
value = 105         ;p2 va al salto all'indietro
ctrl = 1

;----------------------------------------------
;-Adore (Ubu vs Kuando)
[Statedef 19920]
type = S
movetype = A
physics = S
anim = 19920
velset = 0, 0
ctrl = 0

[State 19920, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19921 
p2stateno = 19925 
;mindist = -50
;maxdist = -100      
fall = 1

[State 180, 4]
type = EnvShake
trigger1 = Time = 0
time = 3
ampl = -4
freq = 165

[State 19920, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Adore (Ubu vs Kuando) continuazione p1
[Statedef 19921]
type = S
movetype = A
physics = S
anim = 19921
velset = 0, 0
sprpriority = 4
ctrl = 0

[State 19921, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19921, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 19900, 0; 

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3100, 2; 

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 6
value = 11005,0
volume = 100
loop = 1
channel = 3

[State 19901, SE]
type = StopSnd
trigger1 = AnimElem = 33
channel = 3

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 28
value = 41, 1 

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 33
value = 3100, 0 

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 39
value = 5000, 3

[State 19021, Explod]      ; Esplodino per UBu
type = Explod
trigger1 = AnimElem = 2
anim = 16011
persist = 0
sprpriority = 5
postype = p1
pos = 0,-90
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 39
value = 1000

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 39
value = -80
kill = 0
absolute = 1

;[State 19921, Width]
;type = Width
;trigger1 = 1
;edge = 85

;[State 19921, TB]
;type = TargetBind
;trigger1 = 1
;time = 1
;ID = 19925

[State 19921, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -9

;[State 19921, PosAdd]
;type = PosAdd
;trigger1 = AnimElem = 18
;x = 15

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 9
time = 40
ampl = -3
freq = 180

[State 19021, Explod]
type = Explod
trigger1 = AnimElem = 34
anim = 3102
persist = 0
sprpriority = 5
postype = p1
pos = 65,-70
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 34
time = 18
ampl = -18
freq = 165

[State 210, EnvColor]
type = EnvColor
trigger1 = AnimElem = 34
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 19921, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0                ;Ubu si rialza
ctrl = 1

;---------------------------------------------
;Adore (Ubu vs Kuando)Kuando subisce 
[Statedef 19925]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 3
anim = 19925
;ID = 19925

[State 19925, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 19921, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 19925, VS]
type = VarSet
trigger1 = AnimTime = 0 
var(7) = 0

[State 19925, 1]
type = SelfState
trigger1 = Time = 0
value = 19925       ;Kuando va alla sua anim
ctrl = 0


;---------------------------------------------------
;-Ti Tillo (Ubu vs Ella)
[Statedef 19930]
type = S
movetype = A
physics = S
anim = 19920
velset = 0, 0
ctrl = 0

[State 19930, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19931 
p2stateno = 19935 
;mindist = -50
;maxdist = -100      
fall = 1

[State 19930, 4]
type = EnvShake
trigger1 = Time = 0
time = 3
ampl = -4
freq = 165

[State 19930, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Ti Tillo (Ubu vs Ella) continuazione p1
[Statedef 19931]
type = S
movetype = A
physics = S
anim = 19931
velset = 0, 0
sprpriority = 4
ctrl = 0

[State 19931, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 19945, VS]
type = VarSet
trigger1 = 1
var(7) = 0

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 19900, 0; 

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 7
value = 11000, 0
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 12
value = 11001, 0
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 17
value = 11002, 0
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 32
value = 1100, 2
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 33
value = 1100, 2
volume = 255

[State 19901, SE]
type = PlaySnd
trigger1 = AnimElem = 34
trigger2 = AnimElem = 38
value = 200, 2
volume = 120

[State 19031, Explod]  ;Esplodino per UBu
type = Explod
trigger1 = AnimElem = 3
anim = 16011
persist = 0
sprpriority = 5
postype = p1
pos = -5,-105
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 32
trigger2 = AnimElem = 37
value = 500

[State 180, 3]
type = LifeAdd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 12
trigger3 = AnimElem = 17
value = -25
kill = 0
absolute = 1

[State 19931, Width]
type = Width
trigger1 = 1
edge = 60

[State 19931, PosAdd]
type = PosAdd
trigger1 = Time = 1
x = -20

[State 19921, VelAdd]
type = VelAdd
trigger1 = AnimElem = 18
x = -15

[State 19921, PosAdd]
type = PosAdd
trigger1 = AnimElem = 19
x = -5

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 7
trigger2 = AnimElem = 11
trigger3 = AnimElem = 17
time = 6
ampl = -8
freq = 180

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 7
trigger2 = AnimElem = 17
anim = 8005
persist = 0
sprpriority = 7
postype = p1
pos = 50,-95
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 8005
persist = 0
sprpriority = 7
postype = p1
pos = 50,-75
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 19001, Explod]
type = Explod
trigger1 = AnimElem = 17
anim = 8007
persist = 0
sprpriority = 6
postype = p1
pos = 60,-85
;random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 3100, Explod]
type = Explod
trigger1 = AnimElem = 33
trigger2 = AnimElem = 38
anim = 3101
pos = 87, -80
postype = p1
bindtime = 1
ownpal = 1
ontop = 1

[State 19931, 4]
type = EnvShake
trigger1 = AnimElem = 34
time = 5
ampl = -12
freq = 165

[State 210, EnvColor]
type = EnvColor
trigger1 = AnimElem = 34
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 19931, CG]
type = ChangeState
trigger1 = AnimTime = 0
value = 0                ;Ubu si rialza
ctrl = 1

;---------------------------------------------
;Ti Tillo Ella subisce 
[Statedef 19935]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
sprpriority = 3
anim = 19935


[State 19935, Nothitby]    
type = NotHitBy
trigger1 = 1
value = SCA

[State 19935, VS]
type = VarSet
trigger1 = AnimTime = 0 
var(7) = 0

[State 19935, 1]
type = SelfState
trigger1 = Time = 0
value = 19935       ;Ella va alla sua anim
ctrl = 0

;-------------------------------------------------------------
;-SpecialCharge (Ubu vs Altri)
[Statedef 19980]
type = S
movetype = A
physics = S
anim = 19900
velset = 0, 0
ctrl = 0

[State 19000, HitDef]
type = HitDef
Trigger1 = Time = 0
attr = S, ST          
hitflag = M-         
priority = 1, Miss    
pausetime = 0,0
sparkno = 50          
sparkxy = 0,-75
;hitsound   = s17010,0
sprpriority = 1
p2facing = 1
p1stateno = 19981   
p2stateno = 19985  
;mindist = -50
;maxdist = -100      
fall = 1

[State 19901, SE]
type = PlaySnd
trigger1 = Time = 0
value = 10111, 0;

[State 19900, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------
;SuperCharge (ubu vs altri) continuazione pugni p1
[Statedef 19981]
type = S
movetype = A
physics = S
anim = 19981
velset = 0, 0
sprpriority = 4
ctrl = 0

[State 19981, SS]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 19981, Nothitby]    ;da controllare 
type = NotHitBy
trigger1 = 1
value = SCA

[State 10101, Width]    ;distanza dal bordo
type = Width
trigger1 = 1
edge = 75,10

[State 19981, SE]
type = PlaySnd
trigger1 = AnimElem = 1
value = 19900, 0; 

[State 19981, SE]
type = PlaySnd
trigger1 = AnimElem = 4
value = 41,1

[State 19981, SE]
type = PlaySnd
trigger1 = AnimElem = 17
value = 200, 2

[State 210, EnvColor]
type = EnvColor
trigger1 = AnimElem = 3
time = 1
value = 255,255,255
under = 1
ignorehitpause = 1

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 3
time = 10
ampl = -8
freq = 165

[State 19021, Explod]      ; Esplodino per UBu
type = Explod
trigger1 = AnimElem = 3
anim = 16011
persist = 0
sprpriority = 5
postype = p1
pos = 65,-115
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 1020, Explod]     ;polverino
type = Explod
trigger1 = AnimElem = 10
anim = 8003
sprpriority = 5
pos = 0,12
bindtime = 1
supermovetime = -1
ontop = 1

[State 1020, Explod]     ;polverino opposto
type = Explod
trigger1 = AnimElem = 10
anim = 8003
sprpriority = 5
pos = 15,12
bindtime = 1
supermovetime = -1
facing = -1
ontop = 1

[State 1020, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = AnimElem = 10
time = 12
sinadd = 100,100,100,3

[State 180, 2]
type = PowerAdd
trigger1 = AnimElem = 10
value = 1000

[State 19981, HitDef]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = Diagup        ;Back
damage = 50
guardflag = M
pausetime = 0,2
;sparkxy = 0,-55
sparkno = S99999
hitsound = 5,4
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.0,-3.0
air.velocity = -5.5,-3.7
fall = 1
maxdist = 65, -15
mindist = 65, -15

[State 19021, Explod]      
type = Explod
trigger1 = AnimElem = 17
anim = 8018
persist = 0
sprpriority = 5
postype = p1
pos = 65,-115
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1
ontop = 1

[State 180, 4]
type = EnvShake
trigger1 = AnimElem = 18
time = 12
ampl = -6
freq = 165

[State 10101, Bind 1]
type = TargetBind
trigger1 = Time = [0,75] 
pos = 65,-115

[State 19900, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------
;SuperCharge (ubu vs altri) lo state in cui va il p2 se preso
[Statedef 19985]
type    = A    
movetype= H
physics = N    
velset = 0,0
ctrl = 0

;[State 19985, Nothitby]    
;type = NotHitBy
;trigger1 = Time = [0,75] 
;value = SCA

[State 1020, Blink]  ;si colora bello chiaro
type = PalFX
trigger1 = Time = 31
time = 12
sinadd = 100,100,100,3

[State 180, 2]
type = PowerAdd
trigger1 = Time = 35
value = -1000

[State 4003, PosAdd]
type = PosAdd
trigger1 = Time = 76
x = 65
y = 0

[State 19985, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 19985

[State 821, 4] ;Hit ground
type = SelfState
trigger1 = AnimTime = 0
value =  0

;=============================================================================================
; schivo
[Statedef 725]
type = S
movetype = I
physics = S
anim = 725
velset = 0
ctrl = 0

[State 725, 1]
type = HitBy
trigger1 = Time = 0
value = SCA, NT, ST, HT
time = 47             

[State 725, 2]
type = SprPriority
trigger1 = Time = 0
value = -2

[State 725, 3]
type = PlayerPush
trigger1 = Time >= 0
value = 0

[State 725, 4]
type = PlaySnd
triggerall = Random < 300
trigger1 = Time = 1
value = 725,0;
volume = -20

[State 725, 5]
type = ChangeState
triggerall = AnimElem = 3, > 2
triggerall = AnimElem = 4, < 0
trigger1 = command = "x"
trigger2 = command = "a"
trigger3 = command = "y"
trigger4 = command = "b"
value = 730

[State 725, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------
; schivo e colpisco
[Statedef 730]
type = S
movetype = A
physics = S
anim = 730
poweradd = 60

[State 730, 1]
type = HitBy
trigger1 = Time = 0
value = SCA

[State 730, 3]
type = HitDef
trigger1 = time = 0
attr = S, NA
damage = 50
animtype = hard
guardflag = MA
sparkno = S8018
guard.sparkno = S8060
sparkxy = -10,-65
hitsound = s210,2
guardsound = 6,0
pausetime = 12,12
ground.hittime = 19
ground.type = low
ground.slidetime = 19
ground.velocity = -10
air.velocity = -4,-3

[State 730, Explod]
type = Explod
triggerall = movehit
trigger1 = AnimElem = 8
anim = 8001
sprpriority = 5
postype = p2
pos = -10,-52
random = 25,25
pausemovetime = 9999
supermovetime = 9999
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 730, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
;rotolino av
[Statedef 750]
type = S
movetype = I
physics = S
anim = 750
velset = 0
ctrl = 0

[State 750, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 26

[State 750, 2]
type = AfterImage
trigger1 = Time = 3
time = 16
trans = add1
timegap = 2
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 5

[State 750, 3]
type = SprPriority
trigger1 = Time = 8
value = -2

[State 750, 4]
type = VelSet
trigger1 = Time = [8,22]
x = 5

[State 750, 4.5]
type = PosAdd
trigger1 = AnimElem = 4
x = 10

[State 750, 5]
type = PlayerPush
trigger1 = Time = [8,22]
value = 0

[State 750, 6]
type = VelSet
trigger1 = AnimElem = 9
x = 0

[State 750, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
;rotolino ind
[Statedef 775]
type = S
movetype = I
physics = S
anim = 775
velset = 0
ctrl = 0

[State 775, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 25

[State 775, 2]
type = AfterImage
trigger1 = Time = 3
time = 16
trans = add1
timegap = 2
PalBright = 0,0,0
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = 1,1,1
framegap = 2
length = 5

[State 775, 3]
type = SprPriority
trigger1 = Time = 7
value = -2

[State 775, 4]
type = VelSet
trigger1 = Time = [7,20]
x = -5

[State 775, 405]
type = PosAdd
trigger1 = AnimElem = 3
x = -8

[State 775, 5]
type = PlayerPush
trigger1 = Time = [7,20]
value = 0

[State 775, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 775, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=================================================
;CARICAMENTO
[Statedef 700]
type = S
movetype = I
physics = S
anim = 700
velset = 0
ctrl = 0

;[State 700, VS]
;type = VarSet
;trigger1 = stateno = 700
;var(7) = 0

[State 700, 2]
type = PlaySnd
trigger1 = Time = 0
value = 700,0
channel = 0
volume = -50

[State 700, 3]
type = PowerAdd
trigger1 = ((Time + 2) % 2) = 0
value = 8

[State 700, 4]
type = ChangeState
trigger1 = power >= 3000
value = 715

[State 700, 5]
type = ChangeState
triggerall = AnimElem = 2, >= 0
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
value = 710

[State 700, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 705

;---------------------------------------
;-CARICAMENTO LOOP
[Statedef 705]
type = S
movetype = I
physics = S
anim = 705

[State 705, 1]
type = PowerAdd
trigger1 = ((Time + 2) % 2) = 0
value = 15

[State 705, 2]
type = Explod
trigger1 = ((Time + 12) % 12) = 0
anim = 711
sprpriority = 3
postype = p1
pos = 13,5
bindtime = -1

[State 705, 3]
type = ChangeState
trigger1 = power >= 3000
value = 715

[State 705, 4]
type = ChangeState
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
value = 710

[State 705, 5]
type = EnvShake
trigger1 = AnimElem = 1
trigger2 = AnimElem = 2
trigger3 = AnimElem = 3
trigger4 = AnimElem = 4
time = 3
ampl = -2
freq = 90

;-----------------
;-CARICAMENTO a meta'
[Statedef 710]
type = S
movetype = I
physics = S
anim = 710

[State 710, 1]
type = StopSnd
trigger1 = Time = 0
channel = 0

[State 710, 2]
type = StopSnd
trigger1 = Time = 0
channel = 1

[State 710, 3]
type = RemoveExplod
trigger1 = Time = 0

[State 710, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------
;CarMAX
[Statedef 715]
type = S
movetype = I
physics = S
anim = 715

[State 715, 1]
type = StopSnd
trigger1 = Time = 3
channel = 0

[State 715, 2]
type = StopSnd
trigger1 = Time = 3
channel = 1

[State 715, 3]
type = RemoveExplod
trigger1 = Time = 2

[State 715, 4]
type = Explod
trigger1 = AnimElem = 3
anim = 720
postype = p1
pos = 13,-3
sprpriority = 4
bindtime = 1
ownpal = 1

[State 715, 5]
type = EnvShake
trigger1 = AnimElem = 3
time = 20

[State 715, 6]
type = PalFX
trigger1 = AnimElem = 3
add = 64,64,64
time = 6

[State 715, 7]
type = PlaySnd
trigger1 = AnimElem = 3
value = 700,1

[State 715, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;==========================================
[Statedef 5201]
type = S
movetype = I
physics = N
anim = 5200
ctrl = 0

[State 5201,0]
type = turn
trigger1 = Time = 0
trigger1 = Vel X > 0
 
[State 5201,1]
type = VelSet
trigger1 = Time = 0
x = -3.0
y = 0

[State 5201,2]
type = VelAdd
trigger1 = Time >= 16
x = .80

[State 5201,3]
type = VelSet
trigger1 = Time > 16
trigger1 = Vel X >= 0
x = 0
y = 0

[State 5201,4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201,5]
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 5201,6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;============================================================================
[Statedef 780]
type = S
movetype = A
physics = S
poweradd = -1000
anim = 300
ctrl = 0

[State 780,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 10
anim = S780
pos = 0,-60

[State 780, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 780, SE]
type = PlaySnd
trigger1 = AnimElem = 2
value = 300, 0

[State 780, SE]
type = PlaySnd
trigger1 = AnimElem = 3
value = 210, 1

[State 780, AfterImage]
type = AfterImage
trigger1 = Time = 3
time = 12
trans = add1
timegap = 1
framegap = 2
length = 8

[State 780, 3]
type = HitDef
trigger1 = time = 0
attr = S, SA
animtype = Back
damage = 10
guardflag = M
pausetime = 14,14
sparkxy = 0,-55
sparkno = 1
hitsound = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime = 15
ground.velocity = -5.0,-3.0
air.velocity = -5.5,-3.7
fall = 1

[State 780, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------
[Statedef 790]
type = S
movetype = I
physics = S
anim = 750
velset = 0
poweradd = -1000
ctrl = 0

[State 790,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 10
anim = S780
pos = 0,-60

[State 790, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 790, 2]
type = AfterImage
trigger1 = Time = 3
time = 22
trans = add1
timegap = 1
framegap = 2
length = 8

[State 790, 3]
type = SprPriority
trigger1 = Time = 8
value = -2

[State 790, 4]
type = VelSet
trigger1 = Time = [4,24]
x = 5

[State 790, 5]
type = PlayerPush
trigger1 = Time = [4,24]
value = 0

[State 790, 6]
type = VelSet
trigger1 = AnimElem = 10
x = 0

[State 790,7]
type = Turn
trigger1 = AnimTime = 0 
trigger1 = P2BodyDist X < -5

[State 790, 8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------------------
[Statedef 795]
type = S
movetype = I
physics = S
anim = 775
velset = 0
ctrl = 0

[State 795,0]
type = SuperPause
trigger1 = Time = 0
time = 10
movetime = 10
anim = S780
pos = 0,-60

[State 795, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

[State 795, 2]
type = AfterImage
trigger1 = Time = 3
time = 22
trans = add1
timegap = 1
framegap = 2
length = 8

[State 795, 3]
type = SprPriority
trigger1 = Time = 8
value = -2

[State 795, 4]
type = VelSet
trigger1 = Time = [4,24]
x = -5

[State 795, 5]
type = PlayerPush
trigger1 = Time = [4,24]
value = 0

[State 795, 6]
type = VelSet
trigger1 = AnimElem = 8
x = 0

[State 795, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;================================================
;chiamo l'amico mio
[Statedef 4500]
type = S
ctrl = 0
anim = 4500
velset = 0,0
movetype = I
physics = S
sprpriority = 2
poweradd = -500

[State 4500, st]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "palonzo"
id = 6000
postype = back;left
pos = -10,0
stateno = 6000
keyctrl = 0
ownpal = 1
facing = 1

[State 4500, SE]
type = PlaySnd
trigger1 = animelem = 1
value = 195,0;

[State 4500, 1]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 4500, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;============================================================================
;AI
[Statedef 9999]
anim = 9999
ctrl = 0

[State 9999, AI]
type = VarSet
trigger1 = Command = "a"
trigger2 = Command = "b"
trigger3 = Command = "c"
trigger4 = Command = "x"
trigger5 = Command = "y"
trigger6 = Command = "z"
trigger7 = Command = "holdup"
trigger8 = Command = "holddown"
trigger9 = Command = "holdfwd"
trigger10 = Command = "holdback"
trigger11 = Command = "s"
var(59) = 1

[State 9999,AI]
type = ParentVarSet
trigger1 = RoundState = 2
trigger1 = !Var(59)
trigger1 = Parent, StateNo != 0
trigger1 = Parent, StateNo != [190,194]
trigger1 = Parent, StateNo != 5900
trigger1 = Parent, StateNo != [5000,5299]
trigger1 = Parent, MoveType != H
var(7) = 1

;============================================================================
[Statedef -2]

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 50
trigger2 = stateno = 105
trigger3 = stateno = 51
trigger3 = var(8) != 2 || var(8) != -2
value = 41,0

[State -2, SE]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 51
trigger1 = var(8) = 2 || var(8) = -2
value = 41,1

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52
trigger2 = stateno = 106
value = 40,0

;---------------------------------------------------------------------------
[State -2, SE]
type = PlaySnd
triggerall = Random < 500
triggerall = time = 1
trigger1 = stateno = 200
trigger2 = stateno = 400
trigger3 = stateno = 600
trigger4 = stateno = 230
trigger5 = stateno = 430
trigger6 = stateno = 630
value = 200, 0

[State -2, SE]
type = PlaySnd
triggerall = Random < 500
triggerall = time = 1
trigger1 = stateno = 210
trigger2 = stateno = 410
trigger3 = stateno = 610
trigger4 = stateno = 240
trigger5 = stateno = 440
trigger6 = stateno = 640
trigger7 = stateno = 245
trigger8 = stateno = 215
value = 210, 0

;---------------------------------------------------------------------------
[State -2, SE]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 200
trigger2 = stateno = 400
trigger3 = stateno = 600
trigger4 = stateno = 430
trigger5 = stateno = 630
value = 200, 1

[State -2, SE]
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 210
trigger2 = stateno = 410
trigger3 = stateno = 610
trigger4 = stateno = 230
trigger5 = stateno = 240
trigger6 = stateno = 640
trigger7 = stateno = 245
trigger8 = stateno = 215
value = 210, 1

;---------------------------------------------------------------------------
[State -2, SE]
type = PlaySnd
triggerall = Random < 300
triggerall = Time = 1
trigger1 = anim = 5000
trigger2 = anim = 5001
trigger3 = anim = 5010
value = 5000, 0

[State -2, SE]
type = PlaySnd
triggerall = Random < 300
triggerall = Time = 1
trigger1 = anim = 5001
trigger2 = anim = 5011
trigger3 = anim = 5021
value = 5000, 1

[State -2, SE]
type = PlaySnd
triggerall = Random < 300
triggerall = Time = 1
trigger1 = anim = 5002
trigger2 = anim = 5012
trigger3 = anim = 5022
value = 5000, 2

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = anim = 5200
value = 5200, 0

[State -2, SE]
type = PlaySnd
triggerall = Time = 1
trigger1 = anim = 5210
value = 5200, 1

[State -2, SE]
type = PlaySnd
trigger1 = anim = 170
trigger1 = time = 10
value = 5000, 3

[State -2, SE]
type = PlaySnd
trigger1 = anim = 10851
trigger1 = Time = 6
value = 800, 2;
volume = -10
;---------------------------------------------------------------------------
[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3001) = 1
trigger1 = Stateno != 3000
ID = 3001

[State -2, RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(3210) = 1
trigger1 = Stateno != 3201
ID = 3210

;----------------------------------------------------------------------------
[State -2, Palonzo]
type = Helper
triggerall = command = "st"
triggerall = command != "hold_x"
triggerall = command != "hold_b"
triggerall = movetype != H
triggerall = power >= 1000
triggerall = stateno != [3000,3300]  
triggerall = stateno != [700,719] 
triggerall = numhelper(6000) = 0
trigger1 = statetype != A
trigger1 = ctrl = 0
trigger2 = statetype = A
helpertype = normal
name = "palonzo"
id = 6000
postype = back;left
pos = -10,0
stateno = 6000
keyctrl = 0
ownpal = 1
facing = 1

;---------------------------------------------------------------------------
;COMANDI FINALI
[State, VarSet]
type = VarSet
triggerall = stateno = 1000 || stateno = 1010 || stateno = 1100 || stateno = 1110
triggerall = Time >= 10
trigger1 = command = "enought" || command = "thisisthehand" 
trigger1 = power >= 2000
var(10) = 1

[State, PalFX]
type = PalFX
triggerall = stateno = 1000 || stateno = 1010 || stateno = 1100 || stateno = 1110
triggerall = Time >= 10
trigger1 = command = "enought" || command = "thisisthehand" 
trigger1 = power >= 2000
add = 255,255,255
time = 4

[State, Poweradd]
type = Poweradd
triggerall = stateno = 1000 || stateno = 1010 || stateno = 1100 || stateno = 1110
triggerall = Time >= 10
trigger1 = command = "enought" || command = "thisisthehand" 
trigger1 = power >= 2000
value = -1000

[State, CS]
type = ChangeState
trigger1 = command = "enought" 
trigger1 = power >= 1000
trigger1 = var(10) = 1
value = 3000;
ctrl = 0

[State, CS]
type = ChangeState
trigger1 = command = "thisisthehand" 
trigger1 = power >= 1000
trigger1 = var(10) = 1
value = 3100;
ctrl = 0


;--------------------------------------------------------------------------
[State -2, VarAdd­]
type = VarAdd
triggerall = Var(4) >= 10
trigger1 = stateno = 5000 && Time = 0
v = 4
value = -1

[State -2, ­VarADD]
type = VarAdd
triggerall = Var(4) >= 10
trigger1 = timemod  = 100, 50
v = 4
value = -1
;===========================================================================
[Statedef -3]

;INTRO BASSI
[State -3, Turns Mode Intro]
type = ChangeState
triggerall = teammode = turns
triggerall = roundno > 1
triggerall = time = 0
triggerall = roundstate = 0
trigger1 = roundsexisted <= 0
trigger2 = p2name = "Bao"
trigger3 = p4name = "Bao"
trigger4 = p2name = "Choi Bounge"
trigger5 = p4name = "Choi Bounge"
trigger6 = p2name = "Wolverine"
trigger7 = p4name = "Wolverine"
trigger8 = p2name = "Miyako Arima HM"
trigger9 = p4name = "Miyako Arima HM"
trigger10 = p2name = "Megaman1"
trigger11 = p4name = "Megaman1"
trigger12 = p2name = "Mystiq Vegeta"
trigger13 = p4name = "Mystiq Vegeta"
trigger14 = p2name = "Tung Fu Rue"
trigger15 = p4name = "Tung Fu Rue"
trigger16 = p2name = "Diao Chan"
trigger17 = p4name = "Diao Chan"
trigger18 = p2name = "Gaits"
trigger19 = p4name = "Gaits"
trigger20 = p2name = "Gen"
trigger21 = p4name = "Gen"
trigger22 = p2name = "Okina"
trigger23 = p4name = "Okina"
trigger24 = p2name = "Choi"
trigger25 = p4name = "Choi"
trigger26 = p2name = "Gato By Deuce"
trigger27 = p4name = "Gato By Deuce"
trigger28 = p2name = "Rolf"
trigger29 = p4name = "Rolf"
trigger30 = p2name = "Sasquatch"
trigger31 = p4name = "Sasquatch"
value = 191

[state -3, nolifebar]
type = assertspecial
trigger1 = roundstate != 2
flag = NoBarDisplay

;---------------------------------------------------------
[State -3, VarSet]
type = Varset
trigger1 = var(7) = 1
trigger1 = RoundState = 3
var(7) = 0

[State -3, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = 1
ignorehitpause = 1
text = "AI(var 7) %d, guard(var 4) %d"
params = var(7),var(4)